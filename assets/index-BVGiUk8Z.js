var Ot={},ha;function tu(){if(ha)return Ot;ha=1,Ot.byteLength=u,Ot.toByteArray=d,Ot.fromByteArray=b;for(var e=[],n=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=r.length;o<l;++o)e[o]=r[o],n[r.charCodeAt(o)]=o;n[45]=62,n[95]=63;function s(_){var F=_.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=F);var P=S===F?0:4-S%4;return[S,P]}function u(_){var F=s(_),S=F[0],P=F[1];return(S+P)*3/4-P}function c(_,F,S){return(F+S)*3/4-S}function d(_){var F,S=s(_),P=S[0],x=S[1],I=new t(c(_,P,x)),C=0,M=x>0?P-4:P,z;for(z=0;z<M;z+=4)F=n[_.charCodeAt(z)]<<18|n[_.charCodeAt(z+1)]<<12|n[_.charCodeAt(z+2)]<<6|n[_.charCodeAt(z+3)],I[C++]=F>>16&255,I[C++]=F>>8&255,I[C++]=F&255;return x===2&&(F=n[_.charCodeAt(z)]<<2|n[_.charCodeAt(z+1)]>>4,I[C++]=F&255),x===1&&(F=n[_.charCodeAt(z)]<<10|n[_.charCodeAt(z+1)]<<4|n[_.charCodeAt(z+2)]>>2,I[C++]=F>>8&255,I[C++]=F&255),I}function h(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function y(_,F,S){for(var P,x=[],I=F;I<S;I+=3)P=(_[I]<<16&16711680)+(_[I+1]<<8&65280)+(_[I+2]&255),x.push(h(P));return x.join("")}function b(_){for(var F,S=_.length,P=S%3,x=[],I=16383,C=0,M=S-P;C<M;C+=I)x.push(y(_,C,C+I>M?M:C+I));return P===1?(F=_[S-1],x.push(e[F>>2]+e[F<<4&63]+"==")):P===2&&(F=(_[S-2]<<8)+_[S-1],x.push(e[F>>10]+e[F>>4&63]+e[F<<2&63]+"=")),x.join("")}return Ot}var Zt=tu(),zt={exports:{}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */var ru=zt.exports,pa;function iu(){return pa||(pa=1,function(e,n){(function(t,r){r(n)})(ru,function(t){function r(i){let f=i.length;for(;--f>=0;)i[f]=0}const o=256,l=286,s=30,u=15,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),d=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=new Array(576);r(b);const _=new Array(60);r(_);const F=new Array(512);r(F);const S=new Array(256);r(S);const P=new Array(29);r(P);const x=new Array(s);function I(i,f,a,g,m){this.static_tree=i,this.extra_bits=f,this.extra_base=a,this.elems=g,this.max_length=m,this.has_stree=i&&i.length}let C,M,z;function $(i,f){this.dyn_tree=i,this.max_code=0,this.stat_desc=f}r(x);const Y=i=>i<256?F[i]:F[256+(i>>>7)],Z=(i,f)=>{i.pending_buf[i.pending++]=255&f,i.pending_buf[i.pending++]=f>>>8&255},ae=(i,f,a)=>{i.bi_valid>16-a?(i.bi_buf|=f<<i.bi_valid&65535,Z(i,i.bi_buf),i.bi_buf=f>>16-i.bi_valid,i.bi_valid+=a-16):(i.bi_buf|=f<<i.bi_valid&65535,i.bi_valid+=a)},le=(i,f,a)=>{ae(i,a[2*f],a[2*f+1])},Ae=(i,f)=>{let a=0;do a|=1&i,i>>>=1,a<<=1;while(--f>0);return a>>>1},Me=(i,f,a)=>{const g=new Array(16);let m,v,A=0;for(m=1;m<=u;m++)A=A+a[m-1]<<1,g[m]=A;for(v=0;v<=f;v++){let w=i[2*v+1];w!==0&&(i[2*v]=Ae(g[w]++,w))}},V=i=>{let f;for(f=0;f<l;f++)i.dyn_ltree[2*f]=0;for(f=0;f<s;f++)i.dyn_dtree[2*f]=0;for(f=0;f<19;f++)i.bl_tree[2*f]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},re=i=>{i.bi_valid>8?Z(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},Pe=(i,f,a,g)=>{const m=2*f,v=2*a;return i[m]<i[v]||i[m]===i[v]&&g[f]<=g[a]},K=(i,f,a)=>{const g=i.heap[a];let m=a<<1;for(;m<=i.heap_len&&(m<i.heap_len&&Pe(f,i.heap[m+1],i.heap[m],i.depth)&&m++,!Pe(f,g,i.heap[m],i.depth));)i.heap[a]=i.heap[m],a=m,m<<=1;i.heap[a]=g},Qe=(i,f,a)=>{let g,m,v,A,w=0;if(i.sym_next!==0)do g=255&i.pending_buf[i.sym_buf+w++],g+=(255&i.pending_buf[i.sym_buf+w++])<<8,m=i.pending_buf[i.sym_buf+w++],g===0?le(i,m,f):(v=S[m],le(i,v+o+1,f),A=c[v],A!==0&&(m-=P[v],ae(i,m,A)),g--,v=Y(g),le(i,v,a),A=d[v],A!==0&&(g-=x[v],ae(i,g,A)));while(w<i.sym_next);le(i,256,f)},Le=(i,f)=>{const a=f.dyn_tree,g=f.stat_desc.static_tree,m=f.stat_desc.has_stree,v=f.stat_desc.elems;let A,w,L,k=-1;for(i.heap_len=0,i.heap_max=573,A=0;A<v;A++)a[2*A]!==0?(i.heap[++i.heap_len]=k=A,i.depth[A]=0):a[2*A+1]=0;for(;i.heap_len<2;)L=i.heap[++i.heap_len]=k<2?++k:0,a[2*L]=1,i.depth[L]=0,i.opt_len--,m&&(i.static_len-=g[2*L+1]);for(f.max_code=k,A=i.heap_len>>1;A>=1;A--)K(i,a,A);L=v;do A=i.heap[1],i.heap[1]=i.heap[i.heap_len--],K(i,a,1),w=i.heap[1],i.heap[--i.heap_max]=A,i.heap[--i.heap_max]=w,a[2*L]=a[2*A]+a[2*w],i.depth[L]=(i.depth[A]>=i.depth[w]?i.depth[A]:i.depth[w])+1,a[2*A+1]=a[2*w+1]=L,i.heap[1]=L++,K(i,a,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],((D,ce)=>{const J=ce.dyn_tree,T=ce.max_code,Te=ce.stat_desc.static_tree,_e=ce.stat_desc.has_stree,te=ce.stat_desc.extra_bits,we=ce.stat_desc.extra_base,ue=ce.stat_desc.max_length;let j,oe,ke,W,be,fe,ie=0;for(W=0;W<=u;W++)D.bl_count[W]=0;for(J[2*D.heap[D.heap_max]+1]=0,j=D.heap_max+1;j<573;j++)oe=D.heap[j],W=J[2*J[2*oe+1]+1]+1,W>ue&&(W=ue,ie++),J[2*oe+1]=W,oe>T||(D.bl_count[W]++,be=0,oe>=we&&(be=te[oe-we]),fe=J[2*oe],D.opt_len+=fe*(W+be),_e&&(D.static_len+=fe*(Te[2*oe+1]+be)));if(ie!==0){do{for(W=ue-1;D.bl_count[W]===0;)W--;D.bl_count[W]--,D.bl_count[W+1]+=2,D.bl_count[ue]--,ie-=2}while(ie>0);for(W=ue;W!==0;W--)for(oe=D.bl_count[W];oe!==0;)ke=D.heap[--j],ke>T||(J[2*ke+1]!==W&&(D.opt_len+=(W-J[2*ke+1])*J[2*ke],J[2*ke+1]=W),oe--)}})(i,f),Me(a,k,i.bl_count)},We=(i,f,a)=>{let g,m,v=-1,A=f[1],w=0,L=7,k=4;for(A===0&&(L=138,k=3),f[2*(a+1)+1]=65535,g=0;g<=a;g++)m=A,A=f[2*(g+1)+1],++w<L&&m===A||(w<k?i.bl_tree[2*m]+=w:m!==0?(m!==v&&i.bl_tree[2*m]++,i.bl_tree[32]++):w<=10?i.bl_tree[34]++:i.bl_tree[36]++,w=0,v=m,A===0?(L=138,k=3):m===A?(L=6,k=3):(L=7,k=4))},pe=(i,f,a)=>{let g,m,v=-1,A=f[1],w=0,L=7,k=4;for(A===0&&(L=138,k=3),g=0;g<=a;g++)if(m=A,A=f[2*(g+1)+1],!(++w<L&&m===A)){if(w<k)do le(i,m,i.bl_tree);while(--w!=0);else m!==0?(m!==v&&(le(i,m,i.bl_tree),w--),le(i,16,i.bl_tree),ae(i,w-3,2)):w<=10?(le(i,17,i.bl_tree),ae(i,w-3,3)):(le(i,18,i.bl_tree),ae(i,w-11,7));w=0,v=m,A===0?(L=138,k=3):m===A?(L=6,k=3):(L=7,k=4)}};let Ye=!1;const un=(i,f,a,g)=>{ae(i,0+(g?1:0),3),re(i),Z(i,a),Z(i,~a),a&&i.pending_buf.set(i.window.subarray(f,f+a),i.pending),i.pending+=a};var An=(i,f,a,g)=>{let m,v,A=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=(w=>{let L,k=4093624447;for(L=0;L<=31;L++,k>>>=1)if(1&k&&w.dyn_ltree[2*L]!==0)return 0;if(w.dyn_ltree[18]!==0||w.dyn_ltree[20]!==0||w.dyn_ltree[26]!==0)return 1;for(L=32;L<o;L++)if(w.dyn_ltree[2*L]!==0)return 1;return 0})(i)),Le(i,i.l_desc),Le(i,i.d_desc),A=(w=>{let L;for(We(w,w.dyn_ltree,w.l_desc.max_code),We(w,w.dyn_dtree,w.d_desc.max_code),Le(w,w.bl_desc),L=18;L>=3&&w.bl_tree[2*y[L]+1]===0;L--);return w.opt_len+=3*(L+1)+5+5+4,L})(i),m=i.opt_len+3+7>>>3,v=i.static_len+3+7>>>3,v<=m&&(m=v)):m=v=a+5,a+4<=m&&f!==-1?un(i,f,a,g):i.strategy===4||v===m?(ae(i,2+(g?1:0),3),Qe(i,b,_)):(ae(i,4+(g?1:0),3),((w,L,k,D)=>{let ce;for(ae(w,L-257,5),ae(w,k-1,5),ae(w,D-4,4),ce=0;ce<D;ce++)ae(w,w.bl_tree[2*y[ce]+1],3);pe(w,w.dyn_ltree,L-1),pe(w,w.dyn_dtree,k-1)})(i,i.l_desc.max_code+1,i.d_desc.max_code+1,A+1),Qe(i,i.dyn_ltree,i.dyn_dtree)),V(i),g&&re(i)},Xn={_tr_init:i=>{Ye||((()=>{let f,a,g,m,v;const A=new Array(16);for(g=0,m=0;m<28;m++)for(P[m]=g,f=0;f<1<<c[m];f++)S[g++]=m;for(S[g-1]=m,v=0,m=0;m<16;m++)for(x[m]=v,f=0;f<1<<d[m];f++)F[v++]=m;for(v>>=7;m<s;m++)for(x[m]=v<<7,f=0;f<1<<d[m]-7;f++)F[256+v++]=m;for(a=0;a<=u;a++)A[a]=0;for(f=0;f<=143;)b[2*f+1]=8,f++,A[8]++;for(;f<=255;)b[2*f+1]=9,f++,A[9]++;for(;f<=279;)b[2*f+1]=7,f++,A[7]++;for(;f<=287;)b[2*f+1]=8,f++,A[8]++;for(Me(b,287,A),f=0;f<s;f++)_[2*f+1]=5,_[2*f]=Ae(f,5);C=new I(b,c,257,l,u),M=new I(_,d,0,s,u),z=new I(new Array(0),h,0,19,7)})(),Ye=!0),i.l_desc=new $(i.dyn_ltree,C),i.d_desc=new $(i.dyn_dtree,M),i.bl_desc=new $(i.bl_tree,z),i.bi_buf=0,i.bi_valid=0,V(i)},_tr_stored_block:un,_tr_flush_block:An,_tr_tally:(i,f,a)=>(i.pending_buf[i.sym_buf+i.sym_next++]=f,i.pending_buf[i.sym_buf+i.sym_next++]=f>>8,i.pending_buf[i.sym_buf+i.sym_next++]=a,f===0?i.dyn_ltree[2*a]++:(i.matches++,f--,i.dyn_ltree[2*(S[a]+o+1)]++,i.dyn_dtree[2*Y(f)]++),i.sym_next===i.sym_end),_tr_align:i=>{ae(i,2,3),le(i,256,b),(f=>{f.bi_valid===16?(Z(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=255&f.bi_buf,f.bi_buf>>=8,f.bi_valid-=8)})(i)}},cn=(i,f,a,g)=>{let m=65535&i|0,v=i>>>16&65535|0,A=0;for(;a!==0;){A=a>2e3?2e3:a,a-=A;do m=m+f[g++]|0,v=v+m|0;while(--A);m%=65521,v%=65521}return m|v<<16|0};const rl=new Uint32Array((()=>{let i,f=[];for(var a=0;a<256;a++){i=a;for(var g=0;g<8;g++)i=1&i?3988292384^i>>>1:i>>>1;f[a]=i}return f})());var Ue=(i,f,a,g)=>{const m=rl,v=g+a;i^=-1;for(let A=g;A<v;A++)i=i>>>8^m[255&(i^f[A])];return-1^i},Zn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},St={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:il,_tr_stored_block:Br,_tr_flush_block:al,_tr_tally:zn,_tr_align:ol}=Xn,{Z_NO_FLUSH:Un,Z_PARTIAL_FLUSH:sl,Z_FULL_FLUSH:ll,Z_FINISH:fn,Z_BLOCK:Oi,Z_OK:je,Z_STREAM_END:Li,Z_STREAM_ERROR:kn,Z_DATA_ERROR:ul,Z_BUF_ERROR:zr,Z_DEFAULT_COMPRESSION:cl,Z_FILTERED:fl,Z_HUFFMAN_ONLY:$t,Z_RLE:dl,Z_FIXED:hl,Z_DEFAULT_STRATEGY:pl,Z_UNKNOWN:vl,Z_DEFLATED:er}=St,Yn=258,xn=262,rt=42,Kn=113,_t=666,qn=(i,f)=>(i.msg=Zn[f],f),Mi=i=>2*i-(i>4?9:0),Nn=i=>{let f=i.length;for(;--f>=0;)i[f]=0},ml=i=>{let f,a,g,m=i.w_size;f=i.hash_size,g=f;do a=i.head[--g],i.head[g]=a>=m?a-m:0;while(--f);f=m,g=f;do a=i.prev[--g],i.prev[g]=a>=m?a-m:0;while(--f)};let Gn=(i,f,a)=>(f<<i.hash_shift^a)&i.hash_mask;const $e=i=>{const f=i.state;let a=f.pending;a>i.avail_out&&(a=i.avail_out),a!==0&&(i.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+a),i.next_out),i.next_out+=a,f.pending_out+=a,i.total_out+=a,i.avail_out-=a,f.pending-=a,f.pending===0&&(f.pending_out=0))},en=(i,f)=>{al(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,f),i.block_start=i.strstart,$e(i.strm)},Ie=(i,f)=>{i.pending_buf[i.pending++]=f},Ft=(i,f)=>{i.pending_buf[i.pending++]=f>>>8&255,i.pending_buf[i.pending++]=255&f},Ur=(i,f,a,g)=>{let m=i.avail_in;return m>g&&(m=g),m===0?0:(i.avail_in-=m,f.set(i.input.subarray(i.next_in,i.next_in+m),a),i.state.wrap===1?i.adler=cn(i.adler,f,m,a):i.state.wrap===2&&(i.adler=Ue(i.adler,f,m,a)),i.next_in+=m,i.total_in+=m,m)},Ti=(i,f)=>{let a,g,m=i.max_chain_length,v=i.strstart,A=i.prev_length,w=i.nice_match;const L=i.strstart>i.w_size-xn?i.strstart-(i.w_size-xn):0,k=i.window,D=i.w_mask,ce=i.prev,J=i.strstart+Yn;let T=k[v+A-1],Te=k[v+A];i.prev_length>=i.good_match&&(m>>=2),w>i.lookahead&&(w=i.lookahead);do if(a=f,k[a+A]===Te&&k[a+A-1]===T&&k[a]===k[v]&&k[++a]===k[v+1]){v+=2,a++;do;while(k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&k[++v]===k[++a]&&v<J);if(g=Yn-(J-v),v=J-Yn,g>A){if(i.match_start=f,A=g,g>=w)break;T=k[v+A-1],Te=k[v+A]}}while((f=ce[f&D])>L&&--m!=0);return A<=i.lookahead?A:i.lookahead},it=i=>{const f=i.w_size;let a,g,m;do{if(g=i.window_size-i.lookahead-i.strstart,i.strstart>=f+(f-xn)&&(i.window.set(i.window.subarray(f,f+f-g),0),i.match_start-=f,i.strstart-=f,i.block_start-=f,i.insert>i.strstart&&(i.insert=i.strstart),ml(i),g+=f),i.strm.avail_in===0)break;if(a=Ur(i.strm,i.window,i.strstart+i.lookahead,g),i.lookahead+=a,i.lookahead+i.insert>=3)for(m=i.strstart-i.insert,i.ins_h=i.window[m],i.ins_h=Gn(i,i.ins_h,i.window[m+1]);i.insert&&(i.ins_h=Gn(i,i.ins_h,i.window[m+3-1]),i.prev[m&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=m,m++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<xn&&i.strm.avail_in!==0)},Ri=(i,f)=>{let a,g,m,v=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,A=0,w=i.strm.avail_in;do{if(a=65535,m=i.bi_valid+42>>3,i.strm.avail_out<m||(m=i.strm.avail_out-m,g=i.strstart-i.block_start,a>g+i.strm.avail_in&&(a=g+i.strm.avail_in),a>m&&(a=m),a<v&&(a===0&&f!==fn||f===Un||a!==g+i.strm.avail_in)))break;A=f===fn&&a===g+i.strm.avail_in?1:0,Br(i,0,0,A),i.pending_buf[i.pending-4]=a,i.pending_buf[i.pending-3]=a>>8,i.pending_buf[i.pending-2]=~a,i.pending_buf[i.pending-1]=~a>>8,$e(i.strm),g&&(g>a&&(g=a),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+g),i.strm.next_out),i.strm.next_out+=g,i.strm.avail_out-=g,i.strm.total_out+=g,i.block_start+=g,a-=g),a&&(Ur(i.strm,i.strm.output,i.strm.next_out,a),i.strm.next_out+=a,i.strm.avail_out-=a,i.strm.total_out+=a)}while(A===0);return w-=i.strm.avail_in,w&&(w>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=w&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-w,i.strm.next_in),i.strstart),i.strstart+=w,i.insert+=w>i.w_size-i.insert?i.w_size-i.insert:w),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),A?4:f!==Un&&f!==fn&&i.strm.avail_in===0&&i.strstart===i.block_start?2:(m=i.window_size-i.strstart,i.strm.avail_in>m&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,m+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),m>i.strm.avail_in&&(m=i.strm.avail_in),m&&(Ur(i.strm,i.window,i.strstart,m),i.strstart+=m,i.insert+=m>i.w_size-i.insert?i.w_size-i.insert:m),i.high_water<i.strstart&&(i.high_water=i.strstart),m=i.bi_valid+42>>3,m=i.pending_buf_size-m>65535?65535:i.pending_buf_size-m,v=m>i.w_size?i.w_size:m,g=i.strstart-i.block_start,(g>=v||(g||f===fn)&&f!==Un&&i.strm.avail_in===0&&g<=m)&&(a=g>m?m:g,A=f===fn&&i.strm.avail_in===0&&a===g?1:0,Br(i,i.block_start,a,A),i.block_start+=a,$e(i.strm)),A?3:1)},Nr=(i,f)=>{let a,g;for(;;){if(i.lookahead<xn){if(it(i),i.lookahead<xn&&f===Un)return 1;if(i.lookahead===0)break}if(a=0,i.lookahead>=3&&(i.ins_h=Gn(i,i.ins_h,i.window[i.strstart+3-1]),a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),a!==0&&i.strstart-a<=i.w_size-xn&&(i.match_length=Ti(i,a)),i.match_length>=3)if(g=zn(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=Gn(i,i.ins_h,i.window[i.strstart+3-1]),a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Gn(i,i.ins_h,i.window[i.strstart+1]);else g=zn(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(g&&(en(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,f===fn?(en(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(en(i,!1),i.strm.avail_out===0)?1:2},at=(i,f)=>{let a,g,m;for(;;){if(i.lookahead<xn){if(it(i),i.lookahead<xn&&f===Un)return 1;if(i.lookahead===0)break}if(a=0,i.lookahead>=3&&(i.ins_h=Gn(i,i.ins_h,i.window[i.strstart+3-1]),a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,a!==0&&i.prev_length<i.max_lazy_match&&i.strstart-a<=i.w_size-xn&&(i.match_length=Ti(i,a),i.match_length<=5&&(i.strategy===fl||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){m=i.strstart+i.lookahead-3,g=zn(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=m&&(i.ins_h=Gn(i,i.ins_h,i.window[i.strstart+3-1]),a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,g&&(en(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if(g=zn(i,0,i.window[i.strstart-1]),g&&en(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(g=zn(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,f===fn?(en(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(en(i,!1),i.strm.avail_out===0)?1:2};function In(i,f,a,g,m){this.good_length=i,this.max_lazy=f,this.nice_length=a,this.max_chain=g,this.func=m}const wt=[new In(0,0,0,0,Ri),new In(4,4,8,4,Nr),new In(4,5,16,8,Nr),new In(4,6,32,32,Nr),new In(4,4,16,16,at),new In(8,16,32,32,at),new In(8,16,128,128,at),new In(8,32,128,256,at),new In(32,128,258,1024,at),new In(32,258,258,4096,at)];function gl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=er,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Nn(this.dyn_ltree),Nn(this.dyn_dtree),Nn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Nn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Nn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const kt=i=>{if(!i)return 1;const f=i.state;return!f||f.strm!==i||f.status!==rt&&f.status!==57&&f.status!==69&&f.status!==73&&f.status!==91&&f.status!==103&&f.status!==Kn&&f.status!==_t?1:0},Bi=i=>{if(kt(i))return qn(i,kn);i.total_in=i.total_out=0,i.data_type=vl;const f=i.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap===2?57:f.wrap?rt:Kn,i.adler=f.wrap===2?0:1,f.last_flush=-2,il(f),je},zi=i=>{const f=Bi(i);var a;return f===je&&((a=i.state).window_size=2*a.w_size,Nn(a.head),a.max_lazy_match=wt[a.level].max_lazy,a.good_match=wt[a.level].good_length,a.nice_match=wt[a.level].nice_length,a.max_chain_length=wt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),f},Ui=(i,f,a,g,m,v)=>{if(!i)return kn;let A=1;if(f===cl&&(f=6),g<0?(A=0,g=-g):g>15&&(A=2,g-=16),m<1||m>9||a!==er||g<8||g>15||f<0||f>9||v<0||v>hl||g===8&&A!==1)return qn(i,kn);g===8&&(g=9);const w=new gl;return i.state=w,w.strm=i,w.status=rt,w.wrap=A,w.gzhead=null,w.w_bits=g,w.w_size=1<<w.w_bits,w.w_mask=w.w_size-1,w.hash_bits=m+7,w.hash_size=1<<w.hash_bits,w.hash_mask=w.hash_size-1,w.hash_shift=~~((w.hash_bits+3-1)/3),w.window=new Uint8Array(2*w.w_size),w.head=new Uint16Array(w.hash_size),w.prev=new Uint16Array(w.w_size),w.lit_bufsize=1<<m+6,w.pending_buf_size=4*w.lit_bufsize,w.pending_buf=new Uint8Array(w.pending_buf_size),w.sym_buf=w.lit_bufsize,w.sym_end=3*(w.lit_bufsize-1),w.level=f,w.strategy=v,w.method=a,zi(i)};var xt={deflateInit:(i,f)=>Ui(i,f,er,15,8,pl),deflateInit2:Ui,deflateReset:zi,deflateResetKeep:Bi,deflateSetHeader:(i,f)=>kt(i)||i.state.wrap!==2?kn:(i.state.gzhead=f,je),deflate:(i,f)=>{if(kt(i)||f>Oi||f<0)return i?qn(i,kn):kn;const a=i.state;if(!i.output||i.avail_in!==0&&!i.input||a.status===_t&&f!==fn)return qn(i,i.avail_out===0?zr:kn);const g=a.last_flush;if(a.last_flush=f,a.pending!==0){if($e(i),i.avail_out===0)return a.last_flush=-1,je}else if(i.avail_in===0&&Mi(f)<=Mi(g)&&f!==fn)return qn(i,zr);if(a.status===_t&&i.avail_in!==0)return qn(i,zr);if(a.status===rt&&a.wrap===0&&(a.status=Kn),a.status===rt){let m=er+(a.w_bits-8<<4)<<8,v=-1;if(v=a.strategy>=$t||a.level<2?0:a.level<6?1:a.level===6?2:3,m|=v<<6,a.strstart!==0&&(m|=32),m+=31-m%31,Ft(a,m),a.strstart!==0&&(Ft(a,i.adler>>>16),Ft(a,65535&i.adler)),i.adler=1,a.status=Kn,$e(i),a.pending!==0)return a.last_flush=-1,je}if(a.status===57){if(i.adler=0,Ie(a,31),Ie(a,139),Ie(a,8),a.gzhead)Ie(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Ie(a,255&a.gzhead.time),Ie(a,a.gzhead.time>>8&255),Ie(a,a.gzhead.time>>16&255),Ie(a,a.gzhead.time>>24&255),Ie(a,a.level===9?2:a.strategy>=$t||a.level<2?4:0),Ie(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(Ie(a,255&a.gzhead.extra.length),Ie(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(i.adler=Ue(i.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(Ie(a,0),Ie(a,0),Ie(a,0),Ie(a,0),Ie(a,0),Ie(a,a.level===9?2:a.strategy>=$t||a.level<2?4:0),Ie(a,3),a.status=Kn,$e(i),a.pending!==0)return a.last_flush=-1,je}if(a.status===69){if(a.gzhead.extra){let m=a.pending,v=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+v>a.pending_buf_size;){let w=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+w),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>m&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-m,m)),a.gzindex+=w,$e(i),a.pending!==0)return a.last_flush=-1,je;m=0,v-=w}let A=new Uint8Array(a.gzhead.extra);a.pending_buf.set(A.subarray(a.gzindex,a.gzindex+v),a.pending),a.pending+=v,a.gzhead.hcrc&&a.pending>m&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-m,m)),a.gzindex=0}a.status=73}if(a.status===73){if(a.gzhead.name){let m,v=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>v&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-v,v)),$e(i),a.pending!==0)return a.last_flush=-1,je;v=0}m=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,Ie(a,m)}while(m!==0);a.gzhead.hcrc&&a.pending>v&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-v,v)),a.gzindex=0}a.status=91}if(a.status===91){if(a.gzhead.comment){let m,v=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>v&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-v,v)),$e(i),a.pending!==0)return a.last_flush=-1,je;v=0}m=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,Ie(a,m)}while(m!==0);a.gzhead.hcrc&&a.pending>v&&(i.adler=Ue(i.adler,a.pending_buf,a.pending-v,v))}a.status=103}if(a.status===103){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&($e(i),a.pending!==0))return a.last_flush=-1,je;Ie(a,255&i.adler),Ie(a,i.adler>>8&255),i.adler=0}if(a.status=Kn,$e(i),a.pending!==0)return a.last_flush=-1,je}if(i.avail_in!==0||a.lookahead!==0||f!==Un&&a.status!==_t){let m=a.level===0?Ri(a,f):a.strategy===$t?((v,A)=>{let w;for(;;){if(v.lookahead===0&&(it(v),v.lookahead===0)){if(A===Un)return 1;break}if(v.match_length=0,w=zn(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++,w&&(en(v,!1),v.strm.avail_out===0))return 1}return v.insert=0,A===fn?(en(v,!0),v.strm.avail_out===0?3:4):v.sym_next&&(en(v,!1),v.strm.avail_out===0)?1:2})(a,f):a.strategy===dl?((v,A)=>{let w,L,k,D;const ce=v.window;for(;;){if(v.lookahead<=Yn){if(it(v),v.lookahead<=Yn&&A===Un)return 1;if(v.lookahead===0)break}if(v.match_length=0,v.lookahead>=3&&v.strstart>0&&(k=v.strstart-1,L=ce[k],L===ce[++k]&&L===ce[++k]&&L===ce[++k])){D=v.strstart+Yn;do;while(L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&L===ce[++k]&&k<D);v.match_length=Yn-(D-k),v.match_length>v.lookahead&&(v.match_length=v.lookahead)}if(v.match_length>=3?(w=zn(v,1,v.match_length-3),v.lookahead-=v.match_length,v.strstart+=v.match_length,v.match_length=0):(w=zn(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++),w&&(en(v,!1),v.strm.avail_out===0))return 1}return v.insert=0,A===fn?(en(v,!0),v.strm.avail_out===0?3:4):v.sym_next&&(en(v,!1),v.strm.avail_out===0)?1:2})(a,f):wt[a.level].func(a,f);if(m!==3&&m!==4||(a.status=_t),m===1||m===3)return i.avail_out===0&&(a.last_flush=-1),je;if(m===2&&(f===sl?ol(a):f!==Oi&&(Br(a,0,0,!1),f===ll&&(Nn(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),$e(i),i.avail_out===0))return a.last_flush=-1,je}return f!==fn?je:a.wrap<=0?Li:(a.wrap===2?(Ie(a,255&i.adler),Ie(a,i.adler>>8&255),Ie(a,i.adler>>16&255),Ie(a,i.adler>>24&255),Ie(a,255&i.total_in),Ie(a,i.total_in>>8&255),Ie(a,i.total_in>>16&255),Ie(a,i.total_in>>24&255)):(Ft(a,i.adler>>>16),Ft(a,65535&i.adler)),$e(i),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?je:Li)},deflateEnd:i=>{if(kt(i))return kn;const f=i.state.status;return i.state=null,f===Kn?qn(i,ul):je},deflateSetDictionary:(i,f)=>{let a=f.length;if(kt(i))return kn;const g=i.state,m=g.wrap;if(m===2||m===1&&g.status!==rt||g.lookahead)return kn;if(m===1&&(i.adler=cn(i.adler,f,a,0)),g.wrap=0,a>=g.w_size){m===0&&(Nn(g.head),g.strstart=0,g.block_start=0,g.insert=0);let L=new Uint8Array(g.w_size);L.set(f.subarray(a-g.w_size,a),0),f=L,a=g.w_size}const v=i.avail_in,A=i.next_in,w=i.input;for(i.avail_in=a,i.next_in=0,i.input=f,it(g);g.lookahead>=3;){let L=g.strstart,k=g.lookahead-2;do g.ins_h=Gn(g,g.ins_h,g.window[L+3-1]),g.prev[L&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=L,L++;while(--k);g.strstart=L,g.lookahead=2,it(g)}return g.strstart+=g.lookahead,g.block_start=g.strstart,g.insert=g.lookahead,g.lookahead=0,g.match_length=g.prev_length=2,g.match_available=0,i.next_in=A,i.input=w,i.avail_in=v,g.wrap=m,je},deflateInfo:"pako deflate (from Nodeca project)"};const yl=(i,f)=>Object.prototype.hasOwnProperty.call(i,f);var Ni=function(i){const f=Array.prototype.slice.call(arguments,1);for(;f.length;){const a=f.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const g in a)yl(a,g)&&(i[g]=a[g])}}return i},Gi=i=>{let f=0;for(let g=0,m=i.length;g<m;g++)f+=i[g].length;const a=new Uint8Array(f);for(let g=0,m=0,v=i.length;g<v;g++){let A=i[g];a.set(A,m),m+=A.length}return a};let Vi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vi=!1}const It=new Uint8Array(256);for(let i=0;i<256;i++)It[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;It[254]=It[254]=1;var Gr=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let f,a,g,m,v,A=i.length,w=0;for(m=0;m<A;m++)a=i.charCodeAt(m),(64512&a)==55296&&m+1<A&&(g=i.charCodeAt(m+1),(64512&g)==56320&&(a=65536+(a-55296<<10)+(g-56320),m++)),w+=a<128?1:a<2048?2:a<65536?3:4;for(f=new Uint8Array(w),v=0,m=0;v<w;m++)a=i.charCodeAt(m),(64512&a)==55296&&m+1<A&&(g=i.charCodeAt(m+1),(64512&g)==56320&&(a=65536+(a-55296<<10)+(g-56320),m++)),a<128?f[v++]=a:a<2048?(f[v++]=192|a>>>6,f[v++]=128|63&a):a<65536?(f[v++]=224|a>>>12,f[v++]=128|a>>>6&63,f[v++]=128|63&a):(f[v++]=240|a>>>18,f[v++]=128|a>>>12&63,f[v++]=128|a>>>6&63,f[v++]=128|63&a);return f},bl=(i,f)=>{const a=f||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,f));let g,m;const v=new Array(2*a);for(m=0,g=0;g<a;){let A=i[g++];if(A<128){v[m++]=A;continue}let w=It[A];if(w>4)v[m++]=65533,g+=w-1;else{for(A&=w===2?31:w===3?15:7;w>1&&g<a;)A=A<<6|63&i[g++],w--;w>1?v[m++]=65533:A<65536?v[m++]=A:(A-=65536,v[m++]=55296|A>>10&1023,v[m++]=56320|1023&A)}}return((A,w)=>{if(w<65534&&A.subarray&&Vi)return String.fromCharCode.apply(null,A.length===w?A:A.subarray(0,w));let L="";for(let k=0;k<w;k++)L+=String.fromCharCode(A[k]);return L})(v,m)},Sl=(i,f)=>{(f=f||i.length)>i.length&&(f=i.length);let a=f-1;for(;a>=0&&(192&i[a])==128;)a--;return a<0||a===0?f:a+It[i[a]]>f?a:f},ji=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Hi=Object.prototype.toString,{Z_NO_FLUSH:_l,Z_SYNC_FLUSH:Fl,Z_FULL_FLUSH:wl,Z_FINISH:kl,Z_OK:nr,Z_STREAM_END:xl,Z_DEFAULT_COMPRESSION:Il,Z_DEFAULT_STRATEGY:Cl,Z_DEFLATED:Dl}=St;function Ct(i){this.options=Ni({level:Il,method:Dl,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cl},i||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ji,this.strm.avail_out=0;let a=xt.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(a!==nr)throw new Error(Zn[a]);if(f.header&&xt.deflateSetHeader(this.strm,f.header),f.dictionary){let g;if(g=typeof f.dictionary=="string"?Gr(f.dictionary):Hi.call(f.dictionary)==="[object ArrayBuffer]"?new Uint8Array(f.dictionary):f.dictionary,a=xt.deflateSetDictionary(this.strm,g),a!==nr)throw new Error(Zn[a]);this._dict_set=!0}}function Vr(i,f){const a=new Ct(f);if(a.push(i,!0),a.err)throw a.msg||Zn[a.err];return a.result}Ct.prototype.push=function(i,f){const a=this.strm,g=this.options.chunkSize;let m,v;if(this.ended)return!1;for(v=f===~~f?f:f===!0?kl:_l,typeof i=="string"?a.input=Gr(i):Hi.call(i)==="[object ArrayBuffer]"?a.input=new Uint8Array(i):a.input=i,a.next_in=0,a.avail_in=a.input.length;;)if(a.avail_out===0&&(a.output=new Uint8Array(g),a.next_out=0,a.avail_out=g),(v===Fl||v===wl)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(m=xt.deflate(a,v),m===xl)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),m=xt.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===nr;if(a.avail_out!==0){if(v>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(a.avail_in===0)break}else this.onData(a.output)}return!0},Ct.prototype.onData=function(i){this.chunks.push(i)},Ct.prototype.onEnd=function(i){i===nr&&(this.result=Gi(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Al={Deflate:Ct,deflate:Vr,deflateRaw:function(i,f){return(f=f||{}).raw=!0,Vr(i,f)},gzip:function(i,f){return(f=f||{}).gzip=!0,Vr(i,f)}};const tr=16209;var Pl=function(i,f){let a,g,m,v,A,w,L,k,D,ce,J,T,Te,_e,te,we,ue,j,oe,ke,W,be,fe,ie;const me=i.state;a=i.next_in,fe=i.input,g=a+(i.avail_in-5),m=i.next_out,ie=i.output,v=m-(f-i.avail_out),A=m+(i.avail_out-257),w=me.dmax,L=me.wsize,k=me.whave,D=me.wnext,ce=me.window,J=me.hold,T=me.bits,Te=me.lencode,_e=me.distcode,te=(1<<me.lenbits)-1,we=(1<<me.distbits)-1;e:do{T<15&&(J+=fe[a++]<<T,T+=8,J+=fe[a++]<<T,T+=8),ue=Te[J&te];n:for(;;){if(j=ue>>>24,J>>>=j,T-=j,j=ue>>>16&255,j===0)ie[m++]=65535&ue;else{if(!(16&j)){if((64&j)==0){ue=Te[(65535&ue)+(J&(1<<j)-1)];continue n}if(32&j){me.mode=16191;break e}i.msg="invalid literal/length code",me.mode=tr;break e}oe=65535&ue,j&=15,j&&(T<j&&(J+=fe[a++]<<T,T+=8),oe+=J&(1<<j)-1,J>>>=j,T-=j),T<15&&(J+=fe[a++]<<T,T+=8,J+=fe[a++]<<T,T+=8),ue=_e[J&we];t:for(;;){if(j=ue>>>24,J>>>=j,T-=j,j=ue>>>16&255,!(16&j)){if((64&j)==0){ue=_e[(65535&ue)+(J&(1<<j)-1)];continue t}i.msg="invalid distance code",me.mode=tr;break e}if(ke=65535&ue,j&=15,T<j&&(J+=fe[a++]<<T,T+=8,T<j&&(J+=fe[a++]<<T,T+=8)),ke+=J&(1<<j)-1,ke>w){i.msg="invalid distance too far back",me.mode=tr;break e}if(J>>>=j,T-=j,j=m-v,ke>j){if(j=ke-j,j>k&&me.sane){i.msg="invalid distance too far back",me.mode=tr;break e}if(W=0,be=ce,D===0){if(W+=L-j,j<oe){oe-=j;do ie[m++]=ce[W++];while(--j);W=m-ke,be=ie}}else if(D<j){if(W+=L+D-j,j-=D,j<oe){oe-=j;do ie[m++]=ce[W++];while(--j);if(W=0,D<oe){j=D,oe-=j;do ie[m++]=ce[W++];while(--j);W=m-ke,be=ie}}}else if(W+=D-j,j<oe){oe-=j;do ie[m++]=ce[W++];while(--j);W=m-ke,be=ie}for(;oe>2;)ie[m++]=be[W++],ie[m++]=be[W++],ie[m++]=be[W++],oe-=3;oe&&(ie[m++]=be[W++],oe>1&&(ie[m++]=be[W++]))}else{W=m-ke;do ie[m++]=ie[W++],ie[m++]=ie[W++],ie[m++]=ie[W++],oe-=3;while(oe>2);oe&&(ie[m++]=ie[W++],oe>1&&(ie[m++]=ie[W++]))}break}}break}}while(a<g&&m<A);oe=T>>3,a-=oe,T-=oe<<3,J&=(1<<T)-1,i.next_in=a,i.next_out=m,i.avail_in=a<g?g-a+5:5-(a-g),i.avail_out=m<A?A-m+257:257-(m-A),me.hold=J,me.bits=T};const rr=15,El=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ol=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ll=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ml=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Dt=(i,f,a,g,m,v,A,w)=>{const L=w.bits;let k,D,ce,J,T,Te,_e=0,te=0,we=0,ue=0,j=0,oe=0,ke=0,W=0,be=0,fe=0,ie=null;const me=new Uint16Array(16),Ke=new Uint16Array(16);let Et,ur,cr,fr=null;for(_e=0;_e<=rr;_e++)me[_e]=0;for(te=0;te<g;te++)me[f[a+te]]++;for(j=L,ue=rr;ue>=1&&me[ue]===0;ue--);if(j>ue&&(j=ue),ue===0)return m[v++]=20971520,m[v++]=20971520,w.bits=1,0;for(we=1;we<ue&&me[we]===0;we++);for(j<we&&(j=we),W=1,_e=1;_e<=rr;_e++)if(W<<=1,W-=me[_e],W<0)return-1;if(W>0&&(i===0||ue!==1))return-1;for(Ke[1]=0,_e=1;_e<rr;_e++)Ke[_e+1]=Ke[_e]+me[_e];for(te=0;te<g;te++)f[a+te]!==0&&(A[Ke[f[a+te]]++]=te);if(i===0?(ie=fr=A,Te=20):i===1?(ie=El,fr=Ol,Te=257):(ie=Ll,fr=Ml,Te=0),fe=0,te=0,_e=we,T=v,oe=j,ke=0,ce=-1,be=1<<j,J=be-1,i===1&&be>852||i===2&&be>592)return 1;for(;;){Et=_e-ke,A[te]+1<Te?(ur=0,cr=A[te]):A[te]>=Te?(ur=fr[A[te]-Te],cr=ie[A[te]-Te]):(ur=96,cr=0),k=1<<_e-ke,D=1<<oe,we=D;do D-=k,m[T+(fe>>ke)+D]=Et<<24|ur<<16|cr|0;while(D!==0);for(k=1<<_e-1;fe&k;)k>>=1;if(k!==0?(fe&=k-1,fe+=k):fe=0,te++,--me[_e]==0){if(_e===ue)break;_e=f[a+A[te]]}if(_e>j&&(fe&J)!==ce){for(ke===0&&(ke=j),T+=we,oe=_e-ke,W=1<<oe;oe+ke<ue&&(W-=me[oe+ke],!(W<=0));)oe++,W<<=1;if(be+=1<<oe,i===1&&be>852||i===2&&be>592)return 1;ce=fe&J,m[ce]=j<<24|oe<<16|T-v|0}}return fe!==0&&(m[T+fe]=_e-ke<<24|64<<16|0),w.bits=j,0};const{Z_FINISH:Wi,Z_BLOCK:Tl,Z_TREES:ir,Z_OK:Jn,Z_STREAM_END:Rl,Z_NEED_DICT:Bl,Z_STREAM_ERROR:dn,Z_DATA_ERROR:Xi,Z_MEM_ERROR:Zi,Z_BUF_ERROR:zl,Z_DEFLATED:Yi}=St,ar=16180,or=16190,Pn=16191,jr=16192,Hr=16194,sr=16199,lr=16200,Wr=16206,Oe=16209,Ki=i=>(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24);function Ul(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qn=i=>{if(!i)return 1;const f=i.state;return!f||f.strm!==i||f.mode<ar||f.mode>16211?1:0},qi=i=>{if(Qn(i))return dn;const f=i.state;return i.total_in=i.total_out=f.total=0,i.msg="",f.wrap&&(i.adler=1&f.wrap),f.mode=ar,f.last=0,f.havedict=0,f.flags=-1,f.dmax=32768,f.head=null,f.hold=0,f.bits=0,f.lencode=f.lendyn=new Int32Array(852),f.distcode=f.distdyn=new Int32Array(592),f.sane=1,f.back=-1,Jn},Ji=i=>{if(Qn(i))return dn;const f=i.state;return f.wsize=0,f.whave=0,f.wnext=0,qi(i)},Qi=(i,f)=>{let a;if(Qn(i))return dn;const g=i.state;return f<0?(a=0,f=-f):(a=5+(f>>4),f<48&&(f&=15)),f&&(f<8||f>15)?dn:(g.window!==null&&g.wbits!==f&&(g.window=null),g.wrap=a,g.wbits=f,Ji(i))},$i=(i,f)=>{if(!i)return dn;const a=new Ul;i.state=a,a.strm=i,a.window=null,a.mode=ar;const g=Qi(i,f);return g!==Jn&&(i.state=null),g};let Xr,Zr,ea=!0;const Nl=i=>{if(ea){Xr=new Int32Array(512),Zr=new Int32Array(32);let f=0;for(;f<144;)i.lens[f++]=8;for(;f<256;)i.lens[f++]=9;for(;f<280;)i.lens[f++]=7;for(;f<288;)i.lens[f++]=8;for(Dt(1,i.lens,0,288,Xr,0,i.work,{bits:9}),f=0;f<32;)i.lens[f++]=5;Dt(2,i.lens,0,32,Zr,0,i.work,{bits:5}),ea=!1}i.lencode=Xr,i.lenbits=9,i.distcode=Zr,i.distbits=5},na=(i,f,a,g)=>{let m;const v=i.state;return v.window===null&&(v.wsize=1<<v.wbits,v.wnext=0,v.whave=0,v.window=new Uint8Array(v.wsize)),g>=v.wsize?(v.window.set(f.subarray(a-v.wsize,a),0),v.wnext=0,v.whave=v.wsize):(m=v.wsize-v.wnext,m>g&&(m=g),v.window.set(f.subarray(a-g,a-g+m),v.wnext),(g-=m)?(v.window.set(f.subarray(a-g,a),0),v.wnext=g,v.whave=v.wsize):(v.wnext+=m,v.wnext===v.wsize&&(v.wnext=0),v.whave<v.wsize&&(v.whave+=m))),0};var En={inflateReset:Ji,inflateReset2:Qi,inflateResetKeep:qi,inflateInit:i=>$i(i,15),inflateInit2:$i,inflate:(i,f)=>{let a,g,m,v,A,w,L,k,D,ce,J,T,Te,_e,te,we,ue,j,oe,ke,W,be,fe=0;const ie=new Uint8Array(4);let me,Ke;const Et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qn(i)||!i.output||!i.input&&i.avail_in!==0)return dn;a=i.state,a.mode===Pn&&(a.mode=jr),A=i.next_out,m=i.output,L=i.avail_out,v=i.next_in,g=i.input,w=i.avail_in,k=a.hold,D=a.bits,ce=w,J=L,be=Jn;e:for(;;)switch(a.mode){case ar:if(a.wrap===0){a.mode=jr;break}for(;D<16;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(2&a.wrap&&k===35615){a.wbits===0&&(a.wbits=15),a.check=0,ie[0]=255&k,ie[1]=k>>>8&255,a.check=Ue(a.check,ie,2,0),k=0,D=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&k)<<8)+(k>>8))%31){i.msg="incorrect header check",a.mode=Oe;break}if((15&k)!==Yi){i.msg="unknown compression method",a.mode=Oe;break}if(k>>>=4,D-=4,W=8+(15&k),a.wbits===0&&(a.wbits=W),W>15||W>a.wbits){i.msg="invalid window size",a.mode=Oe;break}a.dmax=1<<a.wbits,a.flags=0,i.adler=a.check=1,a.mode=512&k?16189:Pn,k=0,D=0;break;case 16181:for(;D<16;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(a.flags=k,(255&a.flags)!==Yi){i.msg="unknown compression method",a.mode=Oe;break}if(57344&a.flags){i.msg="unknown header flags set",a.mode=Oe;break}a.head&&(a.head.text=k>>8&1),512&a.flags&&4&a.wrap&&(ie[0]=255&k,ie[1]=k>>>8&255,a.check=Ue(a.check,ie,2,0)),k=0,D=0,a.mode=16182;case 16182:for(;D<32;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.head&&(a.head.time=k),512&a.flags&&4&a.wrap&&(ie[0]=255&k,ie[1]=k>>>8&255,ie[2]=k>>>16&255,ie[3]=k>>>24&255,a.check=Ue(a.check,ie,4,0)),k=0,D=0,a.mode=16183;case 16183:for(;D<16;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.head&&(a.head.xflags=255&k,a.head.os=k>>8),512&a.flags&&4&a.wrap&&(ie[0]=255&k,ie[1]=k>>>8&255,a.check=Ue(a.check,ie,2,0)),k=0,D=0,a.mode=16184;case 16184:if(1024&a.flags){for(;D<16;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.length=k,a.head&&(a.head.extra_len=k),512&a.flags&&4&a.wrap&&(ie[0]=255&k,ie[1]=k>>>8&255,a.check=Ue(a.check,ie,2,0)),k=0,D=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(T=a.length,T>w&&(T=w),T&&(a.head&&(W=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(g.subarray(v,v+T),W)),512&a.flags&&4&a.wrap&&(a.check=Ue(a.check,g,T,v)),w-=T,v+=T,a.length-=T),a.length))break e;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(w===0)break e;T=0;do W=g[v+T++],a.head&&W&&a.length<65536&&(a.head.name+=String.fromCharCode(W));while(W&&T<w);if(512&a.flags&&4&a.wrap&&(a.check=Ue(a.check,g,T,v)),w-=T,v+=T,W)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(w===0)break e;T=0;do W=g[v+T++],a.head&&W&&a.length<65536&&(a.head.comment+=String.fromCharCode(W));while(W&&T<w);if(512&a.flags&&4&a.wrap&&(a.check=Ue(a.check,g,T,v)),w-=T,v+=T,W)break e}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;D<16;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(4&a.wrap&&k!==(65535&a.check)){i.msg="header crc mismatch",a.mode=Oe;break}k=0,D=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),i.adler=a.check=0,a.mode=Pn;break;case 16189:for(;D<32;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}i.adler=a.check=Ki(k),k=0,D=0,a.mode=or;case or:if(a.havedict===0)return i.next_out=A,i.avail_out=L,i.next_in=v,i.avail_in=w,a.hold=k,a.bits=D,Bl;i.adler=a.check=1,a.mode=Pn;case Pn:if(f===Tl||f===ir)break e;case jr:if(a.last){k>>>=7&D,D-=7&D,a.mode=Wr;break}for(;D<3;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}switch(a.last=1&k,k>>>=1,D-=1,3&k){case 0:a.mode=16193;break;case 1:if(Nl(a),a.mode=sr,f===ir){k>>>=2,D-=2;break e}break;case 2:a.mode=16196;break;case 3:i.msg="invalid block type",a.mode=Oe}k>>>=2,D-=2;break;case 16193:for(k>>>=7&D,D-=7&D;D<32;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if((65535&k)!=(k>>>16^65535)){i.msg="invalid stored block lengths",a.mode=Oe;break}if(a.length=65535&k,k=0,D=0,a.mode=Hr,f===ir)break e;case Hr:a.mode=16195;case 16195:if(T=a.length,T){if(T>w&&(T=w),T>L&&(T=L),T===0)break e;m.set(g.subarray(v,v+T),A),w-=T,v+=T,L-=T,A+=T,a.length-=T;break}a.mode=Pn;break;case 16196:for(;D<14;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(a.nlen=257+(31&k),k>>>=5,D-=5,a.ndist=1+(31&k),k>>>=5,D-=5,a.ncode=4+(15&k),k>>>=4,D-=4,a.nlen>286||a.ndist>30){i.msg="too many length or distance symbols",a.mode=Oe;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;D<3;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.lens[Et[a.have++]]=7&k,k>>>=3,D-=3}for(;a.have<19;)a.lens[Et[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,me={bits:a.lenbits},be=Dt(0,a.lens,0,19,a.lencode,0,a.work,me),a.lenbits=me.bits,be){i.msg="invalid code lengths set",a.mode=Oe;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;fe=a.lencode[k&(1<<a.lenbits)-1],te=fe>>>24,we=fe>>>16&255,ue=65535&fe,!(te<=D);){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(ue<16)k>>>=te,D-=te,a.lens[a.have++]=ue;else{if(ue===16){for(Ke=te+2;D<Ke;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(k>>>=te,D-=te,a.have===0){i.msg="invalid bit length repeat",a.mode=Oe;break}W=a.lens[a.have-1],T=3+(3&k),k>>>=2,D-=2}else if(ue===17){for(Ke=te+3;D<Ke;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}k>>>=te,D-=te,W=0,T=3+(7&k),k>>>=3,D-=3}else{for(Ke=te+7;D<Ke;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}k>>>=te,D-=te,W=0,T=11+(127&k),k>>>=7,D-=7}if(a.have+T>a.nlen+a.ndist){i.msg="invalid bit length repeat",a.mode=Oe;break}for(;T--;)a.lens[a.have++]=W}}if(a.mode===Oe)break;if(a.lens[256]===0){i.msg="invalid code -- missing end-of-block",a.mode=Oe;break}if(a.lenbits=9,me={bits:a.lenbits},be=Dt(1,a.lens,0,a.nlen,a.lencode,0,a.work,me),a.lenbits=me.bits,be){i.msg="invalid literal/lengths set",a.mode=Oe;break}if(a.distbits=6,a.distcode=a.distdyn,me={bits:a.distbits},be=Dt(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,me),a.distbits=me.bits,be){i.msg="invalid distances set",a.mode=Oe;break}if(a.mode=sr,f===ir)break e;case sr:a.mode=lr;case lr:if(w>=6&&L>=258){i.next_out=A,i.avail_out=L,i.next_in=v,i.avail_in=w,a.hold=k,a.bits=D,Pl(i,J),A=i.next_out,m=i.output,L=i.avail_out,v=i.next_in,g=i.input,w=i.avail_in,k=a.hold,D=a.bits,a.mode===Pn&&(a.back=-1);break}for(a.back=0;fe=a.lencode[k&(1<<a.lenbits)-1],te=fe>>>24,we=fe>>>16&255,ue=65535&fe,!(te<=D);){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(we&&(240&we)==0){for(j=te,oe=we,ke=ue;fe=a.lencode[ke+((k&(1<<j+oe)-1)>>j)],te=fe>>>24,we=fe>>>16&255,ue=65535&fe,!(j+te<=D);){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}k>>>=j,D-=j,a.back+=j}if(k>>>=te,D-=te,a.back+=te,a.length=ue,we===0){a.mode=16205;break}if(32&we){a.back=-1,a.mode=Pn;break}if(64&we){i.msg="invalid literal/length code",a.mode=Oe;break}a.extra=15&we,a.mode=16201;case 16201:if(a.extra){for(Ke=a.extra;D<Ke;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.length+=k&(1<<a.extra)-1,k>>>=a.extra,D-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;fe=a.distcode[k&(1<<a.distbits)-1],te=fe>>>24,we=fe>>>16&255,ue=65535&fe,!(te<=D);){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if((240&we)==0){for(j=te,oe=we,ke=ue;fe=a.distcode[ke+((k&(1<<j+oe)-1)>>j)],te=fe>>>24,we=fe>>>16&255,ue=65535&fe,!(j+te<=D);){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}k>>>=j,D-=j,a.back+=j}if(k>>>=te,D-=te,a.back+=te,64&we){i.msg="invalid distance code",a.mode=Oe;break}a.offset=ue,a.extra=15&we,a.mode=16203;case 16203:if(a.extra){for(Ke=a.extra;D<Ke;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}a.offset+=k&(1<<a.extra)-1,k>>>=a.extra,D-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){i.msg="invalid distance too far back",a.mode=Oe;break}a.mode=16204;case 16204:if(L===0)break e;if(T=J-L,a.offset>T){if(T=a.offset-T,T>a.whave&&a.sane){i.msg="invalid distance too far back",a.mode=Oe;break}T>a.wnext?(T-=a.wnext,Te=a.wsize-T):Te=a.wnext-T,T>a.length&&(T=a.length),_e=a.window}else _e=m,Te=A-a.offset,T=a.length;T>L&&(T=L),L-=T,a.length-=T;do m[A++]=_e[Te++];while(--T);a.length===0&&(a.mode=lr);break;case 16205:if(L===0)break e;m[A++]=a.length,L--,a.mode=lr;break;case Wr:if(a.wrap){for(;D<32;){if(w===0)break e;w--,k|=g[v++]<<D,D+=8}if(J-=L,i.total_out+=J,a.total+=J,4&a.wrap&&J&&(i.adler=a.check=a.flags?Ue(a.check,m,J,A-J):cn(a.check,m,J,A-J)),J=L,4&a.wrap&&(a.flags?k:Ki(k))!==a.check){i.msg="incorrect data check",a.mode=Oe;break}k=0,D=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;D<32;){if(w===0)break e;w--,k+=g[v++]<<D,D+=8}if(4&a.wrap&&k!==(4294967295&a.total)){i.msg="incorrect length check",a.mode=Oe;break}k=0,D=0}a.mode=16208;case 16208:be=Rl;break e;case Oe:be=Xi;break e;case 16210:return Zi;default:return dn}return i.next_out=A,i.avail_out=L,i.next_in=v,i.avail_in=w,a.hold=k,a.bits=D,(a.wsize||J!==i.avail_out&&a.mode<Oe&&(a.mode<Wr||f!==Wi))&&na(i,i.output,i.next_out,J-i.avail_out),ce-=i.avail_in,J-=i.avail_out,i.total_in+=ce,i.total_out+=J,a.total+=J,4&a.wrap&&J&&(i.adler=a.check=a.flags?Ue(a.check,m,J,i.next_out-J):cn(a.check,m,J,i.next_out-J)),i.data_type=a.bits+(a.last?64:0)+(a.mode===Pn?128:0)+(a.mode===sr||a.mode===Hr?256:0),(ce===0&&J===0||f===Wi)&&be===Jn&&(be=zl),be},inflateEnd:i=>{if(Qn(i))return dn;let f=i.state;return f.window&&(f.window=null),i.state=null,Jn},inflateGetHeader:(i,f)=>{if(Qn(i))return dn;const a=i.state;return(2&a.wrap)==0?dn:(a.head=f,f.done=!1,Jn)},inflateSetDictionary:(i,f)=>{const a=f.length;let g,m,v;return Qn(i)?dn:(g=i.state,g.wrap!==0&&g.mode!==or?dn:g.mode===or&&(m=1,m=cn(m,f,a,0),m!==g.check)?Xi:(v=na(i,f,a,a),v?(g.mode=16210,Zi):(g.havedict=1,Jn)))},inflateInfo:"pako inflate (from Nodeca project)"},Gl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ta=Object.prototype.toString,{Z_NO_FLUSH:Vl,Z_FINISH:jl,Z_OK:At,Z_STREAM_END:Yr,Z_NEED_DICT:Kr,Z_STREAM_ERROR:Hl,Z_DATA_ERROR:ra,Z_MEM_ERROR:Wl}=St;function Pt(i){this.options=Ni({chunkSize:65536,windowBits:15,to:""},i||{});const f=this.options;f.raw&&f.windowBits>=0&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(f.windowBits>=0&&f.windowBits<16)||i&&i.windowBits||(f.windowBits+=32),f.windowBits>15&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ji,this.strm.avail_out=0;let a=En.inflateInit2(this.strm,f.windowBits);if(a!==At)throw new Error(Zn[a]);if(this.header=new Gl,En.inflateGetHeader(this.strm,this.header),f.dictionary&&(typeof f.dictionary=="string"?f.dictionary=Gr(f.dictionary):ta.call(f.dictionary)==="[object ArrayBuffer]"&&(f.dictionary=new Uint8Array(f.dictionary)),f.raw&&(a=En.inflateSetDictionary(this.strm,f.dictionary),a!==At)))throw new Error(Zn[a])}function qr(i,f){const a=new Pt(f);if(a.push(i),a.err)throw a.msg||Zn[a.err];return a.result}Pt.prototype.push=function(i,f){const a=this.strm,g=this.options.chunkSize,m=this.options.dictionary;let v,A,w;if(this.ended)return!1;for(A=f===~~f?f:f===!0?jl:Vl,ta.call(i)==="[object ArrayBuffer]"?a.input=new Uint8Array(i):a.input=i,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(g),a.next_out=0,a.avail_out=g),v=En.inflate(a,A),v===Kr&&m&&(v=En.inflateSetDictionary(a,m),v===At?v=En.inflate(a,A):v===ra&&(v=Kr));a.avail_in>0&&v===Yr&&a.state.wrap>0&&i[a.next_in]!==0;)En.inflateReset(a),v=En.inflate(a,A);switch(v){case Hl:case ra:case Kr:case Wl:return this.onEnd(v),this.ended=!0,!1}if(w=a.avail_out,a.next_out&&(a.avail_out===0||v===Yr))if(this.options.to==="string"){let L=Sl(a.output,a.next_out),k=a.next_out-L,D=bl(a.output,L);a.next_out=k,a.avail_out=g-k,k&&a.output.set(a.output.subarray(L,L+k),0),this.onData(D)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(v!==At||w!==0){if(v===Yr)return v=En.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,!0;if(a.avail_in===0)break}}return!0},Pt.prototype.onData=function(i){this.chunks.push(i)},Pt.prototype.onEnd=function(i){i===At&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gi(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Xl={Inflate:Pt,inflate:qr,inflateRaw:function(i,f){return(f=f||{}).raw=!0,qr(i,f)},ungzip:qr};const{Deflate:Zl,deflate:Yl,deflateRaw:Kl,gzip:ql}=Al,{Inflate:Jl,inflate:Ql,inflateRaw:$l,ungzip:eu}=Xl;var ia=Zl,aa=Yl,oa=Kl,sa=ql,la=Jl,ua=Ql,ca=$l,fa=eu,da=St,nu={Deflate:ia,deflate:aa,deflateRaw:oa,gzip:sa,Inflate:la,inflate:ua,inflateRaw:ca,ungzip:fa,constants:da};t.Deflate=ia,t.Inflate=la,t.constants=da,t.default=nu,t.deflate=aa,t.deflateRaw=oa,t.gzip=sa,t.inflate=ua,t.inflateRaw=ca,t.ungzip=fa,Object.defineProperty(t,"__esModule",{value:!0})})}(zt,zt.exports)),zt.exports}var Io=iu(),au=!1,Mr={},vt={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(vt).forEach(function(e){return Mr[vt[e]]=e});var va=["none","red","orange","yellow","green","blue","violet","gray"],Co=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function ou(e){var n={};return Object.keys(e).forEach(function(t){return n[e[t]]=t}),n}function ne(e,n,t){var r=ou(t),o=function(s){var u=s.split(".")[1];if(u&&!r[u])throw new Error("Unrecognized value for enum: '".concat(s,"'"));return r[u]||n},l=function(s){if(s&&!t[s])throw new Error("Invalid value for enum: '".concat(s,"'"));return"".concat(e,".").concat(t[s]||t[n])};return{decode:o,encode:l}}var ma;(function(e){e[e.RGB=0]="RGB",e[e.HSB=1]="HSB",e[e.CMYK=2]="CMYK",e[e.Lab=7]="Lab",e[e.Grayscale=8]="Grayscale"})(ma||(ma={}));var ga;(function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",e[e.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",e[e.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(ga||(ga={}));var ya;(function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"})(ya||(ya={}));var ba;(function(e){e[e.Color0=0]="Color0",e[e.Color1=1]="Color1",e[e.Color2=2]="Color2",e[e.Color3=3]="Color3",e[e.Transparency=-1]="Transparency",e[e.UserMask=-2]="UserMask",e[e.RealUserMask=-3]="RealUserMask"})(ba||(ba={}));var Sa;(function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"})(Sa||(Sa={}));function Do(e,n){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return n?3:e+1;case-1:return n?4:3;default:return e+1}}function bi(e,n,t){return e<n?n:e>t?t:e}function Ao(e){for(var n=e.width*e.height*4,t=3;t<n;t+=4)if(e.data[t]!==255)return!0;return!1}function fi(e){for(var n=e.data,t=n instanceof Float32Array?1:n instanceof Uint16Array?65535:255,r=0,o=n.length|0;r<o;r=r+4|0)n[r+0]=0,n[r+1]=0,n[r+2]=0,n[r+3]=t}function Cr(e){var n=Yt(e.width,e.height),t;if(e.data instanceof Uint8ClampedArray)t=e;else{t=mt(e.width,e.height);var r=e.data,o=t.data;if(r instanceof Float32Array)for(var l=0,s=r.length;l<s;l+=4)o[l+0]=Math.round(Math.pow(r[l+0],1/2.2)*255),o[l+1]=Math.round(Math.pow(r[l+1],1/2.2)*255),o[l+2]=Math.round(Math.pow(r[l+2],1/2.2)*255),o[l+3]=Math.round(r[l+3]*255);else for(var u=r instanceof Uint16Array?8:0,l=0,s=r.length;l<s;l++)o[l]=r[l]>>>u}return n.getContext("2d").putImageData(t,0,0),n}function su(e,n,t,r){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var o=0,l=0,s=0;o<r;o++)for(var u=0;u<t;)for(var c=e[s++],d=0;d<8&&u<t;d++,u++,l+=4){var h=c&128?0:255;c=c<<1,n[l+0]=h,n[l+1]=h,n[l+2]=h,n[l+3]=255}}function Si(e,n,t,r){var o=n.data,l=n.width,s=n.height;if(!(!l||!s)){for(var u=4*l|0,c=0,d=t.length*(r?4:2)*s|0,h=0,y=t;h<y.length;h++)for(var b=y[h],_=0,F=b|0;_<s;_++){var S=_*u|0,P=S+u|0,x=P+b-4|0,I=x-4|0,C=d;for(F=S+b|0;F<P;F=F+4|0)if(F<I){var M=o[F];F=F+4|0;var z=o[F];F=F+4|0;var $=o[F];if(M===z&&M===$){for(var Y=3;Y<128&&F<x&&o[F+4|0]===M;)Y=Y+1|0,F=F+4|0;e[d++]=1-Y,e[d++]=M}else{var Z=d,ae=!0,Y=1;for(e[d++]=0,e[d++]=M;F<x&&Y<128;)if(F=F+4|0,M=z,z=$,$=o[F],M===z&&M===$){F=F-12|0,ae=!1;break}else Y++,e[d++]=M;ae&&(Y<127?(e[d++]=z,e[d++]=$,Y+=2):Y<128?(e[d++]=z,Y++,F=F-4|0):F=F-8|0),e[Z]=Y-1}}else F===x?(e[d++]=0,e[d++]=o[F]):(e[d++]=1,e[d++]=o[F],F=F+4|0,e[d++]=o[F]);var le=d-C;r&&(e[c++]=le>>24&255,e[c++]=le>>16&255),e[c++]=le>>8&255,e[c++]=le&255}return e.slice(0,d)}}function Po(e,n){for(var t=e.data,r=e.width,o=e.height,l=r*o,s=new Uint8Array(l),u=[],c=0,d=0,h=n;d<h.length;d++){for(var y=h[d],b=0,_=y;b<l;b++,_+=4)s[b]=t[_];var F=Io.deflate(s);u.push(F),c+=F.byteLength}if(u.length>0){for(var F=new Uint8Array(c),y=0,S=0,P=u;S<P.length;S++){var x=P[S];F.set(x,y),y+=x.byteLength}return F}else return u[0]}var Yt=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},Dr=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")},Jr=void 0,mt=function(e,n){return Jr||(Jr=Yt(1,1)),Jr.getContext("2d").createImageData(e,n)};typeof document<"u"&&(Yt=function(e,n){var t=document.createElement("canvas");return t.width=e,t.height=n,t},Dr=function(e){var n=new Image;n.src="data:image/jpeg;base64,"+Zt.fromByteArray(e);var t=document.createElement("canvas");return t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),t});function xc(e,n,t){Yt=e,Dr=n||Dr,mt=t||mt}function di(e){return(e&4294967168)===0?1:(e&4294965248)===0?2:(e&4294901760)===0?3:4}function lu(e){for(var n=0,t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){if(t+1<e.length){var o=e.charCodeAt(t+1);(o&64512)===56320&&(t++,n+=di(((r&1023)<<10)+(o&1023)+65536))}}else n+=di(r)}return n}function _a(e,n,t){var r=di(t);switch(r){case 1:e[n]=t;break;case 2:e[n]=t>>6&31|192,e[n+1]=t&63|128;break;case 3:e[n]=t>>12&15|224,e[n+1]=t>>6&63|128,e[n+2]=t&63|128;break;default:e[n]=t>>18&7|240,e[n+1]=t>>12&63|128,e[n+2]=t>>6&63|128,e[n+3]=t&63|128;break}return r}function uu(e,n,t){for(var r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){if(r+1<t.length){var l=t.charCodeAt(r+1);if((l&64512)===56320){r++;var s=((o&1023)<<10)+(l&1023)+65536;n+=_a(e,n,s)}}}else n+=_a(e,n,o)}return n}function Eo(e){if(e.length>1e3&&typeof TextEncoder<"u")return new TextEncoder().encode(e);var n=new Uint8Array(lu(e));return uu(n,0,e),n}function ot(e,n){if(n>=e.length)throw Error("Invalid byte index");var t=e[n];if((t&192)===128)return t&63;throw Error("Invalid continuation byte")}function Oo(e){if(e.byteLength>1e3&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var n=[],t=0;t<e.length;){var r=e[t++],o=void 0;if((r&128)===0)o=r;else if((r&224)===192){var l=ot(e,t++);if(o=(r&31)<<6|l,o<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var l=ot(e,t++),s=ot(e,t++);if(o=(r&15)<<12|l<<6|s,o<2048)throw Error("Invalid continuation byte");if(o>=55296&&o<=57343)throw Error("Lone surrogate U+".concat(o.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var l=ot(e,t++),s=ot(e,t++),u=ot(e,t++);if(o=(r&15)<<18|l<<12|s<<6|u,o<65536||o>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");o>65535&&(o-=65536,n.push(String.fromCharCode(o>>>10&1023|55296)),o=56320|o&1023),n.push(String.fromCharCode(o))}return n.join("")}var Mn=function(){return Mn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mn.apply(this,arguments)},cu=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]]);return t};function fu(e){var n={};return Object.keys(e).forEach(function(t){return n[e[t]]=t}),n}var Ut={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},dr=fu(Ut);function N(e,n){return{name:e,classID:n}}var ge=N("","null"),Lo={strokeStyleContent:N("","solidColorLayer"),printProofSetup:N("Proof Setup","proofSetup"),Grad:N("Gradient","Grdn"),Trnf:N("Transform","Trnf"),patternFill:N("","patternFill"),ebbl:N("","ebbl"),SoFi:N("","SoFi"),GrFl:N("","GrFl"),sdwC:N("","RGBC"),hglC:N("","RGBC"),"Clr ":N("","RGBC"),tintColor:N("","RGBC"),Ofst:N("","Pnt "),ChFX:N("","ChFX"),MpgS:N("","ShpC"),DrSh:N("","DrSh"),IrSh:N("","IrSh"),OrGl:N("","OrGl"),IrGl:N("","IrGl"),TrnS:N("","ShpC"),Ptrn:N("","Ptrn"),FrFX:N("","FrFX"),phase:N("","Pnt "),frameStep:ge,duration:ge,workInTime:ge,workOutTime:ge,audioClipGroupList:ge,bounds:N("","Rctn"),customEnvelopeWarp:N("","customEnvelopeWarp"),warp:N("","warp"),"Sz  ":N("","Pnt "),origin:N("","Pnt "),autoExpandOffset:N("","Pnt "),keyOriginShapeBBox:N("","unitRect"),Vrsn:ge,psVersion:ge,docDefaultNewArtboardBackgroundColor:N("","RGBC"),artboardRect:N("","classFloatRect"),keyOriginRRectRadii:N("","radii"),keyOriginBoxCorners:ge,rectangleCornerA:N("","Pnt "),rectangleCornerB:N("","Pnt "),rectangleCornerC:N("","Pnt "),rectangleCornerD:N("","Pnt "),compInfo:ge,quiltWarp:N("","quiltWarp"),generatorSettings:ge,crema:ge,FrIn:ge,blendOptions:ge,FXRf:ge,Lefx:ge,time:ge,animKey:ge,timeScope:ge,inTime:ge,outTime:ge,sheetStyle:ge,translation:ge,Skew:ge,boundingBox:N("","boundingBox"),"Lnk ":N("","ExternalFileLink"),frameReader:N("","FrameReader"),effectParams:N("","motionTrackEffectParams"),Impr:N("None","none"),Anch:N("","Pnt "),"Fwd ":N("","Pnt "),"Bwd ":N("","Pnt "),FlrC:N("","Pnt "),meshBoundaryPath:N("","pathClass"),filterFX:N("","filterFXStyle"),Fltr:N("","rigidTransform"),FrgC:N("","RGBC"),BckC:N("","RGBC"),sdwM:N("Parameters","adaptCorrectTones"),hglM:N("Parameters","adaptCorrectTones"),customShape:N("","customShape"),origFXRefPoint:ge,FXRefPoint:ge,ClMg:N("","ClMg")},Mo={"Crv ":N("","CrPt"),Clrs:N("","Clrt"),Trns:N("","TrnS"),keyDescriptorList:ge,solidFillMulti:N("","SoFi"),gradientFillMulti:N("","GrFl"),dropShadowMulti:N("","DrSh"),innerShadowMulti:N("","IrSh"),frameFXMulti:N("","FrFX"),FrIn:ge,FSts:ge,LaSt:ge,sheetTimelineOptions:ge,trackList:N("","animationTrack"),globalTrackList:N("","animationTrack"),keyList:ge,audioClipGroupList:ge,audioClipList:ge,countObjectList:N("","countObject"),countGroupList:N("","countGroup"),slices:N("","slice"),"Pts ":N("","Pthp"),SbpL:N("","SbpL"),pathComponents:N("","PaCm"),filterFXList:N("","filterFX"),puppetShapeList:N("","puppetShape"),channelDenoise:N("","channelDenoiseParams"),ShrP:N("","Pnt "),layerSettings:ge,list:ge,Adjs:N("","CrvA")},Fa={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},du=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],To={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},Ar={};for(var Qr=0,wa=Object.keys(Fa);Qr<wa.length;Qr++)for(var ka=wa[Qr],$r=0,xa=Fa[ka];$r<xa.length;$r++){var gt=xa[$r];Ar[gt]=ka}for(var ei=0,Ia=Object.keys(Lo);ei<Ia.length;ei++){var gt=Ia[ei];Ar[gt]||(Ar[gt]="Objc")}for(var ni=0,Ca=Object.keys(Mo);ni<Ca.length;ni++){var gt=Ca[ni];To[gt]="Objc"}function hu(e,n,t,r){return e==="presetKind"?typeof n=="string"?"enum":"long":e==="null"&&t==="slices"?"TEXT":e==="groupID"?t==="slices"?"long":"TEXT":e==="Sz  "?"Wdth"in n?"Objc":"units"in n?"UntF":"doub":e==="Type"?typeof n=="string"?"enum":"long":e==="AntA"?typeof n=="string"?"enum":"bool":(e==="Hrzn"||e==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":e==="Hrzn"||e==="Vrtc"||e==="Top "||e==="Left"||e==="Btom"||e==="Rght"?t==="slices"?"long":typeof n=="number"?"doub":"UntF":e==="Vrsn"?typeof n=="number"?"long":"Objc":e==="Rd  "||e==="Grn "||e==="Bl  "?t==="artd"?"long":"doub":e==="Trnf"?Array.isArray(n)?"VlLs":"Objc":Ar[e]}function Tn(e){var n=X(e);return xi(e,n||4)}function Rn(e,n){if(n.length===4&&n!=="warp"&&n!=="time"&&n!=="hold"&&n!=="list")Q(e,0),ee(e,n);else{Q(e,n.length);for(var t=0;t<n.length;t++)B(e,n.charCodeAt(t))}}function Ro(e,n){for(var t=nt(e),r=n?{_name:t.name,_classID:t.classID}:{},o=E(e),l=0;l<o;l++){var s=Tn(e),u=Ce(e),c=zo(e,u,n);r[s]=c}return r}function Bo(e,n,t,r,o){tt(e,n),Rn(e,t);var l=Object.keys(r),s=l.length;"_name"in r&&s--,"_classID"in r&&s--,U(e,s);for(var u=0,c=l;u<c.length;u++){var d=c[u];if(!(d==="_name"||d==="_classID")){var h=hu(d,r[d],o,r),y=Lo[d];d==="bounds"&&o==="text"?y=N("","bounds"):d==="origin"?h=o==="slices"?"enum":"Objc":(d==="Cyn "||d==="Mgnt"||d==="Ylw "||d==="Blck")&&r._classID==="CMYC"?h="doub":/^PN[a-z][a-z]$/.test(d)?h="TEXT":/^PT[a-z][a-z]$/.test(d)?h="long":/^PF[a-z][a-z]$/.test(d)||(d==="Rds "||d==="Thsh")&&typeof r[d]=="number"&&r._classID==="SmrB"?h="doub":d==="ClSz"||d==="Rds "||d==="Amnt"?h=typeof r[d]=="number"?"long":"UntF":(d==="sdwM"||d==="hglM")&&typeof r[d]=="string"||d==="blur"&&typeof r[d]=="string"?h="enum":d==="Hght"&&typeof r[d]=="number"&&r._classID==="Embs"||d==="Angl"&&typeof r[d]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?h="long":d==="Angl"&&typeof r[d]=="number"?h="doub":d==="bounds"&&o==="slices"?(h="Objc",y=N("","Rct1")):d==="Scl "?typeof r[d]=="object"&&"Hrzn"in r[d]?(h="Objc",y=ge):typeof r[d]=="number"?h="long":h="UntF":d==="audioClipGroupList"&&l.length===1?h="VlLs":(d==="Strt"||d==="Brgh")&&"H   "in r?h="doub":d==="Wdth"&&typeof r[d]=="object"?h="UntF":d==="Ofst"&&typeof r[d]=="number"?h="long":d==="Strt"&&typeof r[d]=="object"?(h="Objc",y=ge):du.indexOf(d)!==-1?h=t==="RGBC"&&o!=="artd"?"doub":"long":d==="profile"?h=t==="printOutput"?"TEXT":"tdta":d==="strokeStyleContent"?r[d]["Clr "]?y=N("","solidColorLayer"):r[d].Grad?y=N("","gradientLayer"):r[d].Ptrn&&(y=N("","patternLayer")):d==="bounds"&&o==="quiltWarp"&&(y=N("","classFloatRect")),y&&y.classID==="RGBC"&&"H   "in r[d]&&(y={classID:"HSBC",name:""}),Rn(e,d),ee(e,h||"long"),Uo(e,h||"long",r[d],d,y,o)}}}function zo(e,n,t){switch(n){case"obj ":return vu(e);case"Objc":case"GlbO":return Ro(e,t);case"VlLs":{for(var r=X(e),o=[],l=0;l<r;l++){var s=Ce(e);o.push(zo(e,s,t))}return o}case"doub":return pn(e);case"UntF":{var u=Ce(e),c=pn(e);if(!Ut[u])throw new Error("Invalid units: ".concat(u));return{units:Ut[u],value:c}}case"UnFl":{var u=Ce(e),c=yn(e);if(!Ut[u])throw new Error("Invalid units: ".concat(u));return{units:Ut[u],value:c}}case"TEXT":return Be(e);case"enum":{var d=Tn(e),c=Tn(e);return"".concat(d,".").concat(c)}case"long":return X(e);case"comp":{var h=E(e),y=E(e);return{low:h,high:y}}case"bool":return!!G(e);case"type":case"GlbC":return nt(e);case"alis":{var b=X(e);return xi(e,b)}case"tdta":{var _=X(e);return ze(e,_)}case"ObAr":{X(e),Be(e),Tn(e);for(var F=X(e),o=[],l=0;l<F;l++){var S=Tn(e);Ce(e),Ce(e);for(var P=X(e),x=[],I=0;I<P;I++)x.push(pn(e));o.push({type:S,values:x})}return o}case"Pth ":{X(e);var C=Ce(e);eo(e);var M=eo(e),z=Cu(e,M);return{sig:C,path:z}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(n," at ").concat(e.offset.toString(16)))}}var pu={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function Uo(e,n,t,r,o,l){switch(n){case"obj ":mu(e,r,t);break;case"Objc":case"GlbO":{if(typeof t!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(t),", key: ").concat(r));if(!o)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(t),")"));var s=t._name||o.name,u=t._classID||o.classID;Bo(e,s,u,t,l);break}case"VlLs":if(!Array.isArray(t))throw new Error("Invalid list value: ".concat(JSON.stringify(t),", key: ").concat(r));Q(e,t.length);for(var c=0;c<t.length;c++){var d=To[r];ee(e,d||"long"),Uo(e,d||"long",t[c],"".concat(r,"[]"),Mo[r],l)}break;case"doub":if(typeof t!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(t),", key: ").concat(r));vn(e,t);break;case"UntF":if(!dr[t.units])throw new Error("Invalid units: ".concat(t.units," in ").concat(r));ee(e,dr[t.units]),vn(e,t.value);break;case"UnFl":if(!dr[t.units])throw new Error("Invalid units: ".concat(t.units," in ").concat(r));ee(e,dr[t.units]),bn(e,t.value);break;case"TEXT":tt(e,t);break;case"enum":{if(typeof t!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(t),", key: ").concat(r));var h=t.split("."),y=h[0],b=h[1];Rn(e,y),Rn(e,b);break}case"long":if(typeof t!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(t),", key: ").concat(r));Q(e,t);break;case"bool":if(typeof t!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(t),", key: ").concat(r));B(e,t?1:0);break;case"tdta":Q(e,t.byteLength),wn(e,t);break;case"ObAr":{Q(e,16),tt(e,"");var _=pu[r];if(!_)throw new Error("Not implemented ObArType for: ".concat(r));Rn(e,_),Q(e,t.length);for(var c=0;c<t.length;c++){Rn(e,t[c].type),ee(e,"UnFl"),ee(e,"#Pxl"),Q(e,t[c].values.length);for(var F=0;F<t[c].values.length;F++)vn(e,t[c].values[F])}break}case"Pth ":{var S=12+t.path.length*2;Q(e,S),ee(e,t.sig),yo(e,S),yo(e,t.path.length),fc(e,t.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(n))}}function vu(e){for(var n=X(e),t=[],r=0;r<n;r++){var o=Ce(e);switch(o){case"prop":{nt(e);var l=Tn(e);t.push(l);break}case"Clss":t.push(nt(e));break;case"Enmr":{nt(e);var s=Tn(e),u=Tn(e);t.push("".concat(s,".").concat(u));break}case"rele":{nt(e),t.push(E(e));break}case"Idnt":t.push(X(e));break;case"indx":t.push(X(e));break;case"name":{nt(e),t.push(Be(e));break}default:throw new Error("Invalid descriptor reference type: ".concat(o))}}return t}function mu(e,n,t){Q(e,t.length);for(var r=0;r<t.length;r++){var o=t[r],l="unknown";switch(typeof o=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(o)?l="Enmr":l="name"),ee(e,l),l){case"Enmr":{var s=o.split("."),u=s[0],c=s[1];Da(e,"\0",u),Rn(e,u),Rn(e,c);break}case"name":{Da(e,"\0","Lyr "),sn(e,o+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(l))}}return t}function nt(e){var n=Be(e),t=Tn(e);return{name:n,classID:t}}function Da(e,n,t){sn(e,n),Rn(e,t)}function he(e,n){n===void 0&&(n=!1);var t=E(e);if(t!==16)throw new Error("Invalid descriptor version: ".concat(t));var r=Ro(e,n);return r}function ve(e,n,t,r,o){o===void 0&&(o=""),U(e,16),Bo(e,n,t,r,o)}function Gt(e){return{x:e.Hrzn,y:e.Vrtc}}function Vt(e){return{Hrzn:e.x,Vrtc:e.y}}function Aa(e){return{top:xe(e["Top "]),left:xe(e.Left),right:xe(e.Rght),bottom:xe(e.Btom)}}function Pa(e){var n;return n={Left:Ee(e.left,"bounds.left")},n["Top "]=Ee(e.top,"bounds.top"),n.Rght=Ee(e.right,"bounds.right"),n.Btom=Ee(e.bottom,"bounds.bottom"),n}function Ea(e){var n={enabled:!!e.enab,position:Rr.decode(e.Styl),fillType:ns.decode(e.PntT),blendMode:Je.decode(e["Md  "]),opacity:se(e.Opct),size:xe(e["Sz  "])};return e.present!==void 0&&(n.present=e.present),e.showInDialog!==void 0&&(n.showInDialog=e.showInDialog),e.overprint!==void 0&&(n.overprint=e.overprint),e["Clr "]&&(n.color=Sn(e["Clr "])),e.Grad&&(n.gradient=Ho(e)),e.Ptrn&&(n.pattern=Wo(e)),n}function Oa(e){var n={};return n.enab=!!e.enabled,e.present!==void 0&&(n.present=!!e.present),e.showInDialog!==void 0&&(n.showInDialog=!!e.showInDialog),n.Styl=Rr.encode(e.position),n.PntT=ns.encode(e.fillType),n["Md  "]=Je.encode(e.blendMode),n.Opct=Ge(e.opacity),n["Sz  "]=Ee(e.size,"size"),e.color&&(n["Clr "]=_n(e.color)),e.gradient&&(n=Mn(Mn({},n),Xo(e.gradient))),e.pattern&&(n=Mn(Mn({},n),Zo(e.pattern))),e.overprint!==void 0&&(n.overprint=!!e.overprint),n}function Kt(e,n,t){for(var r,o,l,s=t?{"Scl ":hn((r=e.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":hn((o=e.scale)!==null&&o!==void 0?o:1)},u=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],c=0,d=u;c<d.length;c++){var h=d[c];if(e[h]&&!Array.isArray(e[h]))throw new Error("".concat(h," should be an array"))}var y=function(C){return!!C&&C.length>1&&t},b=function(C){return!!C&&C.length>=1&&(!t||C.length===1)};if(b(e.dropShadow)&&(s.DrSh=tn(e.dropShadow[0],"dropShadow",n)),y(e.dropShadow)&&(s.dropShadowMulti=e.dropShadow.map(function(C){return tn(C,"dropShadow",n)})),b(e.innerShadow)&&(s.IrSh=tn(e.innerShadow[0],"innerShadow",n)),y(e.innerShadow)&&(s.innerShadowMulti=e.innerShadow.map(function(C){return tn(C,"innerShadow",n)})),e.outerGlow&&(s.OrGl=tn(e.outerGlow,"outerGlow",n)),y(e.solidFill)&&(s.solidFillMulti=e.solidFill.map(function(C){return tn(C,"solidFill",n)})),y(e.gradientOverlay)&&(s.gradientFillMulti=e.gradientOverlay.map(function(C){return tn(C,"gradientOverlay",n)})),y(e.stroke)&&(s.frameFXMulti=e.stroke.map(function(C){return Oa(C)})),e.innerGlow&&(s.IrGl=tn(e.innerGlow,"innerGlow",n)),e.bevel&&(s.ebbl=tn(e.bevel,"bevel",n)),b(e.solidFill)&&(s.SoFi=tn(e.solidFill[0],"solidFill",n)),e.patternOverlay&&(s.patternFill=tn(e.patternOverlay,"patternOverlay",n)),b(e.gradientOverlay)&&(s.GrFl=tn(e.gradientOverlay[0],"gradientOverlay",n)),e.satin&&(s.ChFX=tn(e.satin,"satin",n)),b(e.stroke)&&(s.FrFX=Oa((l=e.stroke)===null||l===void 0?void 0:l[0])),t){s.numModifyingFX=0;for(var _=0,F=Object.keys(e);_<F.length;_++){var h=F[_],S=e[h];if(Array.isArray(S))for(var P=0,x=S;P<x.length;P++){var I=x[P];I.enabled&&s.numModifyingFX++}else S.enabled&&s.numModifyingFX++}}return s}function qt(e,n){var t={},r=e.masterFXSwitch,o=e.DrSh,l=e.dropShadowMulti,s=e.IrSh,u=e.innerShadowMulti,c=e.OrGl,d=e.IrGl,h=e.ebbl,y=e.SoFi,b=e.solidFillMulti,_=e.patternFill,F=e.GrFl,S=e.gradientFillMulti,P=e.ChFX,x=e.FrFX,I=e.frameFXMulti;e.numModifyingFX;var C=cu(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(t.disabled=!0),e["Scl "]&&(t.scale=se(e["Scl "])),o&&(t.dropShadow=[nn(o,n)]),l&&(t.dropShadow=l.map(function(M){return nn(M,n)})),s&&(t.innerShadow=[nn(s,n)]),u&&(t.innerShadow=u.map(function(M){return nn(M,n)})),c&&(t.outerGlow=nn(c,n)),d&&(t.innerGlow=nn(d,n)),h&&(t.bevel=nn(h,n)),y&&(t.solidFill=[nn(y,n)]),b&&(t.solidFill=b.map(function(M){return nn(M,n)})),_&&(t.patternOverlay=nn(_,n)),F&&(t.gradientOverlay=[nn(F,n)]),S&&(t.gradientOverlay=S.map(function(M){return nn(M,n)})),P&&(t.satin=nn(P,n)),x&&(t.stroke=[Ea(x)]),I&&(t.stroke=I.map(function(M){return Ea(M)})),n&&Object.keys(C).length>1&&console.log("Unhandled effect keys:",C),t}function La(e,n){for(var t=[],r=0;r<e.length;r++){var o=e[r],l=o.time,s=l.denominator,u=l.numerator,c=o.selected,d=o.animKey,h={numerator:u,denominator:s},y=$o.decode(o.animInterpStyle);switch(d.Type){case"keyType.Opct":t.push({interpolation:y,time:h,selected:c,type:"opacity",value:se(d.Opct)});break;case"keyType.Pstn":t.push({interpolation:y,time:h,selected:c,type:"position",x:d.Hrzn,y:d.Vrtc});break;case"keyType.Trnf":t.push({interpolation:y,time:h,selected:c,type:"transform",scale:Gt(d["Scl "]),skew:Gt(d.Skew),rotation:d.rotation,translation:Gt(d.translation)});break;case"keyType.sheetStyle":{var b={interpolation:y,time:h,selected:c,type:"style"};d.sheetStyle.Lefx&&(b.style=qt(d.sheetStyle.Lefx,n)),t.push(b);break}case"keyType.globalLighting":{t.push({interpolation:y,time:h,selected:c,type:"globalLighting",globalAngle:d.gblA,globalAltitude:d.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return t}function Ma(e){for(var n=[],t=0;t<e.length;t++){var r=e[t],o=r.time,l=r.selected,s=l===void 0?!1:l,u=r.interpolation,c=$o.encode(u),d=void 0;switch(r.type){case"opacity":d={Type:"keyType.Opct",Opct:Ge(r.value)};break;case"position":d={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":d={Type:"keyType.Trnf","Scl ":Vt(r.scale),Skew:Vt(r.skew),rotation:r.rotation,translation:Vt(r.translation)};break;case"style":d={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(d.sheetStyle={Vrsn:1,Lefx:Kt(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{d={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}n.push({Vrsn:1,animInterpStyle:c,time:o,animKey:d,selected:s})}return n}function No(e,n){for(var t=[],r=0;r<e.length;r++){var o=e[r],l={type:es.decode(o.trackID),enabled:o.enab,keys:La(o.keyList,n)};o.effectParams&&(l.effectParams={fillCanvas:o.effectParams.fillCanvas,zoomOrigin:o.effectParams.zoomOrigin,keys:La(o.effectParams.keyList,n)}),t.push(l)}return t}function Go(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(Mn(Mn({trackID:es.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:Ma(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:Ma(r.keys)}))}return n}function nn(e,n){for(var t={},r=0,o=Object.keys(e);r<o.length;r++){var l=o[r],s=e[l];switch(l){case"enab":t.enabled=!!s;break;case"uglg":t.useGlobalLight=!!s;break;case"AntA":t.antialiased=!!s;break;case"Algn":t.align=!!s;break;case"Dthr":t.dither=!!s;break;case"Invr":t.invert=!!s;break;case"Rvrs":t.reverse=!!s;break;case"Clr ":t.color=Sn(s);break;case"hglC":t.highlightColor=Sn(s);break;case"sdwC":t.shadowColor=Sn(s);break;case"Styl":t.position=Rr.decode(s);break;case"Md  ":t.blendMode=Je.decode(s);break;case"hglM":t.highlightBlendMode=Je.decode(s);break;case"sdwM":t.shadowBlendMode=Je.decode(s);break;case"bvlS":t.style=Yo.decode(s);break;case"bvlD":t.direction=qo.decode(s);break;case"bvlT":t.technique=Ko.decode(s);break;case"GlwT":t.technique=Jo.decode(s);break;case"glwS":t.source=Qo.decode(s);break;case"Type":t.type=Tr.decode(s);break;case"gs99":t.interpolationMethod=yt.decode(s);break;case"Opct":t.opacity=se(s);break;case"hglO":t.highlightOpacity=se(s);break;case"sdwO":t.shadowOpacity=se(s);break;case"lagl":t.angle=jt(s);break;case"Angl":t.angle=jt(s);break;case"Lald":t.altitude=jt(s);break;case"Sftn":t.soften=xe(s);break;case"srgR":t.strength=se(s);break;case"blur":t.size=xe(s);break;case"Nose":t.noise=se(s);break;case"Inpr":t.range=se(s);break;case"Ckmt":t.choke=xe(s);break;case"ShdN":t.jitter=se(s);break;case"Dstn":t.distance=xe(s);break;case"Scl ":t.scale=se(s);break;case"Ptrn":t.pattern={name:s["Nm  "],id:s.Idnt};break;case"phase":t.phase={x:s.Hrzn,y:s.Vrtc};break;case"Ofst":t.offset={x:se(s.Hrzn),y:se(s.Vrtc)};break;case"MpgS":case"TrnS":t.contour={name:s["Nm  "],curve:s["Crv "].map(function(u){return{x:u.Hrzn,y:u.Vrtc}})};break;case"Grad":t.gradient=Vo(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":t[l]=s;break;case"_name":case"_classID":break;default:n&&console.log("Invalid effect key: '".concat(l,"', value:"),s)}}return t}function tn(e,n,t){for(var r={},o=0,l=Object.keys(e);o<l.length;o++){var s=l[o],u=s,c=e[u];switch(u){case"enabled":r.enab=!!c;break;case"useGlobalLight":r.uglg=!!c;break;case"antialiased":r.AntA=!!c;break;case"align":r.Algn=!!c;break;case"dither":r.Dthr=!!c;break;case"invert":r.Invr=!!c;break;case"reverse":r.Rvrs=!!c;break;case"color":r["Clr "]=_n(c);break;case"highlightColor":r.hglC=_n(c);break;case"shadowColor":r.sdwC=_n(c);break;case"position":r.Styl=Rr.encode(c);break;case"blendMode":r["Md  "]=Je.encode(c);break;case"highlightBlendMode":r.hglM=Je.encode(c);break;case"shadowBlendMode":r.sdwM=Je.encode(c);break;case"style":r.bvlS=Yo.encode(c);break;case"direction":r.bvlD=qo.encode(c);break;case"technique":n==="bevel"?r.bvlT=Ko.encode(c):r.GlwT=Jo.encode(c);break;case"source":r.glwS=Qo.encode(c);break;case"type":r.Type=Tr.encode(c);break;case"interpolationMethod":r.gs99=yt.encode(c);break;case"opacity":r.Opct=Ge(c);break;case"highlightOpacity":r.hglO=Ge(c);break;case"shadowOpacity":r.sdwO=Ge(c);break;case"angle":n==="gradientOverlay"||n==="patternFill"?r.Angl=Ht(c):r.lagl=Ht(c);break;case"altitude":r.Lald=Ht(c);break;case"soften":r.Sftn=Ee(c,u);break;case"strength":r.srgR=Ge(c);break;case"size":r.blur=Ee(c,u);break;case"noise":r.Nose=Ge(c);break;case"range":r.Inpr=Ge(c);break;case"choke":r.Ckmt=Ee(c,u);break;case"jitter":r.ShdN=Ge(c);break;case"distance":r.Dstn=Ee(c,u);break;case"scale":r["Scl "]=Ge(c);break;case"pattern":r.Ptrn={"Nm  ":c.name,Idnt:c.id};break;case"phase":r.phase={Hrzn:c.x,Vrtc:c.y};break;case"offset":r.Ofst={Hrzn:Ge(c.x),Vrtc:Ge(c.y)};break;case"contour":{r[n==="satin"?"MpgS":"TrnS"]={"Nm  ":c.name,"Crv ":c.curve.map(function(d){return{Hrzn:d.x,Vrtc:d.y}})};break}case"gradient":r.Grad=jo(c);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[u]=c;break;default:t&&console.log("Invalid effect key: '".concat(u,"', value:"),c)}}return r}function Vo(e){if(e.GrdF==="GrdF.CstS"){var n=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(t){return{color:Sn(t["Clr "]),location:t.Lctn/n,midpoint:t.Mdpn/100}}),opacityStops:e.Trns.map(function(t){return{opacity:se(t.Opct),location:t.Lctn/n,midpoint:t.Mdpn/100}})}}else return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:Pr.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(t){return t/100}),max:e["Mxm "].map(function(t){return t/100})}}function jo(e){var n,t;if(e.type==="solid"){var r=Math.round(((n=e.smoothness)!==null&&n!==void 0?n:1)*4096);return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:e.colorStops.map(function(o){var l;return{"Clr ":_n(o.color),Type:"Clry.UsrS",Lctn:Math.round(o.location*r),Mdpn:Math.round(((l=o.midpoint)!==null&&l!==void 0?l:.5)*100)}}),Trns:e.opacityStops.map(function(o){var l;return{Opct:Ge(o.opacity),Lctn:Math.round(o.location*r),Mdpn:Math.round(((l=o.midpoint)!==null&&l!==void 0?l:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:Pr.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(((t=e.roughness)!==null&&t!==void 0?t:1)*4096),"Mnm ":(e.min||[0,0,0,0]).map(function(o){return o*100}),"Mxm ":(e.max||[1,1,1,1]).map(function(o){return o*100})}}function Ho(e){var n=Vo(e.Grad);return n.style=Tr.decode(e.Type),e.Dthr!==void 0&&(n.dither=e.Dthr),e.gradientsInterpolationMethod!==void 0&&(n.interpolationMethod=yt.decode(e.gradientsInterpolationMethod)),e.Rvrs!==void 0&&(n.reverse=e.Rvrs),e.Angl!==void 0&&(n.angle=jt(e.Angl)),e["Scl "]!==void 0&&(n.scale=se(e["Scl "])),e.Algn!==void 0&&(n.align=e.Algn),e.Ofst!==void 0&&(n.offset={x:se(e.Ofst.Hrzn),y:se(e.Ofst.Vrtc)}),n}function Wo(e){var n={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return e.Lnkd!==void 0&&(n.linked=e.Lnkd),e.phase!==void 0&&(n.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),n}function Jt(e){if("Grad"in e)return Ho(e);if("Ptrn"in e)return Mn({type:"pattern"},Wo(e));if("Clr "in e)return{type:"color",color:Sn(e["Clr "])};throw new Error("Invalid vector content")}function Xo(e){var n={};return e.dither!==void 0&&(n.Dthr=e.dither),e.interpolationMethod!==void 0&&(n.gradientsInterpolationMethod=yt.encode(e.interpolationMethod)),e.reverse!==void 0&&(n.Rvrs=e.reverse),e.angle!==void 0&&(n.Angl=Ht(e.angle)),n.Type=Tr.encode(e.style),e.align!==void 0&&(n.Algn=e.align),e.scale!==void 0&&(n["Scl "]=Ge(e.scale)),e.offset&&(n.Ofst={Hrzn:Ge(e.offset.x),Vrtc:Ge(e.offset.y)}),n.Grad=jo(e),n}function Zo(e){var n={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return e.linked!==void 0&&(n.Lnkd=!!e.linked),e.phase!==void 0&&(n.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),n}function Qt(e){return e.type==="color"?{key:"SoCo",descriptor:{"Clr ":_n(e.color)}}:e.type==="pattern"?{key:"PtFl",descriptor:Zo(e)}:{key:"GdFl",descriptor:Xo(e)}}function Sn(e){if("H   "in e)return{h:gu(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}function _n(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":Ht(e.h*360),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function jt(e){if(e===void 0)return 0;if(e.units!=="Angle")throw new Error("Invalid units: ".concat(e.units));return e.value}function se(e){if(e===void 0)return 1;if(e.units!=="Percent")throw new Error("Invalid units: ".concat(e.units));return e.value/100}function gu(e){if(e===void 0)return 1;if(e.units==="Percent")return e.value/100;if(e.units==="Angle")return e.value/360;throw new Error("Invalid units: ".concat(e.units))}function xe(e){var n=e.units,t=e.value;if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:n,value:t})));return{value:t,units:n}}function jn(e,n){return n===void 0&&(n="Pixels"),typeof e=="number"?{value:e,units:n}:xe(e)}function yu(e,n){var t=e.units,r=e.value;if(t!==n)throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:r})));return r}function Ht(e){return{units:"Angle",value:e||0}}function Ge(e){return{units:"Percent",value:Math.round((e||0)*100)}}function hn(e){return{units:"Percent",value:(e||0)*100}}function Ee(e,n){if(e==null)return{units:"Pixels",value:0};if(typeof e!="object")throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(n,") (should have value and units)"));var t=e.units,r=e.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(n,")"));if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters"&&t!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(n,")"));return{units:t,value:r}}function qe(e){var n=e.numerator,t=e.denominator;return{numerator:n,denominator:t}}var Ta=ne("textGridding","none",{none:"None",round:"Rnd "}),Wt=ne("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),Ra=ne("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),_i=ne("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),Je=ne("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),Yo=ne("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),Ko=ne("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),qo=ne("BESs","up",{up:"In  ",down:"Out "}),Jo=ne("BETE","softer",{softer:"SfBL",precise:"PrBL"}),Qo=ne("IGSr","edge",{edge:"SrcE",center:"SrcC"}),Tr=ne("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),$o=ne("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),es=ne("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),yt=ne("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),Pr=ne("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),Rr=ne("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),ns=ne("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),Ba=ne("ESliceType","image",{image:"Img ",noImage:"noImage"}),za=ne("ESliceHorzAlign","default",{default:"default"}),Ua=ne("ESliceVertAlign","default",{default:"default"}),Na=ne("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),Ga=ne("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),Va=ne("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),ja=ne("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),Ha=ne("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),ts=ne("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),rs=ne("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),is=ne("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),as=ne("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),os=ne("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),pt=ne("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),ss=ne("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),ls=ne("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),us=ne("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),cs=ne("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),fs=ne("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),ds=ne("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),Xt=ne("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),hs=ne("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),ps=ne("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),vs=ne("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),ms=ne("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),gs=ne("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),ys=ne("ExtR","random",{random:"Rndm","level-based":"LvlB"}),bs=ne("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),Ss=ne("CntE","upper",{lower:"Lwr ",upper:"Upr "}),_s=ne("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),Fs=ne("Drct","from the right",{left:"Left",right:"Rght"}),ws=ne("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),ks=ne("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),xs=ne("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});ne("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});var Is=ne("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"}),ft=function(){return ft=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ft.apply(this,arguments)},Cs=[],Ds={};function Fe(e,n,t,r){var o={key:e,has:n,read:t,write:r};Cs.push(o),Ds[o.key]=o}var hr=[void 0,"PPI","PPCM"],pr=[void 0,"Inches","Centimeters","Points","Picas","Columns"],Wa="0123456789abcdef";function Xa(e){return e<=57?e-48:e-87}function bu(e,n){return Xa(e.charCodeAt(n))<<4|Xa(e.charCodeAt(n+1))}function Fi(e,n){var t=ze(e,n);return Oo(t)}function wi(e,n){var t=Eo(n);wn(e,t)}function Su(e){for(var n=G(e),t=ze(e,n),r=!1,o=0;o<t.byteLength;o++)if(t[o]&128){r=!0;break}if(r){var l=new TextDecoder("gbk");return l.decode(t)}else return Oo(t)}function _u(e,n){for(var t="",r=0,o=n.codePointAt(r++);o!==void 0;o=n.codePointAt(r++))t+=o>127?"?":String.fromCodePoint(o);var l=Eo(t);B(e,l.byteLength),wn(e,l)}Fe(1061,function(e){return e.captionDigest!==void 0},function(e,n){for(var t="",r=0;r<16;r++){var o=G(e);t+=Wa[o>>4],t+=Wa[o&15]}n.captionDigest=t},function(e,n){for(var t=0;t<16;t++)B(e,bu(n.captionDigest,t*2))});Fe(1060,function(e){return e.xmpMetadata!==void 0},function(e,n,t){n.xmpMetadata=Fi(e,t())},function(e,n){wi(e,n.xmpMetadata)});var vr=ne("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});Fe(1082,function(e){return e.printInformation!==void 0},function(e,n){var t,r,o=he(e);n.printInformation={printerName:o.printerName||"",renderingIntent:vr.decode((t=o.Inte)!==null&&t!==void 0?t:"Inte.Img ")};var l=n.printInformation;o.PstS!==void 0&&(l.printerManagesColors=o.PstS),o["Nm  "]!==void 0&&(l.printerProfile=o["Nm  "]),o.MpBl!==void 0&&(l.blackPointCompensation=o.MpBl),o.printSixteenBit!==void 0&&(l.printSixteenBit=o.printSixteenBit),o.hardProof!==void 0&&(l.hardProof=o.hardProof),o.printProofSetup&&("Bltn"in o.printProofSetup?l.proofSetup={builtin:o.printProofSetup.Bltn.split(".")[1]}:l.proofSetup={profile:o.printProofSetup.profile,renderingIntent:vr.decode((r=o.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!o.printProofSetup.MpBl,paperWhite:!!o.printProofSetup.paperWhite})},function(e,n){var t,r,o=n.printInformation,l={};o.printerManagesColors?l.PstS=!0:(o.hardProof!==void 0&&(l.hardProof=!!o.hardProof),l.ClrS="ClrS.RGBC",l["Nm  "]=(t=o.printerProfile)!==null&&t!==void 0?t:"CIE RGB"),l.Inte=vr.encode(o.renderingIntent),o.printerManagesColors||(l.MpBl=!!o.blackPointCompensation),l.printSixteenBit=!!o.printSixteenBit,l.printerName=o.printerName||"",o.proofSetup&&"profile"in o.proofSetup?l.printProofSetup={profile:o.proofSetup.profile||"",Inte:vr.encode(o.proofSetup.renderingIntent),MpBl:!!o.proofSetup.blackPointCompensation,paperWhite:!!o.proofSetup.paperWhite}:l.printProofSetup={Bltn:!((r=o.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(o.proofSetup.builtin):"builtinProof.proofCMYK"},ve(e,"","printOutput",l)});Fe(1005,function(e){return e.resolutionInfo!==void 0},function(e,n){var t=rn(e),r=R(e),o=R(e),l=rn(e),s=R(e),u=R(e);n.resolutionInfo={horizontalResolution:t,horizontalResolutionUnit:hr[r]||"PPI",widthUnit:pr[o]||"Inches",verticalResolution:l,verticalResolutionUnit:hr[s]||"PPI",heightUnit:pr[u]||"Inches"}},function(e,n){var t=n.resolutionInfo;on(e,t.horizontalResolution||0),O(e,Math.max(1,hr.indexOf(t.horizontalResolutionUnit))),O(e,Math.max(1,pr.indexOf(t.widthUnit))),on(e,t.verticalResolution||0),O(e,Math.max(1,hr.indexOf(t.verticalResolutionUnit))),O(e,Math.max(1,pr.indexOf(t.heightUnit)))});var Za=["centered","size to fit","user defined"];Fe(1062,function(e){return e.printScale!==void 0},function(e,n){n.printScale={style:Za[de(e)],x:yn(e),y:yn(e),scale:yn(e)}},function(e,n){var t=n.printScale,r=t.style,o=t.x,l=t.y,s=t.scale;Se(e,Math.max(0,Za.indexOf(r))),bn(e,o||0),bn(e,l||0),bn(e,s||0)});Fe(1006,function(e){return e.alphaChannelNames!==void 0},function(e,n,t){if(n.alphaChannelNames)H(e,t());else for(n.alphaChannelNames=[];t()>0;){var r=Su(e);n.alphaChannelNames.push(r)}},function(e,n){for(var t=0,r=n.alphaChannelNames;t<r.length;t++){var o=r[t];_u(e,o)}});Fe(1045,function(e){return e.alphaChannelNames!==void 0},function(e,n,t){for(n.alphaChannelNames=[];t()>0;)n.alphaChannelNames.push(Be(e))},function(e,n){for(var t=0,r=n.alphaChannelNames;t<r.length;t++){var o=r[t];tt(e,o)}});Fe(1053,function(e){return e.alphaIdentifiers!==void 0},function(e,n,t){for(n.alphaIdentifiers=[];t()>=4;)n.alphaIdentifiers.push(E(e))},function(e,n){for(var t=0,r=n.alphaIdentifiers;t<r.length;t++){var o=r[t];U(e,o)}});Fe(1010,function(e){return e.backgroundColor!==void 0},function(e,n){return n.backgroundColor=Ne(e)},function(e,n){return Ve(e,n.backgroundColor)});Fe(1037,function(e){return e.globalAngle!==void 0},function(e,n){return n.globalAngle=X(e)},function(e,n){return Q(e,n.globalAngle)});Fe(1049,function(e){return e.globalAltitude!==void 0},function(e,n){return n.globalAltitude=E(e)},function(e,n){return U(e,n.globalAltitude)});Fe(1011,function(e){return e.printFlags!==void 0},function(e,n){n.printFlags={labels:!!G(e),cropMarks:!!G(e),colorBars:!!G(e),registrationMarks:!!G(e),negative:!!G(e),flip:!!G(e),interpolate:!!G(e),caption:!!G(e),printFlags:!!G(e)}},function(e,n){var t=n.printFlags;B(e,t.labels?1:0),B(e,t.cropMarks?1:0),B(e,t.colorBars?1:0),B(e,t.registrationMarks?1:0),B(e,t.negative?1:0),B(e,t.flip?1:0),B(e,t.interpolate?1:0),B(e,t.caption?1:0),B(e,t.printFlags?1:0)});Fe(1080,function(e){return e.countInformation!==void 0},function(e,n){var t=he(e);n.countInformation=t.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(o){return{x:o["X   "],y:o["Y   "]}})}})},function(e,n){var t={Vrsn:1,countGroupList:n.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(o){return{"X   ":o.x,"Y   ":o.y}})}})};ve(e,"","Cnt ",t)});Fe(1024,function(e){return e.layerState!==void 0},function(e,n){return n.layerState=R(e)},function(e,n){return O(e,n.layerState)});Fe(1026,function(e){return e.layersGroup!==void 0},function(e,n,t){for(n.layersGroup=[];t()>0;)n.layersGroup.push(R(e))},function(e,n){for(var t=0,r=n.layersGroup;t<r.length;t++){var o=r[t];O(e,o)}});Fe(1072,function(e){return e.layerGroupsEnabledId!==void 0},function(e,n,t){for(n.layerGroupsEnabledId=[];t()>0;)n.layerGroupsEnabledId.push(G(e))},function(e,n){for(var t=0,r=n.layerGroupsEnabledId;t<r.length;t++){var o=r[t];B(e,o)}});Fe(1069,function(e){return e.layerSelectionIds!==void 0},function(e,n){var t=R(e);for(n.layerSelectionIds=[];t--;)n.layerSelectionIds.push(E(e))},function(e,n){O(e,n.layerSelectionIds.length);for(var t=0,r=n.layerSelectionIds;t<r.length;t++){var o=r[t];U(e,o)}});Fe(1032,function(e){return e.gridAndGuidesInformation!==void 0},function(e,n){var t=E(e),r=E(e),o=E(e),l=E(e);if(t!==1)throw new Error("Invalid 1032 resource version: ".concat(t));n.gridAndGuidesInformation={grid:{horizontal:r,vertical:o},guides:[]};for(var s=0;s<l;s++)n.gridAndGuidesInformation.guides.push({location:E(e)/32,direction:G(e)?"horizontal":"vertical"})},function(e,n){var t=n.gridAndGuidesInformation,r=t.grid||{horizontal:576,vertical:576},o=t.guides||[];U(e,1),U(e,r.horizontal),U(e,r.vertical),U(e,o.length);for(var l=0,s=o;l<s.length;l++){var u=s[l];U(e,u.location*32),B(e,u.direction==="horizontal"?1:0)}});Fe(1065,function(e){return e.layerComps!==void 0},function(e,n){var t=he(e,!0);n.layerComps={list:[]};for(var r=0,o=t.list;r<o.length;r++){var l=o[r];n.layerComps.list.push({id:l.compID,name:l["Nm  "],capturedInfo:l.capturedInfo}),"comment"in l&&(n.layerComps.list[n.layerComps.list.length-1].comment=l.comment)}"lastAppliedComp"in t&&(n.layerComps.lastApplied=t.lastAppliedComp)},function(e,n){for(var t=n.layerComps,r={list:[]},o=0,l=t.list;o<l.length;o++){var s=l[o],u={};u._classID="Comp",u["Nm  "]=s.name,"comment"in s&&(u.comment=s.comment),u.compID=s.id,u.capturedInfo=s.capturedInfo,r.list.push(u)}"lastApplied"in t&&(r.lastAppliedComp=t.lastApplied),ve(e,"","CompList",r)});var Ya=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];Fe(1078,function(e){return e.onionSkins!==void 0},function(e,n){var t=he(e);n.onionSkins={enabled:t.enab,framesBefore:t.numBefore,framesAfter:t.numAfter,frameSpacing:t.Spcn,minOpacity:t.minOpacity/100,maxOpacity:t.maxOpacity/100,blendMode:Ya[t.BlnM]||"normal"}},function(e,n){var t=n.onionSkins,r={Vrsn:1,enab:t.enabled,numBefore:t.framesBefore,numAfter:t.framesAfter,Spcn:t.frameSpacing,minOpacity:t.minOpacity*100|0,maxOpacity:t.maxOpacity*100|0,BlnM:Math.max(0,Ya.indexOf(t.blendMode))};ve(e,"","null",r)});Fe(1075,function(e){return e.timelineInformation!==void 0},function(e,n){var t,r,o=he(e);n.timelineInformation={enabled:o.enab,frameStep:qe(o.frameStep),frameRate:o.frameRate,time:qe(o.time),duration:qe(o.duration),workInTime:qe(o.workInTime),workOutTime:qe(o.workOutTime),repeats:o.LCnt,hasMotion:o.hasMotion,globalTracks:No(o.globalTrackList,!!e.logMissingFeatures)},!((r=(t=o.audioClipGroupList)===null||t===void 0?void 0:t.audioClipGroupList)===null||r===void 0)&&r.length&&(n.timelineInformation.audioClipGroups=o.audioClipGroupList.audioClipGroupList.map(function(l){return{id:l.groupID,muted:l.muted,audioClips:l.audioClipList.map(function(s){var u=s.clipID,c=s.timeScope,d=s.muted,h=s.audioLevel,y=s.frameReader;return{id:u,start:qe(c.Strt),duration:qe(c.duration),inTime:qe(c.inTime),outTime:qe(c.outTime),muted:d,audioLevel:h,frameReader:{type:y.frameReaderType,mediaDescriptor:y.mediaDescriptor,link:{name:y["Lnk "]["Nm  "],fullPath:y["Lnk "].fullPath,relativePath:y["Lnk "].relPath}}}})}}))},function(e,n){var t,r=n.timelineInformation,o={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:Go(r.globalTracks),audioClipGroupList:{audioClipGroupList:(t=r.audioClipGroups)===null||t===void 0?void 0:t.map(function(l){return{groupID:l.id,muted:l.muted,audioClipList:l.audioClips.map(function(s){return{clipID:s.id,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},frameReader:{frameReaderType:s.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":s.frameReader.link.name,fullPath:s.frameReader.link.fullPath,relPath:s.frameReader.link.relativePath},mediaDescriptor:s.frameReader.mediaDescriptor},muted:s.muted,audioLevel:s.audioLevel}})}})},hasMotion:r.hasMotion};ve(e,"","null",o,"anim")});Fe(1076,function(e){return e.sheetDisclosure!==void 0},function(e,n){var t=he(e);n.sheetDisclosure={},t.sheetTimelineOptions&&(n.sheetDisclosure.sheetTimelineOptions=t.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(e,n){var t=n.sheetDisclosure,r={Vrsn:1};t.sheetTimelineOptions&&(r.sheetTimelineOptions=t.sheetTimelineOptions.map(function(o){return{Vrsn:2,sheetID:o.sheetID,sheetDisclosed:o.sheetDisclosed,lightsDisclosed:o.lightsDisclosed,meshesDisclosed:o.meshesDisclosed,materialsDisclosed:o.materialsDisclosed}})),ve(e,"","null",r)});Fe(1054,function(e){return e.urlsList!==void 0},function(e,n){var t=E(e);n.urlsList=[];for(var r=0;r<t;r++){var o=Ce(e);if(o!=="slic"&&e.throwForMissingFeatures)throw new Error("Unknown long");var l=E(e),s=Be(e);n.urlsList.push({id:l,url:s,ref:"slice"})}},function(e,n){var t=n.urlsList;U(e,t.length);for(var r=0;r<t.length;r++)ee(e,"slic"),U(e,t[r].id),sn(e,t[r].url)});function Ka(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function qa(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function mr(e,n){return e[Math.max(0,Math.min(e.length-1,n))]}var Ja=["autoGenerated","layer","userGenerated"],Qa=["noImage","image"],gr=["default"];Fe(1050,function(e){return e.slices?e.slices.length:0},function(e,n){var t=E(e);if(t===6){n.slices||(n.slices=[]);var r=X(e),o=X(e),l=X(e),s=X(e),u=Be(e),c=E(e);n.slices.push({bounds:{top:r,left:o,bottom:l,right:s},groupName:u,slices:[]});for(var d=n.slices[n.slices.length-1].slices,h=0;h<c;h++){var y=E(e),b=E(e),_=mr(Ja,E(e)),F=_=="layer"?E(e):0,S=Be(e),P=mr(Qa,E(e)),x=X(e),I=X(e),C=X(e),M=X(e),z=Be(e),$=Be(e),Y=Be(e),Z=Be(e),ae=!!G(e),le=Be(e),Ae=mr(gr,E(e)),Me=mr(gr,E(e)),V=G(e),re=G(e),Pe=G(e),K=G(e),Qe=V+re+Pe+K===0?"none":V===0?"matte":"color";d.push({id:y,groupId:b,origin:_,associatedLayerId:F,name:S,target:$,message:Y,altTag:Z,cellTextIsHTML:ae,cellText:le,horizontalAlignment:Ae,verticalAlignment:Me,type:P,url:z,bounds:{top:I,left:x,bottom:M,right:C},backgroundColorType:Qe,backgroundColor:{r:re,g:Pe,b:K,a:V}})}var Le=he(e);Le.slices.forEach(function(We){var pe=d.find(function(Ye){return We.sliceID==Ye.id});pe&&(pe.topOutset=We.topOutset,pe.leftOutset=We.leftOutset,pe.bottomOutset=We.bottomOutset,pe.rightOutset=We.rightOutset)})}else if(t===7||t===8){var Le=he(e);n.slices||(n.slices=[]),n.slices.push({groupName:Le.baseName,bounds:qa(Le.bounds),slices:Le.slices.map(function(pe){return ft(ft({},pe["Nm  "]?{name:pe["Nm  "]}:{}),{id:pe.sliceID,groupId:pe.groupID,associatedLayerId:0,origin:Na.decode(pe.origin),type:Ba.decode(pe.Type),bounds:qa(pe.bounds),url:pe.url,target:pe.null,message:pe.Msge,altTag:pe.altTag,cellTextIsHTML:pe.cellTextIsHTML,cellText:pe.cellText,horizontalAlignment:za.decode(pe.horzAlign),verticalAlignment:Ua.decode(pe.vertAlign),backgroundColorType:Ga.decode(pe.bgColorType),backgroundColor:pe.bgColor?{r:pe.bgColor["Rd  "],g:pe.bgColor["Grn "],b:pe.bgColor["Bl  "],a:pe.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:pe.topOutset||0,leftOutset:pe.leftOutset||0,bottomOutset:pe.bottomOutset||0,rightOutset:pe.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(t,")"))},function(e,n,t){var r=n.slices[t],o=r.bounds,l=r.groupName,s=r.slices;U(e,6),Q(e,o.top),Q(e,o.left),Q(e,o.bottom),Q(e,o.right),sn(e,l),U(e,s.length);for(var u=0;u<s.length;u++){var c=s[u],d=c.backgroundColor,h=d.a,y=d.r,b=d.g,_=d.b;c.backgroundColorType==="none"?h=y=b=_=0:c.backgroundColorType==="matte"&&(h=0,y=b=_=255),U(e,c.id),U(e,c.groupId),U(e,Ja.indexOf(c.origin)),c.origin==="layer"&&U(e,c.associatedLayerId),sn(e,c.name||""),U(e,Qa.indexOf(c.type)),Q(e,c.bounds.left),Q(e,c.bounds.top),Q(e,c.bounds.right),Q(e,c.bounds.bottom),sn(e,c.url),sn(e,c.target),sn(e,c.message),sn(e,c.altTag),B(e,c.cellTextIsHTML?1:0),sn(e,c.cellText),U(e,gr.indexOf(c.horizontalAlignment)),U(e,gr.indexOf(c.verticalAlignment)),B(e,h),B(e,y),B(e,b),B(e,_)}var F={bounds:Ka(o),slices:[]};s.forEach(function(S){var P=ft(ft({sliceID:S.id,groupID:S.groupId,origin:Na.encode(S.origin),Type:Ba.encode(S.type),bounds:Ka(S.bounds)},S.name?{"Nm  ":S.name}:{}),{url:S.url,null:S.target,Msge:S.message,altTag:S.altTag,cellTextIsHTML:S.cellTextIsHTML,cellText:S.cellText,horzAlign:za.encode(S.horizontalAlignment),vertAlign:Ua.encode(S.verticalAlignment),bgColorType:Ga.encode(S.backgroundColorType)});if(S.backgroundColorType==="color"){var x=S.backgroundColor,I=x.r,C=x.g,M=x.b,z=x.a;P.bgColor={"Rd  ":I,"Grn ":C,"Bl  ":M,alpha:z}}P.topOutset=S.topOutset||0,P.leftOutset=S.leftOutset||0,P.bottomOutset=S.bottomOutset||0,P.rightOutset=S.rightOutset||0,F.slices.push(P)}),ve(e,"","null",F,"slices")});Fe(1064,function(e){return e.pixelAspectRatio!==void 0},function(e,n){if(E(e)>2)throw new Error("Invalid pixelAspectRatio version");n.pixelAspectRatio={aspect:pn(e)}},function(e,n){U(e,2),vn(e,n.pixelAspectRatio.aspect)});Fe(1041,function(e){return e.iccUntaggedProfile!==void 0},function(e,n){n.iccUntaggedProfile=!!G(e)},function(e,n){B(e,n.iccUntaggedProfile?1:0)});Fe(1044,function(e){return e.idsSeedNumber!==void 0},function(e,n){return n.idsSeedNumber=E(e)},function(e,n){return U(e,n.idsSeedNumber)});Fe(1036,function(e){return e.thumbnail!==void 0||e.thumbnailRaw!==void 0},function(e,n,t){var r=E(e),o=E(e),l=E(e);E(e),E(e),E(e);var s=R(e),u=R(e);if(r!==1||s!==24||u!==1){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(s,", planes: ").concat(u,")")),H(e,t());return}var c=t(),d=ze(e,c);e.useRawThumbnail?n.thumbnailRaw={width:o,height:l,data:d}:d.byteLength&&(n.thumbnail=Dr(d))},function(e,n){var t,r=0,o=0,l=new Uint8Array(0);if(n.thumbnailRaw)r=n.thumbnailRaw.width,o=n.thumbnailRaw.height,l=n.thumbnailRaw.data;else try{var s=(t=n.thumbnail.toDataURL("image/jpeg",1))===null||t===void 0?void 0:t.substring(23);s&&(l=Zt.toByteArray(s),r=n.thumbnail.width,o=n.thumbnail.height)}catch{}var u=24,c=Math.floor((r*u+31)/32)*4,d=1,h=c*o*d,y=l.length;U(e,1),U(e,r),U(e,o),U(e,c),U(e,h),U(e,y),O(e,u),O(e,d),wn(e,l)});Fe(1057,function(e){return e.versionInfo!==void 0},function(e,n,t){var r=E(e);if(r!==1)throw new Error("Invalid versionInfo version");n.versionInfo={hasRealMergedData:!!G(e),writerName:Be(e),readerName:Be(e),fileVersion:E(e)},H(e,t())},function(e,n){var t=n.versionInfo;U(e,1),B(e,t.hasRealMergedData?1:0),sn(e,t.writerName),sn(e,t.readerName),U(e,t.fileVersion)});Fe(7e3,function(e){return e.imageReadyVariables!==void 0},function(e,n,t){n.imageReadyVariables=Fi(e,t())},function(e,n){wi(e,n.imageReadyVariables)});Fe(7001,function(e){return e.imageReadyDataSets!==void 0},function(e,n,t){n.imageReadyDataSets=Fi(e,t())},function(e,n){wi(e,n.imageReadyDataSets)});Fe(1088,function(e){return e.pathSelectionState!==void 0},function(e,n,t){var r=he(e);n.pathSelectionState=r.null},function(e,n){var t={null:n.pathSelectionState};ve(e,"","null",t)});var $a=ne("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});Fe(4e3,function(e){return e.animations!==void 0},function(e,n,t){var r=Ce(e);if(r==="mani")Dn(e,"IRFR"),ln(e,1,function(l){for(var s=function(){Dn(e,"8BIM");var u=Ce(e);ln(e,1,function(c){if(u==="AnDs"){var d=he(e);n.animations={frames:d.FrIn.map(function(y){return{id:y.FrID,delay:(y.FrDl||0)/100,dispose:y.FrDs?$a.decode(y.FrDs):"auto"}}),animations:d.FSts.map(function(y){return{id:y.FsID,frames:y.FsFr,repeats:y.LCnt,activeFrame:y.AFrm||0}})}}else if(u==="Roll"){var h=ze(e,c());e.logDevFeatures&&e.log("#4000 Roll",h)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",u)})};l()>0;)s()});else if(r==="mopt"){var o=ze(e,t());e.logDevFeatures&&e.log("#4000 mopt",o)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",r)},function(e,n){n.animations&&(ee(e,"mani"),ee(e,"IRFR"),He(e,1,function(){ee(e,"8BIM"),ee(e,"AnDs"),He(e,1,function(){for(var t={FrIn:[],FSts:[]},r=0;r<n.animations.frames.length;r++){var o=n.animations.frames[r],l={FrID:o.id};o.delay&&(l.FrDl=o.delay*100|0),l.FrDs=$a.encode(o.dispose),t.FrIn.push(l)}for(var r=0;r<n.animations.animations.length;r++){var s=n.animations.animations[r],u={FsID:s.id,AFrm:s.activeFrame|0,FsFr:s.frames,LCnt:s.repeats|0};t.FSts.push(u)}ve(e,"","null",t)})}))});var Fu=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]]);return t},As=[0,1,3,2],wu=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function hi(e){for(var n=e.width*e.height*4,t=0;t<n;t+=4)e.data[t+1]=e.data[t],e.data[t+2]=e.data[t]}function Er(e,n,t){var r=new DataView(e,n,t);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}function pi(e,n){if(e.strict)throw new Error(n);e.debug&&e.log(n)}function G(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function ku(e){return e.view.getUint8(e.offset)}function de(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function R(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function xu(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function X(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function eo(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}function E(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function yn(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}function pn(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function rn(e){return X(e)/65536}function mn(e){return X(e)/(1<<24)}function ze(e,n){var t=e.view.byteOffset+e.offset;if(e.offset+=n,t+n>e.view.buffer.byteLength){if(pi(e,"Reading bytes exceeding buffer length"),n>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(n),o=Math.min(n,e.view.byteLength-t);return o>0&&r.set(new Uint8Array(e.view.buffer,t,o)),r}else return new Uint8Array(e.view.buffer,t,n)}function Ce(e){return Ps(e,4)}function Iu(e,n){var t=String.fromCharCode(e.view.getUint8(n))+String.fromCharCode(e.view.getUint8(n+1))+String.fromCharCode(e.view.getUint8(n+2))+String.fromCharCode(e.view.getUint8(n+3));return t=="8BIM"||t=="8B64"}function Fn(e,n){for(var t=G(e),r=t?Ps(e,t):"";++t%n;)e.offset++;return r}function Be(e){var n=E(e);return ki(e,n)}function ki(e,n){for(var t="";n--;){var r=R(e);(r||n>0)&&(t+=String.fromCharCode(r))}return t}function Cu(e,n){for(var t="";n--;){var r=xu(e);(r||n>0)&&(t+=String.fromCharCode(r))}return t}function xi(e,n){for(var t="";n--;)t+=String.fromCharCode(G(e));return t}function H(e,n){e.offset+=n}function Dn(e,n,t){var r=e.offset,o=Ce(e);if(o!==n&&o!==t)throw new Error("Invalid signature: '".concat(o,"' at 0x").concat(r.toString(16)))}function Ps(e,n){for(var t=ze(e,n),r="",o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r}function no(e){return e==="8BIM"||e==="MeSa"||e==="AgHg"||e==="PHUT"||e==="DCSR"}function Du(e,n){var t;n===void 0&&(n={}),Dn(e,"8BPS");var r=R(e);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));H(e,6);var o=R(e),l=E(e),s=E(e),u=R(e),c=R(e),d=r===1?3e4:3e5;if(s>d||l>d)throw new Error("Invalid size: ".concat(s,"x").concat(l));if(o>16)throw new Error("Invalid channel count: ".concat(o));if(![1,8,16,32].includes(u))throw new Error("Invalid bitsPerChannel: ".concat(u));if(As.indexOf(c)===-1)throw new Error("Color mode not supported: ".concat((t=wu[c])!==null&&t!==void 0?t:c));var h={width:s,height:l,channels:o,bitsPerChannel:u,colorMode:c};Object.assign(e,n),e.large=r===2,e.globalAlpha=!1;var y=[0,1,-1,2,-2,3,-3,4,-4];ln(e,1,function(P){if(P()){if(c===2){if(P()!=768)throw new Error("Invalid color palette size");h.palette=[];for(var x=0;x<256;x++)h.palette.push({r:G(e),g:0,b:0});for(var x=0;x<256;x++)h.palette[x].g=G(e);for(var x=0;x<256;x++)h.palette[x].b=G(e)}H(e,P())}});var b={};ln(e,1,function(P){for(var x=function(){for(var I=e.offset,C="",M=0,z=y;M<z.length;M++){var $=z[M];try{e.offset=I+$,C=Ce(e)}catch{}if(no(C))break}if(!no(C))throw new Error("Invalid signature: '".concat(C,"' at 0x").concat(I.toString(16)));var Y=R(e);Fn(e,2),ln(e,2,function(Z){var ae=Ds[Y],le=Y===1036&&!!e.skipThumbnail;if(ae&&!le)try{ae.read(e,b,Z)}catch(Ae){if(e.throwForMissingFeatures)throw Ae;H(e,Z())}else H(e,Z())})};P()>0;)x()}),b.layersGroup,b.layerGroupsEnabledId;var _=Fu(b,["layersGroup","layerGroupsEnabledId"]);Object.keys(_)&&(h.imageResources=_),ln(e,1,function(P){if(ln(e,2,function(I){Ii(e,h,b),H(e,I())},void 0,e.large),P()>0){var x=Lu(e);x&&(h.globalLayerMaskInfo=x)}else H(e,P());for(;P()>0;){for(;P()&&ku(e)===0;)H(e,1);P()>=12?Es(e,h,h,b):H(e,P())}},void 0,e.large);var F=h.children&&h.children.length,S=e.skipCompositeImageData&&(e.skipLayerImageData||F);return S||Mu(e,h),h}function Ii(e,n,t){var r,o,l=t.layersGroup,s=l===void 0?[]:l,u=t.layerGroupsEnabledId,c=u===void 0?[]:u,d=de(e);d<0&&(e.globalAlpha=!0,d=-d);for(var h=[],y=[],b=0;b<d;b++){var _=Au(e,n,t),F=_.layer,S=_.channels;s[b]!==void 0&&(F.linkGroup=s[b]),c[b]!==void 0&&(F.linkGroupEnabled=!!c[b]),h.push(F),y.push(S)}if(!e.skipLayerImageData)for(var b=0;b<d;b++)Ou(e,n,h[b],y[b]);n.children||(n.children=[]);for(var P=[n],b=h.length-1;b>=0;b--){var x=h[b],I=x.sectionDivider?x.sectionDivider.type:0;I===1||I===2?(x.opened=I===1,x.children=[],!((r=x.sectionDivider)===null||r===void 0)&&r.key&&(x.blendMode=(o=vt[x.sectionDivider.key])!==null&&o!==void 0?o:x.blendMode),P[P.length-1].children.unshift(x),P.push(x)):I===3?P.pop():P[P.length-1].children.unshift(x)}}function Au(e,n,t){var r={};r.top=X(e),r.left=X(e),r.bottom=X(e),r.right=X(e);for(var o=R(e),l=[],s=0;s<o;s++){var u=de(e),c=E(e);if(e.large){if(c!==0)throw new Error("Sizes larger than 4GB are not supported");c=E(e)}l.push({id:u,length:c})}Dn(e,"8BIM");var d=Ce(e);if(!vt[d])throw new Error("Invalid blend mode: '".concat(d,"'"));r.blendMode=vt[d],r.opacity=G(e)/255,r.clipping=G(e)===1;var h=G(e);return r.transparencyProtected=(h&1)!==0,r.hidden=(h&2)!==0,h&32&&(r.effectsOpen=!0),H(e,1),ln(e,1,function(y){Pu(e,r);var b=Eu(e);for(b&&(r.blendingRanges=b),r.name=Fn(e,1);y()>4&&!Iu(e,e.offset);)e.offset++;for(;y()>=12;)Es(e,r,n,t);H(e,y())}),{layer:r,channels:l}}function Pu(e,n){return ln(e,1,function(t){if(t()){var r={};n.mask=r,r.top=X(e),r.left=X(e),r.bottom=X(e),r.right=X(e),r.defaultColor=G(e);var o=G(e);if(r.positionRelativeToLayer=(o&1)!==0,r.disabled=(o&2)!==0,r.fromVectorData=(o&8)!==0,t()>=18){var l={};n.realMask=l;var s=G(e);l.positionRelativeToLayer=(s&1)!==0,l.disabled=(s&2)!==0,l.fromVectorData=(s&8)!==0,l.defaultColor=G(e),l.top=X(e),l.left=X(e),l.bottom=X(e),l.right=X(e)}if(o&16){var u=G(e);u&1&&(r.userMaskDensity=G(e)/255),u&2&&(r.userMaskFeather=pn(e)),u&4&&(r.vectorMaskDensity=G(e)/255),u&8&&(r.vectorMaskFeather=pn(e))}H(e,t())}})}function yr(e){return[G(e),G(e),G(e),G(e)]}function Eu(e){return ln(e,1,function(n){for(var t=yr(e),r=yr(e),o=[];n()>0;){var l=yr(e),s=yr(e);o.push({sourceRange:l,destRange:s})}return{compositeGrayBlendSource:t,compositeGraphBlendDestinationRange:r,ranges:o}})}function Ou(e,n,t,r){var o,l,s,u,c=(t.right||0)-(t.left||0),d=(t.bottom||0)-(t.top||0),h=n.colorMode===4,y;if(c&&d)if(h){if(n.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");y={width:c,height:d,data:new Uint8ClampedArray(c*d*5)};for(var b=4;b<y.data.byteLength;b+=5)y.data[b]=255}else y=vi(c,d,(o=n.bitsPerChannel)!==null&&o!==void 0?o:8),fi(y);for(var _=0,F=r;_<F.length;_++){var S=F[_];if(S.length!==0){if(S.length<2)throw new Error("Invalid channel length");var P=e.offset,x=R(e);if(x>3&&(e.offset-=1,x=R(e)),x>3&&(e.offset-=3,x=R(e)),x>3)throw new Error("Invalid compression: ".concat(x));if(S.id===-2||S.id===-3){var I=S.id===-2?t.mask:t.realMask;if(!I)throw new Error("Missing layer ".concat(S.id===-2?"mask":"real mask"," data"));var C=(I.right||0)-(I.left||0),M=(I.bottom||0)-(I.top||0);if(C<0||M<0||C>3e4||M>3e4)throw new Error("Invalid mask size");if(C&&M){var z=vi(C,M,(l=n.bitsPerChannel)!==null&&l!==void 0?l:8);fi(z),e.offset,to(e,S.length,z,x,C,M,(s=n.bitsPerChannel)!==null&&s!==void 0?s:8,0,e.large,4),hi(z),e.useImageData?I.imageData=z:I.canvas=Cr(z)}}else{var $=Do(S.id,h),Y=y;if($<0&&(Y=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(S.id));to(e,S.length,Y,x,c,d,(u=n.bitsPerChannel)!==null&&u!==void 0?u:8,$,e.large,h?5:4),e.offset=P+S.length,Y&&n.colorMode===1&&hi(Y)}}}if(y){if(h){var Z=y;y=mt(Z.width,Z.height),Os(Z,y,!1)}e.useImageData?t.imageData=y:t.canvas=Cr(y)}}function to(e,n,t,r,o,l,s,u,c,d){if(r===0)Ms(e,t,o,l,s,d,u);else if(r===1)dt(e,t,o,l,s,d,[u],c);else if(r===2)ro(e,n,t,o,l,s,d,u,!1);else if(r===3)ro(e,n,t,o,l,s,d,u,!0);else throw new Error("Invalid Compression type: ".concat(r))}function Lu(e){return ln(e,1,function(n){if(n()){var t=R(e),r=R(e),o=R(e),l=R(e),s=R(e),u=R(e)/255,c=G(e);return H(e,n()),{overlayColorSpace:t,colorSpace1:r,colorSpace2:o,colorSpace3:l,colorSpace4:s,opacity:u,kind:c}}})}function Es(e,n,t,r){var o=Ce(e);if(o!=="8BIM"&&o!=="8B64")throw new Error("Invalid signature: '".concat(o,"' at 0x").concat((e.offset-4).toString(16)));var l=Ce(e),s=o==="8B64"||e.large&&Co.indexOf(l)!==-1;ln(e,2,function(u){var c=Or[l];if(c)try{c.read(e,n,u,t,r)}catch(d){if(e.throwForMissingFeatures)throw d}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(l)),H(e,u());u()&&(e.logMissingFeatures&&e.log("Unread ".concat(u()," bytes left for additional info: ").concat(l)),H(e,u()))},!1,s)}function vi(e,n,t,r){if(r===void 0&&(r=4),t===1||t===8)return r===4?mt(e,n):{width:e,height:n,data:new Uint8ClampedArray(e*n*r)};if(t===16)return{width:e,height:n,data:new Uint16Array(e*n*r)};if(t===32)return{width:e,height:n,data:new Float32Array(e*n*r)};throw new Error("Invalid bitDepth (".concat(t,")"))}function Mu(e,n){var t,r=R(e),o=(t=n.bitsPerChannel)!==null&&t!==void 0?t:8;if(As.indexOf(n.colorMode)===-1)throw new Error("Color mode not supported: ".concat(n.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var l=vi(n.width,n.height,o);switch(fi(l),n.colorMode){case 0:{if(o!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var s=void 0;if(r===0)s=ze(e,Math.ceil(n.width/8)*n.height);else if(r===1)s=new Uint8Array(n.width*n.height),dt(e,{data:s,width:n.width,height:n.height},n.width,n.height,8,1,[0],e.large);else throw new Error("Bitmap compression not supported: ".concat(r));su(s,l.data,n.width,n.height);break}case 3:case 1:{var u=n.colorMode===1?[0]:[0,1,2];if(n.channels&&n.channels>3)for(var c=3;c<n.channels;c++)u.push(c);else e.globalAlpha&&u.push(3);if(r===0)for(var c=0;c<u.length;c++)Ms(e,l,n.width,n.height,o,4,u[c]);else r===1&&(e.offset,dt(e,l,n.width,n.height,o,4,u,e.large));n.colorMode===1&&hi(l);break}case 2:{if(o!==8)throw new Error("bitsPerChannel Not supproted");if(n.channels!==1)throw new Error("Invalid channel count");if(!n.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var d={width:l.width,height:l.height,data:new Uint8Array(l.width*l.height)};dt(e,d,n.width,n.height,o,1,[0],e.large),Tu(d,l,n.palette)}else throw new Error("Not implemented");break}case 4:{if(o!==8)throw new Error("bitsPerChannel Not supproted");if(n.channels!==4)throw new Error("Invalid channel count");var u=[0,1,2,3];if(e.globalAlpha&&u.push(4),r===0)throw new Error("Not implemented");if(r===1){var h={width:l.width,height:l.height,data:new Uint8Array(l.width*l.height*5)};e.offset,dt(e,h,n.width,n.height,o,5,u,e.large),Os(h,l,!0)}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(n.colorMode))}if(e.globalAlpha){if(n.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var y=l.data,b=l.width*l.height*4,c=0;c<b;c+=4){var _=y[c+3];if(_!=0&&_!=255){var F=_/255,S=1/F,P=255*(1-S);y[c+0]=y[c+0]*S+P,y[c+1]=y[c+1]*S+P,y[c+2]=y[c+2]*S+P}}}e.useImageData?n.imageData=l:n.canvas=Cr(l)}function Os(e,n,t){for(var r=n.width*n.height*4,o=e.data,l=n.data,s=0,u=0;u<r;s+=5,u+=4){var c=o[s],d=o[s+1],h=o[s+2],y=o[s+3];l[u]=(c*y|0)/255|0,l[u+1]=(d*y|0)/255|0,l[u+2]=(h*y|0)/255|0,l[u+3]=t?255-o[s+4]:o[s+4]}}function Tu(e,n,t){for(var r=e.width*e.height,o=e.data,l=n.data,s=0,u=0;s<r;s++,u+=4){var c=t[o[s]];l[u+0]=c.r,l[u+1]=c.g,l[u+2]=c.b,l[u+3]=255}}function Ru(e,n){if(e.byteLength/e.length!==n.byteLength/n.length)throw new Error("Invalid array types")}function Ls(e,n){if(n===8)return e;if(n===16)if(e.byteOffset%2){var t=new Uint16Array(e.byteLength/2);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(e),t}else return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else if(n===32)if(e.byteOffset%4){var t=new Float32Array(e.byteLength/4);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(e),t}else return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else throw new Error("Invalid bitDepth (".concat(n,")"))}function mi(e,n,t,r){Ru(e.data,n);for(var o=e.width*e.height,l=e.data,s=0,u=t|0;s<o;s++,u=u+r|0)l[u]=n[s]}function Ms(e,n,t,r,o,l,s){var u=ze(e,t*r*Math.floor(o/8));if(o==32)for(var c=0;c<u.byteLength;c+=4){var d=u[c+0],h=u[c+1],y=u[c+2],b=u[c+3];u[c+0]=b,u[c+1]=y,u[c+2]=h,u[c+3]=d}var _=Ls(u,o);n&&s<l&&mi(n,_,s,l)}function ti(e,n,t,r){for(var o=0;o<t;o++)for(var l=o*n,s=1,u=l+1;s<n;s++,u++)e[u]=(e[u-1]+e[u])%r}function ro(e,n,t,r,o,l,s,u,c){var d=ze(e,n),h=Io.inflate(d);if(t&&u<s){var y=Ls(h,l);if(l===8)c&&ti(h,r,o,256),mi(t,h,u,s);else if(l===16)c&&ti(y,r,o,65536),mi(t,y,u,s);else if(l===32){c&&ti(h,r*4,o,256);for(var b=u,_=new Uint32Array(t.data.buffer,t.data.byteOffset,t.data.length),F=0;F<o;F++)for(var S=r*4*F,P=0;P<r;P++,S++,b+=s){var x=S+r,I=x+r,C=I+r;_[b]=(h[S]<<24|h[x]<<16|h[I]<<8|h[C])>>>0}}else throw new Error("Invalid bitDepth")}}function dt(e,n,t,r,o,l,s,u){var c=n&&n.data,d;if(u){d=new Uint32Array(s.length*r);for(var h=0,y=0;h<s.length;h++)for(var b=0;b<r;b++,y++)d[y]=E(e)}else{d=new Uint16Array(s.length*r);for(var h=0,y=0;h<s.length;h++)for(var b=0;b<r;b++,y++)d[y]=R(e)}if(o!==1&&o!==8)throw new Error("Invalid bit depth (".concat(o,")"));for(var _=l-1|0,F=0,y=0;F<s.length;F++){var S=s[F]|0,P=F>_||S>_;if(!c||P)for(var b=0;b<r;b++,y++)H(e,d[y]);else for(var b=0,x=S|0;b<r;b++,y++)for(var I=d[y],C=ze(e,I),M=0,z=0;M<I;M++){var $=C[M];if($>128){var Y=C[++M];$=256-$|0;for(var Z=0;Z<=$&&z<t;Z=Z+1|0,z=z+1|0)c[x]=Y,x=x+l|0}else if($<128)for(var Z=0;Z<=$&&z<t;Z=Z+1|0,z=z+1|0)c[x]=C[++M],x=x+l|0}}}function ln(e,n,t,r,o){r===void 0&&(r=!0),o===void 0&&(o=!1);var l=E(e);if(o){if(l!==0)throw new Error("Sizes larger than 4GB are not supported");l=E(e)}if(!(l<=0&&r)){var s=e.offset+l;if(s>e.view.byteLength)throw new Error("Section exceeds file size");var u=t(function(){return s-e.offset});for(e.offset!==s&&(e.offset>s?pi(e,"Exceeded section limits"):pi(e,"Unread section data"));s%n;)s++;return e.offset=s,u}}function Ne(e){var n=R(e);switch(n){case 0:{var t=R(e)/257,r=R(e)/257,o=R(e)/257;return H(e,2),{r:t,g:r,b:o}}case 1:{var l=R(e)/65535,s=R(e)/65535,o=R(e)/65535;return H(e,2),{h:l,s,b:o}}case 2:{var u=R(e)/257,c=R(e)/257,d=R(e)/257,h=R(e)/257;return{c:u,m:c,y:d,k:h}}case 7:{var y=de(e)/1e4,b=de(e),_=de(e),F=b<0?b/12800:b/12700,o=_<0?_/12800:_/12700;return H(e,2),{l:y,a:F,b:o}}case 8:{var h=R(e)*255/1e4;return H(e,6),{k:h}}default:throw new Error("Invalid color space")}}function Bu(e){E(e);var n=E(e);if(n!==1)throw new Error("Invalid pattern version: ".concat(n));var t=E(e),r=de(e),o=de(e);if(t!==3&&t!==1&&t!==2)throw new Error("Unsupported pattern color mode: ".concat(t));var l=Be(e),s=Fn(e,1),u=[];if(t===2){for(var c=0;c<256;c++)u.push({r:G(e),g:G(e),b:G(e)});H(e,4)}var d=E(e);if(d!==3)throw new Error("Invalid pattern VMAL version: ".concat(d));E(e);for(var h=E(e),y=E(e),b=E(e),_=E(e),F=E(e),S=_-y,P=b-h,x=new Uint8Array(S*P*4),c=3;c<x.byteLength;c+=4)x[c]=255;for(var c=0,I=0;c<F+2;c++){var C=E(e);if(C){var M=E(e),z=E(e),$=E(e),Y=E(e),Z=E(e),ae=E(e),le=R(e),Ae=G(e),Me=M-23,V=ze(e,Me);if(z!==8||le!==8)throw new Error("16bit pixel depth not supported for patterns");var re=ae-Y,Pe=Z-$,K=Y-y,Qe=$-h;if(Ae===0){if(t===3&&I<3)for(var Le=0;Le<Pe;Le++)for(var We=0;We<re;We++){var pe=We+Le*re,Ye=(K+We+(Le+Qe)*S)*4;x[Ye+I]=V[pe]}if(t===1&&I<1)for(var un=0;un<Pe;un++)for(var An=0;An<re;An++){var pe=An+un*re,Ye=(K+An+(un+Qe)*S)*4,Xn=V[pe];x[Ye+0]=Xn,x[Ye+1]=Xn,x[Ye+2]=Xn}if(t===2)throw new Error("Indexed pattern color mode not implemented")}else if(Ae===1)e.log("Unsupported pattern compression"),l+=" (failed to decode)";else throw new Error("Invalid pattern compression mode");I++}}return{id:s,name:l,x:r,y:o,bounds:{x:y,y:h,w:S,h:P},data:x}}var Ts=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function st(e){return Dn(e,"8BIM"),vt[Ce(e)]||"normal"}function ut(e,n){ee(e,"8BIM"),ee(e,Mr[n]||"norm")}function lt(e){return G(e)/255}function ct(e,n){B(e,Math.round(n*255)|0)}function zu(e){var n=R(e);if(n!==0)throw new Error("Invalid effects layer version: ".concat(n));for(var t=R(e),r={},o=0;o<t;o++){Dn(e,"8BIM");var l=Ce(e);switch(l){case"cmnS":{var s=E(e),u=E(e),c=!!G(e);if(H(e,2),s!==7||u!==0||!c)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var d=E(e),h=E(e);if(d!==41&&d!==51)throw new Error("Invalid shadow size: ".concat(d));if(h!==0&&h!==2)throw new Error("Invalid shadow version: ".concat(h));var s=rn(e);rn(e);var y=rn(e),b=rn(e),_=Ne(e),F=st(e),S=!!G(e),P=!!G(e),x=lt(e);d>=51&&Ne(e);var I={size:{units:"Pixels",value:s},distance:{units:"Pixels",value:b},angle:y,color:_,blendMode:F,enabled:S,useGlobalLight:P,opacity:x};l==="dsdw"?r.dropShadow=[I]:r.innerShadow=[I];break}case"oglw":{var d=E(e),C=E(e);if(d!==32&&d!==42)throw new Error("Invalid outer glow size: ".concat(d));if(C!==0&&C!==2)throw new Error("Invalid outer glow version: ".concat(C));var s=rn(e);rn(e);var _=Ne(e),F=st(e),S=!!G(e),x=lt(e);d>=42&&Ne(e),r.outerGlow={size:{units:"Pixels",value:s},color:_,blendMode:F,enabled:S,opacity:x};break}case"iglw":{var d=E(e),M=E(e);if(d!==32&&d!==43)throw new Error("Invalid inner glow size: ".concat(d));if(M!==0&&M!==2)throw new Error("Invalid inner glow version: ".concat(M));var s=rn(e);rn(e);var _=Ne(e),F=st(e),S=!!G(e),x=lt(e);d>=43&&(G(e),Ne(e)),r.innerGlow={size:{units:"Pixels",value:s},color:_,blendMode:F,enabled:S,opacity:x};break}case"bevl":{var d=E(e),z=E(e);if(d!==58&&d!==78)throw new Error("Invalid bevel size: ".concat(d));if(z!==0&&z!==2)throw new Error("Invalid bevel version: ".concat(z));var y=rn(e),$=rn(e),s=rn(e),Y=st(e),Z=st(e),ae=Ne(e),le=Ne(e),Ae=Ts[G(e)]||"inner bevel",Me=lt(e),V=lt(e),S=!!G(e),P=!!G(e),re=G(e)?"down":"up";d>=78&&(Ne(e),Ne(e)),r.bevel={size:{units:"Pixels",value:s},angle:y,strength:$,highlightBlendMode:Y,shadowBlendMode:Z,highlightColor:ae,shadowColor:le,style:Ae,highlightOpacity:Me,shadowOpacity:V,enabled:S,useGlobalLight:P,direction:re};break}case"sofi":{var s=E(e),Pe=E(e);if(s!==34)throw new Error("Invalid effects solid fill info size: ".concat(s));if(Pe!==2)throw new Error("Invalid effects solid fill info version: ".concat(Pe));var F=st(e),_=Ne(e),x=lt(e),S=!!G(e);Ne(e),r.solidFill=[{blendMode:F,color:_,opacity:x,enabled:S}];break}default:throw new Error("Invalid effect type: '".concat(l,"'"))}}return r}function io(e,n){var t;U(e,51),U(e,2),on(e,n.size&&n.size.value||0),on(e,0),on(e,n.angle||0),on(e,n.distance&&n.distance.value||0),Ve(e,n.color),ut(e,n.blendMode),B(e,n.enabled?1:0),B(e,n.useGlobalLight?1:0),ct(e,(t=n.opacity)!==null&&t!==void 0?t:1),Ve(e,n.color)}function Uu(e,n){var t,r,o,l,s,u,c=(t=n.dropShadow)===null||t===void 0?void 0:t[0],d=(r=n.innerShadow)===null||r===void 0?void 0:r[0],h=n.outerGlow,y=n.innerGlow,b=n.bevel,_=(o=n.solidFill)===null||o===void 0?void 0:o[0],F=1;if(c&&F++,d&&F++,h&&F++,y&&F++,b&&F++,_&&F++,O(e,0),O(e,F),ee(e,"8BIM"),ee(e,"cmnS"),U(e,7),U(e,0),B(e,1),ye(e,2),c&&(ee(e,"8BIM"),ee(e,"dsdw"),io(e,c)),d&&(ee(e,"8BIM"),ee(e,"isdw"),io(e,d)),h&&(ee(e,"8BIM"),ee(e,"oglw"),U(e,42),U(e,2),on(e,((l=h.size)===null||l===void 0?void 0:l.value)||0),on(e,0),Ve(e,h.color),ut(e,h.blendMode),B(e,h.enabled?1:0),ct(e,h.opacity||0),Ve(e,h.color)),y&&(ee(e,"8BIM"),ee(e,"iglw"),U(e,43),U(e,2),on(e,((s=y.size)===null||s===void 0?void 0:s.value)||0),on(e,0),Ve(e,y.color),ut(e,y.blendMode),B(e,y.enabled?1:0),ct(e,y.opacity||0),B(e,0),Ve(e,y.color)),b){ee(e,"8BIM"),ee(e,"bevl"),U(e,78),U(e,2),on(e,b.angle||0),on(e,b.strength||0),on(e,((u=b.size)===null||u===void 0?void 0:u.value)||0),ut(e,b.highlightBlendMode),ut(e,b.shadowBlendMode),Ve(e,b.highlightColor),Ve(e,b.shadowColor);var S=Ts.indexOf(b.style);B(e,S<=0?1:S),ct(e,b.highlightOpacity||0),ct(e,b.shadowOpacity||0),B(e,b.enabled?1:0),B(e,b.useGlobalLight?1:0),B(e,b.direction==="down"?1:0),Ve(e,b.highlightColor),Ve(e,b.shadowColor)}_&&(ee(e,"8BIM"),ee(e,"sofi"),U(e,34),U(e,2),ut(e,_.blendMode),Ve(e,_.color),ct(e,_.opacity||0),B(e,_.enabled?1:0),Ve(e,_.color))}function ao(e){return e===32||e===10||e===13||e===9}function oo(e){return e>=48&&e<=57||e===46||e===45}function Rs(e){var n=0;function t(){for(;n<e.length&&ao(e[n]);)n++}function r(){var I=e[n];return n++,I===92&&(I=e[n],n++),I}function o(){var I="";if(e[n]===41)return n++,I;if(e[n]!==254||e[n+1]!==255)throw new Error("Invalid utf-16 BOM");for(n+=2;n<e.length&&e[n]!==41;){var C=r(),M=r(),z=C<<8|M;I+=String.fromCharCode(z)}return n++,I}var l=null,s=[];function u(I){s.length?(c(I),s.push(I)):(s.push(I),l=I)}function c(I){if(!s.length)throw new Error("Invalid data");var C=s[s.length-1];if(typeof C=="string")s[s.length-2][C]=I,h();else if(Array.isArray(C))C.push(I);else throw new Error("Invalid data")}function d(I){s.length||u({});var C=s[s.length-1];if(C&&typeof C=="string")c(I==="nil"?null:"/".concat(I));else if(C&&typeof C=="object")s.push(I);else throw new Error("Invalid data")}function h(){if(!s.length)throw new Error("Invalid data");s.pop()}t();for(var y=e.length;y>0&&e[y-1]===0;)y--;for(;n<y;){var b=n,_=e[b];if(_===60&&e[b+1]===60)n+=2,u({});else if(_===62&&e[b+1]===62)n+=2,h();else if(_===47){n+=1;for(var F=n;n<e.length&&!ao(e[n]);)n++;for(var S="",P=F;P<n;P++)S+=String.fromCharCode(e[P]);d(S)}else if(_===40)n+=1,c(o());else if(_===91)n+=1,u([]);else if(_===93)n+=1,h();else if(_===110&&e[b+1]===117&&e[b+2]===108&&e[b+3]===108)n+=4,c(null);else if(_===116&&e[b+1]===114&&e[b+2]===117&&e[b+3]===101)n+=4,c(!0);else if(_===102&&e[b+1]===97&&e[b+2]===108&&e[b+3]===115&&e[b+4]===101)n+=5,c(!1);else if(oo(_)){for(var x="";n<e.length&&oo(e[n]);)x+=String.fromCharCode(e[n]),n++;c(parseFloat(x))}else n+=1,console.log("Invalid token '".concat(String.fromCharCode(_),"' (").concat(_,") at ").concat(n));t()}return l}var Nu=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],Gu=["RunLengthArray"];function Vu(e,n){n===void 0&&(n=!1);var t=new Uint8Array(1024),r=0,o=0;function l(I){if(r>=t.length){var C=new Uint8Array(t.length*2);C.set(t),t=C}t[r]=I,r++}function s(I){for(var C=0;C<I.length;C++)l(I.charCodeAt(C))}function u(){if(n)s(" ");else for(var I=0;I<o;I++)s("	")}function c(I,C){u(),s("/".concat(I)),F(C,I,!0),n||s(`
`)}function d(I){return I.toString()}function h(I){return I.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function y(I,C){var M=C&&Nu.indexOf(C)!==-1||(I|0)!==I;return M?h(I):d(I)}function b(I){var C=Object.keys(I);return C.indexOf("98")!==-1&&C.unshift.apply(C,C.splice(C.indexOf("99"),1)),C.indexOf("99")!==-1&&C.unshift.apply(C,C.splice(C.indexOf("99"),1)),C}function _(I){(I===40||I===41||I===92)&&l(92),l(I)}function F(I,C,M){M===void 0&&(M=!1);function z(){M?s(" "):u()}if(I===null)z(),s(n?"/nil":"null");else if(typeof I=="number")z(),s(y(I,C));else if(typeof I=="boolean")z(),s(I?"true":"false");else if(typeof I=="string")if(z(),(C==="99"||C==="98")&&I.charAt(0)==="/")s(I);else{s("("),l(254),l(255);for(var $=0;$<I.length;$++){var Y=I.charCodeAt($);_(Y>>8&255),_(Y&255)}s(")")}else if(Array.isArray(I))if(z(),I.every(function(Qe){return typeof Qe=="number"})){s("[");for(var Z=Gu.indexOf(C)!==-1,ae=0,le=I;ae<le.length;ae++){var Ae=le[ae];s(" "),s(Z?y(Ae):h(Ae))}s(" ]")}else{s("["),n||s(`
`);for(var Me=0,V=I;Me<V.length;Me++){var Ae=V[Me];F(Ae,C),n||s(`
`)}u(),s("]")}else if(typeof I=="object"){M&&!n&&s(`
`),u(),s("<<"),n||s(`
`),o++;for(var re=0,Pe=b(I);re<Pe.length;re++){var K=Pe[re];c(K,I[K])}o--,u(),s(">>")}}if(n){if(typeof e=="object")for(var S=0,P=b(e);S<P.length;S++){var x=P[S];c(x,e[x])}}else s(`

`),F(e);return t.slice(0,r)}var Re=function(){return Re=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Re.apply(this,arguments)},Bs={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},br={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},ju={font:Bs,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},Hu={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Ci=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Di=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],zs=["none","crisp","strong","smooth","sharp"],Us=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function Ns(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function Wu(e){var n=e.Values;switch(e.Type){case 0:return{k:n[1]*255};case 1:return n[0]===1?{r:n[1]*255,g:n[2]*255,b:n[3]*255}:{r:n[1]*255,g:n[2]*255,b:n[3]*255,a:n[0]*255};case 2:return{c:n[1]*255,m:n[2]*255,y:n[3]*255,k:n[4]*255};default:throw new Error("Unknown color type in text layer")}}function gi(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function so(e,n){if(!e||!n||e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function lo(e,n){if(!e||!n)return!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var o=r[t];if(e[o]!==n[o])return!1}for(var l=0,s=Object.keys(n);l<s.length;l++){var o=s[l];if(e[o]!==n[o])return!1}return!0}function Xu(e,n){for(var t=0;t<e.length;t++)if(e[t].name===n.name)return t;return e.push(n),e.length-1}function Gs(e,n,t){for(var r={},o=0,l=n;o<l.length;o++){var s=l[o],u=Ns(s);e[u]!==void 0&&(s==="justification"?r[s]=Us[e[u]]:s==="font"?r[s]=t[e[u]]:s==="fillColor"||s==="strokeColor"?r[s]=Wu(e[u]):r[s]=e[u])}return r}function Vs(e,n,t){for(var r,o={},l=0,s=n;l<s.length;l++){var u=s[l],c=Ns(u);e[u]!==void 0&&(u==="justification"?o[c]=Us.indexOf((r=e[u])!==null&&r!==void 0?r:"left"):u==="font"?o[c]=Xu(t,e[u]):u==="fillColor"||u==="strokeColor"?o[c]=gi(e[u]):o[c]=e[u])}return o}function Zu(e,n){return Gs(e,Ci,n)}function Yu(e,n){return Gs(e,Di,n)}function Sr(e,n){return Vs(e,Ci,n)}function ri(e,n){return Vs(e,Di,n)}function uo(e,n,t){if(n.length){for(var r=function(u){var c=n[0].style[u];if(c!==void 0){var d=!1;Array.isArray(c)?d=n.every(function(S){return so(S.style[u],c)}):typeof c=="object"?d=n.every(function(S){return lo(S.style[u],c)}):d=n.every(function(S){return S.style[u]===c}),d&&(e[u]=c)}var h=e[u];if(h!==void 0)for(var y=0,b=n;y<b.length;y++){var _=b[y],F=!1;Array.isArray(c)?F=so(_.style[u],c):typeof c=="object"?F=lo(_.style[u],c):F=_.style[u]===c,F&&delete _.style[u]}},o=0,l=t;o<l.length;o++){var s=l[o];r(s)}n.every(function(u){return Object.keys(u.style).length===0})&&(n.length=0)}}function Ku(e){for(var n,t,r,o,l,s,u=e.EngineDict,c=e.ResourceDict,d=c.FontSet.map(function($){return{name:$.Name,script:$.Script,type:$.FontType,synthetic:$.Synthetic}}),h=u.Editor.Text.replace(/\r/g,`
`),y=0;/\n$/.test(h);)h=h.substring(0,h.length-1),y++;var b={text:h,antiAlias:(n=zs[u.AntiAlias])!==null&&n!==void 0?n:"smooth",useFractionalGlyphWidths:!!u.UseFractionalGlyphWidths,superscriptSize:c.SuperscriptSize,superscriptPosition:c.SuperscriptPosition,subscriptSize:c.SubscriptSize,subscriptPosition:c.SubscriptPosition,smallCapSize:c.SmallCapSize},_=(s=(l=(o=(r=(t=u.Rendered)===null||t===void 0?void 0:t.Shapes)===null||r===void 0?void 0:r.Children)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.Cookie)===null||s===void 0?void 0:s.Photoshop;_&&(b.shapeType=_.ShapeType===1?"box":"point",_.PointBase&&(b.pointBase=_.PointBase),_.BoxBounds&&(b.boxBounds=_.BoxBounds));var F=u.ParagraphRun;b.paragraphStyle={},b.paragraphStyleRuns=[];for(var S=0;S<F.RunArray.length;S++){var P=F.RunArray[S],x=F.RunLengthArray[S],I=Zu(P.ParagraphSheet.Properties,d);b.paragraphStyleRuns.push({length:x,style:I})}for(var C=y;b.paragraphStyleRuns.length&&C>0;C--)--b.paragraphStyleRuns[b.paragraphStyleRuns.length-1].length===0&&b.paragraphStyleRuns.pop();uo(b.paragraphStyle,b.paragraphStyleRuns,Ci),b.paragraphStyleRuns.length||delete b.paragraphStyleRuns;var M=u.StyleRun;b.style={},b.styleRuns=[];for(var S=0;S<M.RunArray.length;S++){var z=M.RunLengthArray[S],I=Yu(M.RunArray[S].StyleSheet.StyleSheetData,d);I.font||(I.font=d[0]),b.styleRuns.push({length:z,style:I})}for(var C=y;b.styleRuns.length&&C>0;C--)--b.styleRuns[b.styleRuns.length-1].length===0&&b.styleRuns.pop();return uo(b.style,b.styleRuns,Di),b.styleRuns.length||delete b.styleRuns,b}function qu(e){var n,t,r,o,l,s,u,c,d,h,y,b,_="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),F=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],S=((n=e.style)===null||n===void 0?void 0:n.font)||((r=(t=e.styleRuns)===null||t===void 0?void 0:t.find(function(cn){return cn.style.font}))===null||r===void 0?void 0:r.style.font)||Bs,P=[],x=[],I=e.paragraphStyleRuns;if(I&&I.length){for(var C=_.length,M=0,z=I;M<z.length;M++){var $=z[M],Y=Math.min($.length,C);C-=Y,Y&&(C===1&&$===I[I.length-1]&&(Y++,C--),x.push(Y),P.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Sr(Re(Re(Re({},br),e.paragraphStyle),$.style),F)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}C&&(x.push(C),P.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Sr(Re(Re({},br),e.paragraphStyle),F)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var Z=0,ae=0;Z<_.length;Z++)_.charCodeAt(Z)===13&&(x.push(Z-ae+1),P.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Sr(Re(Re({},br),e.paragraphStyle),F)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),ae=Z+1);for(var le=ri(Re(Re({},ju),{font:S}),F),Ae=e.styleRuns||[{length:_.length,style:e.style||{}}],Me=[],V=[],re=_.length,Pe=0,K=Ae;Pe<K.length;Pe++){var Qe=K[Pe],Y=Math.min(Qe.length,re);re-=Y,Y&&(re===1&&Qe===Ae[Ae.length-1]&&(Y++,re--),V.push(Y),Me.push({StyleSheet:{StyleSheetData:ri(Re(Re({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),Qe.style),F)}}))}re&&Ae.length&&(V.push(re),Me.push({StyleSheet:{StyleSheetData:ri(Re({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),F)}}));var Le=Re(Re({},Hu),e.gridInfo),We=e.orientation==="vertical"?2:0,pe=e.orientation==="vertical"?1:0,Ye=e.shapeType==="box"?1:0,un={ShapeType:Ye};Ye===0?un.PointBase=e.pointBase||[0,0]:un.BoxBounds=e.boxBounds||[0,0,0,0],un.Base={ShapeType:Ye,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var An={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"、。，．・：；？！ー―’”）〕］｝〉》」』】ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ゛゜?!)]},.:;℃℉¢％‰",NoEnd:"‘“（〔［｛〈《「『【([{￥＄£＠§〒＃",Keep:"―‥",Hanging:"、。.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"、。，．・：；？！’”）〕］｝〉》」』】ヽヾゝゞ々",NoEnd:"‘“（〔［｛〈《「『【",Keep:"―‥",Hanging:"、。.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:Sr(Re(Re({},br),e.paragraphStyle),F)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:le}],FontSet:F.map(function(cn){return{Name:cn.name,Script:cn.script||0,FontType:cn.type||0,Synthetic:cn.synthetic||0}}),SuperscriptSize:(o=e.superscriptSize)!==null&&o!==void 0?o:.583,SuperscriptPosition:(l=e.superscriptPosition)!==null&&l!==void 0?l:.333,SubscriptSize:(s=e.subscriptSize)!==null&&s!==void 0?s:.583,SubscriptPosition:(u=e.subscriptPosition)!==null&&u!==void 0?u:.333,SmallCapSize:(c=e.smallCapSize)!==null&&c!==void 0?c:.7},Xn={EngineDict:{Editor:{Text:_},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:P,RunLengthArray:x,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:Me,RunLengthArray:V,IsJoinable:2},GridInfo:{GridIsOn:!!Le.isOn,ShowGrid:!!Le.show,GridSize:(d=Le.size)!==null&&d!==void 0?d:18,GridLeading:(h=Le.leading)!==null&&h!==void 0?h:22,GridColor:gi(Le.color),GridLeadingFillColor:gi(Le.color),AlignLineHeightToGridFlags:!!Le.alignLineHeightToGridFlags},AntiAlias:zs.indexOf((y=e.antiAlias)!==null&&y!==void 0?y:"sharp"),UseFractionalGlyphWidths:(b=e.useFractionalGlyphWidths)!==null&&b!==void 0?b:!0,Rendered:{Version:1,Shapes:{WritingDirection:We,Children:[{ShapeType:Ye,Procession:pe,Lines:{WritingDirection:We,Children:[]},Cookie:{Photoshop:un}}]}}},ResourceDict:Re({},An),DocumentResources:Re({},An)};return Xn}var ii={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},Ai={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:ii},54:{name:"StrokeColor",children:ii},55:{children:{99:{uproot:!0}}},79:{children:ii}},ai={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:Ai}},co={name:"StyleSheetData",children:Ai},Ju={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:co}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:ai},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:ai},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:co}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:Ai},3:{name:"ParagraphSheet",children:ai}}}};function Nt(e,n){var t,r;if(e===null)return e;if(Array.isArray(e))return e.map(function(c){return Nt(c,n)});if(typeof e!="object")return e;for(var o={},l=0,s=Object.keys(e);l<s.length;l++){var u=s[l];if(n[u])if(n[u].uproot){u!=="99"&&(o=Nt(e[u],(t=n[u].children)!==null&&t!==void 0?t:{})),e[99]&&(o._type=e[99]);break}else o[n[u].name||u]=Nt(e[u],(r=n[u].children)!==null&&r!==void 0?r:{});else u==="99"?o._type=e[u]:o[u]=Nt(e[u],{})}return o}function Qu(e){return Nt(e,Ju)}var p=function(){return p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)},an="abcdefghijklmnopqrstuvwxyz",js=[],Or={};function q(e,n,t,r){var o={key:e,has:n,read:t,write:r};js.push(o),Or[o.key]=o}function bt(e,n){Or[e]=Or[n]}function De(e){return function(n){return n[e]!==void 0}}function oi(e){if(E(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return E(e)}function si(e,n){U(e,0),U(e,n)}q("TySh",De("text"),function(e,n,t){if(de(e)!==1)throw new Error("Invalid TySh version");for(var r=[],o=0;o<6;o++)r.push(pn(e));if(de(e)!==50)throw new Error("Invalid TySh text version");var l=he(e);if(de(e)!==1)throw new Error("Invalid TySh warp version");var s=he(e);if(n.text={transform:r,left:yn(e),top:yn(e),right:yn(e),bottom:yn(e),text:l["Txt "].replace(/\r/g,`
`),index:l.TextIndex||0,gridding:Ta.decode(l.textGridding),antiAlias:Ra.decode(l.AntA),orientation:Wt.decode(l.Ornt),warp:{style:_i.decode(s.warpStyle),value:s.warpValue||0,perspective:s.warpPerspective||0,perspectiveOther:s.warpPerspectiveOther||0,rotate:Wt.decode(s.warpRotate)}},l.bounds&&(n.text.bounds=Aa(l.bounds)),l.boundingBox&&(n.text.boundingBox=Aa(l.boundingBox)),l.EngineData){var u=Rs(l.EngineData),c=Ku(u);n.text=p(p({},n.text),c)}H(e,t())},function(e,n){var t=n.text,r=t.warp||{},o=t.transform||[1,0,0,1,0,0],l=p(p(p({"Txt ":(t.text||"").replace(/\r?\n/g,"\r"),textGridding:Ta.encode(t.gridding),Ornt:Wt.encode(t.orientation),AntA:Ra.encode(t.antiAlias)},t.bounds?{bounds:Pa(t.bounds)}:{}),t.boundingBox?{boundingBox:Pa(t.boundingBox)}:{}),{TextIndex:t.index||0,EngineData:Vu(qu(t))});Se(e,1);for(var s=0;s<6;s++)vn(e,o[s]);Se(e,50),ve(e,"","TxLr",l,"text"),Se(e,1),ve(e,"","warp",Lr(r)),bn(e,t.left),bn(e,t.top),bn(e,t.right),bn(e,t.bottom)});q("SoCo",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="color"},function(e,n){var t=he(e);n.vectorFill=Jt(t)},function(e,n){var t=Qt(n.vectorFill).descriptor;ve(e,"","null",t)});q("GdFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&(e.vectorFill.type==="solid"||e.vectorFill.type==="noise")},function(e,n,t){var r=he(e);n.vectorFill=Jt(r),H(e,t())},function(e,n){var t=Qt(n.vectorFill).descriptor;ve(e,"","null",t)});q("PtFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="pattern"},function(e,n){var t=he(e);n.vectorFill=Jt(t)},function(e,n){var t=Qt(n.vectorFill).descriptor;ve(e,"","null",t)});q("vscg",function(e){return e.vectorFill!==void 0&&e.vectorStroke!==void 0},function(e,n,t){Ce(e);var r=he(e);n.vectorFill=Jt(r),H(e,t())},function(e,n){var t=Qt(n.vectorFill),r=t.descriptor,o=t.key;ee(e,o),ve(e,"","null",r)});function $u(e,n,t){var r=mn(e)*t,o=mn(e)*n,l=mn(e)*t,s=mn(e)*n,u=mn(e)*t,c=mn(e)*n;return[o,r,s,l,c,u]}function ec(e,n,t,r){gn(e,n[1]/r),gn(e,n[0]/t),gn(e,n[3]/r),gn(e,n[2]/t),gn(e,n[5]/r),gn(e,n[4]/t)}var Hs=["exclude","combine","subtract","intersect"];function Ws(e,n,t,r,o){for(var l=e.offset+o,s=n.paths,u=void 0;l-e.offset>=26;){var c=R(e);switch(c){case 0:case 3:{R(e);var d=de(e),h=R(e);H(e,18),u={open:c===3,knots:[],fillRule:h===2?"non-zero":"even-odd"},d!==-1&&(u.operation=Hs[d]),s.push(u);break}case 1:case 2:case 4:case 5:u.knots.push({linked:c===1||c===4,points:$u(e,t,r)});break;case 6:H(e,24);break;case 7:{var y=mn(e),b=mn(e),_=mn(e),F=mn(e),S=mn(e);H(e,4),n.clipboard={top:y,left:b,bottom:_,right:F,resolution:S};break}case 8:n.fillStartsWithAllPixels=!!R(e),H(e,22);break;default:throw new Error("Invalid vmsk section")}}return s}q("vmsk",De("vectorMask"),function(e,n,t,r){var o=r.width,l=r.height;if(E(e)!==3)throw new Error("Invalid vmsk version");n.vectorMask={paths:[]};var s=n.vectorMask,u=E(e);s.invert=(u&1)!==0,s.notLink=(u&2)!==0,s.disable=(u&4)!==0,Ws(e,s,o,l,t()),H(e,t())},function(e,n,t){var r=t.width,o=t.height,l=n.vectorMask,s=(l.invert?1:0)|(l.notLink?2:0)|(l.disable?4:0);U(e,3),U(e,s),O(e,6),ye(e,24);var u=l.clipboard;u&&(O(e,7),gn(e,u.top),gn(e,u.left),gn(e,u.bottom),gn(e,u.right),gn(e,u.resolution),ye(e,4)),l.fillStartsWithAllPixels!==void 0&&(O(e,8),O(e,l.fillStartsWithAllPixels?1:0),ye(e,22));for(var c=0,d=l.paths;c<d.length;c++){var h=d[c];O(e,h.open?3:0),O(e,h.knots.length),O(e,h.operation?Hs.indexOf(h.operation):-1),O(e,h.fillRule==="non-zero"?2:1),ye(e,18);for(var y=h.open?4:1,b=h.open?5:2,_=0,F=h.knots;_<F.length;_++){var S=F[_],P=S.linked,x=S.points;O(e,P?y:b),ec(e,x,r,o)}}});bt("vsms","vmsk");q("vowv",De("vowv"),function(e,n){n.vowv=E(e)},function(e,n){U(e,n.vowv)});q("vogk",De("vectorOrigination"),function(e,n,t){if(X(e)!==1)throw new Error("Invalid vogk version");var r=he(e);n.vectorOrigination={keyDescriptorList:[]};for(var o=0,l=r.keyDescriptorList;o<l.length;o++){var s=l[o],u={};s.keyShapeInvalidated!=null&&(u.keyShapeInvalidated=s.keyShapeInvalidated),s.keyOriginType!=null&&(u.keyOriginType=s.keyOriginType),s.keyOriginResolution!=null&&(u.keyOriginResolution=s.keyOriginResolution),s.keyOriginShapeBBox&&(u.keyOriginShapeBoundingBox={top:jn(s.keyOriginShapeBBox["Top "]),left:jn(s.keyOriginShapeBBox.Left),bottom:jn(s.keyOriginShapeBBox.Btom),right:jn(s.keyOriginShapeBBox.Rght)});var c=s.keyOriginRRectRadii;c&&(u.keyOriginRRectRadii={topRight:xe(c.topRight),topLeft:xe(c.topLeft),bottomLeft:xe(c.bottomLeft),bottomRight:xe(c.bottomRight)});var d=s.keyOriginBoxCorners;d&&(u.keyOriginBoxCorners=[{x:d.rectangleCornerA.Hrzn,y:d.rectangleCornerA.Vrtc},{x:d.rectangleCornerB.Hrzn,y:d.rectangleCornerB.Vrtc},{x:d.rectangleCornerC.Hrzn,y:d.rectangleCornerC.Vrtc},{x:d.rectangleCornerD.Hrzn,y:d.rectangleCornerD.Vrtc}]);var h=s.Trnf;h&&(u.transform=[h.xx,h.xy,h.xy,h.yy,h.tx,h.ty]),n.vectorOrigination.keyDescriptorList.push(u)}H(e,t())},function(e,n){for(var t=n.vectorOrigination,r={keyDescriptorList:[]},o=0;o<t.keyDescriptorList.length;o++){var l=t.keyDescriptorList[o];r.keyDescriptorList.push({});var s=r.keyDescriptorList[r.keyDescriptorList.length-1];l.keyOriginType!=null&&(s.keyOriginType=l.keyOriginType),l.keyOriginResolution!=null&&(s.keyOriginResolution=l.keyOriginResolution);var u=l.keyOriginRRectRadii;u&&(s.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:Ee(u.topRight,"topRight"),topLeft:Ee(u.topLeft,"topLeft"),bottomLeft:Ee(u.bottomLeft,"bottomLeft"),bottomRight:Ee(u.bottomRight,"bottomRight")});var c=l.keyOriginShapeBoundingBox;c&&(s.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":Ee(c.top,"top"),Left:Ee(c.left,"left"),Btom:Ee(c.bottom,"bottom"),Rght:Ee(c.right,"right")});var d=l.keyOriginBoxCorners;d&&d.length===4&&(s.keyOriginBoxCorners={rectangleCornerA:{Hrzn:d[0].x,Vrtc:d[0].y},rectangleCornerB:{Hrzn:d[1].x,Vrtc:d[1].y},rectangleCornerC:{Hrzn:d[2].x,Vrtc:d[2].y},rectangleCornerD:{Hrzn:d[3].x,Vrtc:d[3].y}});var h=l.transform;h&&h.length===6&&(s.Trnf={xx:h[0],xy:h[1],yx:h[2],yy:h[3],tx:h[4],ty:h[5]}),l.keyShapeInvalidated!=null&&(s.keyShapeInvalidated=l.keyShapeInvalidated),s.keyOriginIndex=o}Q(e,1),ve(e,"","null",r)});q("lmfx",function(e){return e.effects!==void 0&&Ks(e.effects)},function(e,n,t){var r=E(e);if(r!==0)throw new Error("Invalid lmfx version");var o=he(e);n.effects=qt(o,!!e.logMissingFeatures),H(e,t())},function(e,n,t,r){var o=Kt(n.effects,!!r.logMissingFeatures,!0);U(e,0),ve(e,"","null",o)});q("lrFX",De("effects"),function(e,n,t){n.effects||(n.effects=zu(e)),H(e,t())},function(e,n){Uu(e,n.effects)});q("luni",De("name"),function(e,n,t){if(t()>4){var r=E(e);t()>=r*2?n.name=ki(e,r):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");H(e,t())},function(e,n){sn(e,n.name)});q("lnsr",De("nameSource"),function(e,n){return n.nameSource=Ce(e)},function(e,n){return ee(e,n.nameSource)});q("lyid",De("id"),function(e,n){n.id=E(e)},function(e,n,t,r){for(var o=n.id;r.layerIds.has(o);)o+=100;U(e,o),r.layerIds.add(o),r.layerToId.set(n,o)});q("lsct",De("sectionDivider"),function(e,n,t){n.sectionDivider={type:E(e)},t()&&(Dn(e,"8BIM"),n.sectionDivider.key=Ce(e)),t()&&(n.sectionDivider.subType=E(e))},function(e,n){U(e,n.sectionDivider.type),n.sectionDivider.key&&(ee(e,"8BIM"),ee(e,n.sectionDivider.key),n.sectionDivider.subType!==void 0&&U(e,n.sectionDivider.subType))});bt("lsdk","lsct");q("clbl",De("blendClippendElements"),function(e,n){n.blendClippendElements=!!G(e),H(e,3)},function(e,n){B(e,n.blendClippendElements?1:0),ye(e,3)});q("infx",De("blendInteriorElements"),function(e,n){n.blendInteriorElements=!!G(e),H(e,3)},function(e,n){B(e,n.blendInteriorElements?1:0),ye(e,3)});q("knko",De("knockout"),function(e,n){n.knockout=!!G(e),H(e,3)},function(e,n){B(e,n.knockout?1:0),ye(e,3)});q("lmgm",De("layerMaskAsGlobalMask"),function(e,n){n.layerMaskAsGlobalMask=!!G(e),H(e,3)},function(e,n){B(e,n.layerMaskAsGlobalMask?1:0),ye(e,3)});q("lspf",De("protected"),function(e,n){var t=E(e);n.protected={transparency:(t&1)!==0,composite:(t&2)!==0,position:(t&4)!==0},t&8&&(n.protected.artboards=!0)},function(e,n){var t=(n.protected.transparency?1:0)|(n.protected.composite?2:0)|(n.protected.position?4:0)|(n.protected.artboards?8:0);U(e,t)});q("lclr",De("layerColor"),function(e,n){var t=R(e);H(e,6),n.layerColor=va[t]},function(e,n){var t=va.indexOf(n.layerColor);O(e,t===-1?0:t),ye(e,6)});q("shmd",function(e){return e.timestamp!==void 0||e.animationFrames!==void 0||e.animationFrameFlags!==void 0||e.timeline!==void 0||e.comps!==void 0},function(e,n,t){for(var r=E(e),o=function(s){Dn(e,"8BIM");var u=Ce(e);G(e),H(e,3),ln(e,1,function(c){if(u==="cust"){var d=he(e);d.layerTime!==void 0&&(n.timestamp=d.layerTime)}else if(u==="mlst"){var d=he(e);n.animationFrames=[];for(var h=0;h<d.LaSt.length;h++){var y=d.LaSt[h],b={frames:y.FrLs};y.enab!==void 0&&(b.enable=y.enab),y.Ofst&&(b.offset=Gt(y.Ofst)),y.FXRf&&(b.referencePoint=Gt(y.FXRf)),y.Lefx&&(b.effects=qt(y.Lefx,!!e.logMissingFeatures)),y.blendOptions&&y.blendOptions.Opct&&(b.opacity=se(y.blendOptions.Opct)),n.animationFrames.push(b)}}else if(u==="mdyn"){R(e);var _=G(e),F=G(e);n.animationFrameFlags={propagateFrameOne:!_,unifyLayerPosition:(F&1)!==0,unifyLayerStyle:(F&2)!==0,unifyLayerVisibility:(F&4)!==0}}else if(u==="tmln"){var d=he(e),S=d.timeScope,P={start:qe(S.Strt),duration:qe(S.duration),inTime:qe(S.inTime),outTime:qe(S.outTime),autoScope:d.autoScope,audioLevel:d.audioLevel};d.trackList&&(P.tracks=No(d.trackList,!!e.logMissingFeatures)),n.timeline=P}else if(u==="cmls"){var d=he(e);n.comps={settings:[]},d.origFXRefPoint&&(n.comps.originalEffectsReferencePoint={x:d.origFXRefPoint.Hrzn,y:d.origFXRefPoint.Vrtc});for(var x=0,I=d.layerSettings;x<I.length;x++){var C=I[x];n.comps.settings.push({compList:C.compList});var M=n.comps.settings[n.comps.settings.length-1];"enab"in C&&(M.enabled=C.enab),C.Ofst&&(M.offset={x:C.Ofst.Hrzn,y:C.Ofst.Vrtc}),C.FXRefPoint&&(M.effectsReferencePoint={x:C.FXRefPoint.Hrzn,y:C.FXRefPoint.Vrtc})}}else if(u==="extn"){var d=he(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',u)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',u);H(e,c())})},l=0;l<r;l++)o();H(e,t())},function(e,n,t,r){var o=n.animationFrames,l=n.animationFrameFlags,s=n.timestamp,u=n.timeline,c=n.comps,d=0;o&&d++,l&&d++,u&&d++,s!==void 0&&d++,c&&d++,U(e,d),o&&(ee(e,"8BIM"),ee(e,"mlst"),B(e,0),ye(e,3),He(e,2,function(){for(var h,y={LaID:(h=n.id)!==null&&h!==void 0?h:0,LaSt:[]},b=0;b<o.length;b++){var _=o[b],F={};_.enable!==void 0&&(F.enab=_.enable),F.FrLs=_.frames,_.offset&&(F.Ofst=Vt(_.offset)),_.referencePoint&&(F.FXRf=Vt(_.referencePoint)),_.effects&&(F.Lefx=Kt(_.effects,!1,!1)),_.opacity!==void 0&&(F.blendOptions={Opct:Ge(_.opacity)}),y.LaSt.push(F)}ve(e,"","null",y)},!0)),l&&(ee(e,"8BIM"),ee(e,"mdyn"),B(e,0),ye(e,3),He(e,2,function(){O(e,0),B(e,l.propagateFrameOne?0:15),B(e,(l.unifyLayerPosition?1:0)|(l.unifyLayerStyle?2:0)|(l.unifyLayerVisibility?4:0))})),u&&(ee(e,"8BIM"),ee(e,"tmln"),B(e,0),ye(e,3),He(e,2,function(){var h={Vrsn:1,timeScope:{Vrsn:1,Strt:u.start,duration:u.duration,inTime:u.inTime,outTime:u.outTime},autoScope:u.autoScope,audioLevel:u.audioLevel};u.tracks&&(h.trackList=Go(u.tracks));var y=r.layerToId.get(n)||n.id;if(!y)throw new Error("You need to provide layer.id value whan writing document with animations");h.LyrI=y,ve(e,"","null",h,"anim")},!0)),s!==void 0&&(ee(e,"8BIM"),ee(e,"cust"),B(e,0),ye(e,3),He(e,2,function(){var h={layerTime:s};ve(e,"","metadata",h)},!0)),c&&(ee(e,"8BIM"),ee(e,"cmls"),B(e,0),ye(e,3),He(e,2,function(){var h=r.layerToId.get(n)||n.id;if(!h)throw new Error("You need to provide layer.id value whan writing document with layer comps");var y={};c.originalEffectsReferencePoint&&(y.origFXRefPoint={Hrzn:c.originalEffectsReferencePoint.x,Vrtc:c.originalEffectsReferencePoint.y}),y.LyrI=h,y.layerSettings=[];for(var b=0,_=c.settings;b<_.length;b++){var F=_[b],S={};F.enabled!==void 0&&(S.enab=F.enabled),F.offset&&(S.Ofst={Hrzn:F.offset.x,Vrtc:F.offset.y}),F.effectsReferencePoint&&(S.FXRefPoint={Hrzn:F.effectsReferencePoint.x,Vrtc:F.effectsReferencePoint.y}),S.compList=F.compList,y.layerSettings.push(S)}ve(e,"","null",y)},!0))});q("vstk",De("vectorStroke"),function(e,n,t){var r=he(e);n.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:xe(r.strokeStyleLineWidth),lineDashOffset:xe(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:Va.decode(r.strokeStyleLineCapType),lineJoinType:ja.decode(r.strokeStyleLineJoinType),lineAlignment:Ha.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(xe),blendMode:Je.decode(r.strokeStyleBlendMode),opacity:se(r.strokeStyleOpacity),content:Jt(r.strokeStyleContent),resolution:r.strokeStyleResolution},H(e,t())},function(e,n){var t,r,o,l=n.vectorStroke,s={strokeStyleVersion:2,strokeEnabled:!!l.strokeEnabled,fillEnabled:!!l.fillEnabled,strokeStyleLineWidth:l.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:l.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(t=l.miterLimit)!==null&&t!==void 0?t:100,strokeStyleLineCapType:Va.encode(l.lineCapType),strokeStyleLineJoinType:ja.encode(l.lineJoinType),strokeStyleLineAlignment:Ha.encode(l.lineAlignment),strokeStyleScaleLock:!!l.scaleLock,strokeStyleStrokeAdjust:!!l.strokeAdjust,strokeStyleLineDashSet:l.lineDashSet||[],strokeStyleBlendMode:Je.encode(l.blendMode),strokeStyleOpacity:Ge((r=l.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:Qt(l.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(o=l.resolution)!==null&&o!==void 0?o:72};ve(e,"","strokeStyle",s)});q("artb",De("artboard"),function(e,n,t){var r=he(e),o=r.artboardRect;n.artboard={rect:{top:o["Top "],left:o.Left,bottom:o.Btom,right:o.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:Sn(r["Clr "]),backgroundType:r.artboardBackgroundType},H(e,t())},function(e,n){var t,r=n.artboard,o=r.rect,l={artboardRect:{"Top ":o.top,Left:o.left,Btom:o.bottom,Rght:o.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":_n(r.color),artboardBackgroundType:(t=r.backgroundType)!==null&&t!==void 0?t:1};ve(e,"","artboard",l)});q("sn2P",De("usingAlignedRendering"),function(e,n){return n.usingAlignedRendering=!!E(e)},function(e,n){return U(e,n.usingAlignedRendering?1:0)});var ht=["unknown","vector","raster","image stack"];function Xs(e){var n,t,r,o,l,s,u=p(p({style:_i.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:Wt.decode(e.warpRotate),bounds:e.bounds&&{top:jn(e.bounds["Top "]),left:jn(e.bounds.Left),bottom:jn(e.bounds.Btom),right:jn(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(e.deformNumRows!=null||e.deformNumCols!=null)&&(u.deformNumRows=e.deformNumRows,u.deformNumCols=e.deformNumCols);var c=e.customEnvelopeWarp;if(c){u.customEnvelopeWarp={meshPoints:[]};for(var d=((n=c.meshPoints.find(function(b){return b.type==="Hrzn"}))===null||n===void 0?void 0:n.values)||[],h=((t=c.meshPoints.find(function(b){return b.type==="Vrtc"}))===null||t===void 0?void 0:t.values)||[],y=0;y<d.length;y++)u.customEnvelopeWarp.meshPoints.push({x:d[y],y:h[y]});(c.quiltSliceX||c.quiltSliceY)&&(u.customEnvelopeWarp.quiltSliceX=((o=(r=c.quiltSliceX)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.values)||[],u.customEnvelopeWarp.quiltSliceY=((s=(l=c.quiltSliceY)===null||l===void 0?void 0:l[0])===null||s===void 0?void 0:s.values)||[])}return u}function Pi(e){var n,t;return e.deformNumCols!=null||e.deformNumRows!=null||((n=e.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceX)||((t=e.customEnvelopeWarp)===null||t===void 0?void 0:t.quiltSliceY)}function Lr(e){var n=e.bounds,t=p(p({warpStyle:_i.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:Wt.encode(e.rotate),bounds:{"Top ":Ee(n&&n.top||{units:"Pixels",value:0},"bounds.top"),Left:Ee(n&&n.left||{units:"Pixels",value:0},"bounds.left"),Btom:Ee(n&&n.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:Ee(n&&n.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),r=Pi(e);if(r){var o=t;o.deformNumRows=e.deformNumRows||0,o.deformNumCols=e.deformNumCols||0}var l=e.customEnvelopeWarp;if(l){var s=l.meshPoints||[];if(r){var o=t;o.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:l.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:l.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:s.map(function(c){return c.x})},{type:"Vrtc",values:s.map(function(c){return c.y})}]}}else t.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:s.map(function(u){return u.x})},{type:"Vrtc",values:s.map(function(u){return u.y})}]}}return t}q("PlLd",De("placedLayer"),function(e,n,t){if(Ce(e)!=="plcL")throw new Error("Invalid PlLd signature");if(X(e)!==3)throw new Error("Invalid PlLd version");var r=Fn(e,1),o=X(e),l=X(e);X(e);var s=X(e);if(!ht[s])throw new Error("Invalid PlLd type");for(var u=[],c=0;c<8;c++)u.push(pn(e));var d=X(e);if(d!==0)throw new Error("Invalid Warp version ".concat(d));var h=he(e);n.placedLayer=n.placedLayer||{id:r,type:ht[s],pageNumber:o,totalPages:l,transform:u,warp:Xs(h)},H(e,t())},function(e,n){var t=n.placedLayer;if(ee(e,"plcL"),Q(e,3),!t.id||typeof t.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(t.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(Wn(e,t.id,1),Q(e,1),Q(e,1),Q(e,16),ht.indexOf(t.type)===-1)throw new Error("Invalid placedLayer type");Q(e,ht.indexOf(t.type));for(var r=0;r<8;r++)vn(e,t.transform[r]);Q(e,0);var o=Zs(t),l=Pi(o),s=l?"quiltWarp":"warp";ve(e,"",s,Lr(o),s)});function nc(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function tc(e){return new Uint32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function li(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Ir(e){for(var n=[],t=0;t<e.length;t+=2)n.push({x:e[t],y:e[t+1]});return n}function Lt(e){for(var n=[],t=0;t<e.length;t++)n.push(e[t].x,e[t].y);return n}function fo(e){return Ir(nc(e))}function Mt(e){return{x:xe(e.Hrzn),y:xe(e.Vrtc)}}function Tt(e){return{_name:"",_classID:"Pnt ",Hrzn:Ee(e.x,"x"),Vrtc:Ee(e.y,"y")}}function rc(e,n){var t={name:e["Nm  "],opacity:se(e.blendOptions.Opct),blendMode:Je.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:Sn(e.FrgC),backgroundColor:Sn(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return p(p({},t),{type:"box blur",filter:{radius:xe(e.Fltr["Rds "])}});case"GsnB":return p(p({},t),{type:"gaussian blur",filter:{radius:xe(e.Fltr["Rds "])}});case"MtnB":return p(p({},t),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:xe(e.Fltr.Dstn)}});case"RdlB":return p(p({},t),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:ts.decode(e.Fltr.BlrM),quality:rs.decode(e.Fltr.BlrQ)}});case"shapeBlur":return p(p({},t),{type:"shape blur",filter:{radius:xe(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return p(p({},t),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:as.decode(e.Fltr.SmBQ),mode:is.decode(e.Fltr.SmBM)}});case"surfaceBlur":return p(p({},t),{type:"surface blur",filter:{radius:xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return p(p({},t),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:os.decode(e.Fltr.DspM),undefinedAreas:pt.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return p(p({},t),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return p(p({},t),{type:"polar coordinates",filter:{conversion:ss.decode(e.Fltr.Cnvr)}});case"Rple":return p(p({},t),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:ls.decode(e.Fltr.RplS)}});case"Shr ":return p(p({},t),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(u){return{x:u.Hrzn,y:u.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:pt.decode(e.Fltr.UndA)}});case"Sphr":return p(p({},t),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:us.decode(e.Fltr.SphM)}});case"Twrl":return p(p({},t),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return p(p({},t),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:cs.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:pt.decode(e.Fltr.UndA)}});case"ZgZg":return p(p({},t),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:fs.decode(e.Fltr.ZZTy)}});case"AdNs":return p(p({},t),{type:"add noise",filter:{amount:se(e.Fltr.Nose),distribution:ds.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return p(p({},t),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return p(p({},t),{type:"median",filter:{radius:xe(e.Fltr["Rds "])}});case"denoise":return p(p({},t),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:se(e.Fltr.ClNs),sharpenDetails:se(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(u){return p({channels:u.Chnl.map(Xt.decode),amount:u.Amnt},u.EdgF?{preserveDetails:u.EdgF}:{})})}});case"ClrH":return p(p({},t),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return p(p({},t),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return p(p({},t),{type:"mezzotint",filter:{type:hs.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return p(p({},t),{type:"mosaic",filter:{cellSize:xe(e.Fltr.ClSz)}});case"Pntl":return p(p({},t),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return p(p({},t),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return p(p({},t),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return p(p({},t),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return p(p({},t),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:ps.decode(e.Fltr["Lns "])}});case"smartSharpen":return p(p({},t),{type:"smart sharpen",filter:{amount:se(e.Fltr.Amnt),radius:xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:vs.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:se(e.Fltr.sdwM.Amnt),tonalWidth:se(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:se(e.Fltr.hglM.Amnt),tonalWidth:se(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return p(p({},t),{type:"unsharp mask",filter:{amount:se(e.Fltr.Amnt),radius:xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return p(p({},t),{type:"diffuse",filter:{mode:ms.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return p(p({},t),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return p(p({},t),{type:"extrude",filter:{type:gs.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:ys.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return p(p({},t),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:bs.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return p(p({},t),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:Ss.decode(e.Fltr["Edg "])}});case"Wnd ":return p(p({},t),{type:"wind",filter:{method:_s.decode(e.Fltr.WndM),direction:Fs.decode(e.Fltr.Drct)}});case"Dntr":return p(p({},t),{type:"de-interlace",filter:{eliminate:ws.decode(e.Fltr.IntE),newFieldsBy:ks.decode(e.Fltr.IntC)}});case"Cstm":return p(p({},t),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return p(p({},t),{type:"high pass",filter:{radius:xe(e.Fltr["Rds "])}});case"Mxm ":return p(p({},t),{type:"maximum",filter:{radius:xe(e.Fltr["Rds "])}});case"Mnm ":return p(p({},t),{type:"minimum",filter:{radius:xe(e.Fltr["Rds "])}});case"Ofst":return p(p({},t),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:xs.decode(e.Fltr["Fl  "])}});case"rigidTransform":return p(p({},t),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(u){return{rigidType:u.rigidType,originalVertexArray:fo(u.originalVertexArray),deformedVertexArray:fo(u.deformedVertexArray),indexArray:Array.from(tc(u.indexArray)),pinOffsets:Ir(u.pinOffsets),posFinalPins:Ir(u.posFinalPins),pinVertexIndices:u.pinVertexIndices,selectedPin:u.selectedPin,pinPosition:Ir(u.PinP),pinRotation:u.PnRt,pinOverlay:u.PnOv,pinDepth:u.PnDp,meshQuality:u.meshQuality,meshExpansion:u.meshExpansion,meshRigidity:u.meshRigidity,imageResolution:u.imageResolution,meshBoundaryPath:{pathComponents:u.meshBoundaryPath.pathComponents.map(function(c){return{shapeOperation:c.shapeOperation.split(".")[1],paths:c.SbpL.map(function(d){return{closed:d.Clsp,points:d["Pts "].map(function(h){return{anchor:Mt(h.Anch),forward:Mt(h["Fwd "]),backward:Mt(h["Bwd "]),smooth:h.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],o=e.Fltr,l=0;l<an.length&&o["PN".concat(an[l],"a")];l++)for(var s=0;s<an.length&&o["PN".concat(an[l]).concat(an[s])];s++)r.push({name:o["PN".concat(an[l]).concat(an[s])],value:o["PF".concat(an[l]).concat(an[s])]});return p(p({},t),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}})}case"HsbP":return p(p({},t),{type:"hsb/hsl",filter:{inputMode:Pr.decode(e.Fltr.Inpt),rowOrder:Pr.decode(e.Fltr.Otpt)}});case"oilPaint":return p(p({},t),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return p(p({},t),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return p(p({},t),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(Mt),warpedVertices:e.Fltr.warpedVertices.map(Mt),quads:e.Fltr.quads.map(function(u){return u.indices})}});case"Crvs":return p(p({},t),{type:"curves",filter:p({presetKind:Is.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(u){var c=u.Chnl.map(Xt.decode);if(u["Crv "])return{channels:c,curve:u["Crv "].map(function(d){var h={x:d.Hrzn,y:d.Vrtc};return d.Cnty&&(h.curved=!0),h})};if(u.Mpng)return{channels:c,values:u.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return p(p({},t),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(n.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return p(p({},t),{type:"average"});case 1114403360:return p(p({},t),{type:"blur"});case 1114403405:return p(p({},t),{type:"blur more"});case 1148416099:return p(p({},t),{type:"despeckle"});case 1180922912:return p(p({},t),{type:"facet"});case 1181902701:return p(p({},t),{type:"fragment"});case 1399353968:return p(p({},t),{type:"sharpen"});case 1399353925:return p(p({},t),{type:"sharpen edges"});case 1399353933:return p(p({},t),{type:"sharpen more"});case 1181639749:return p(p({},t),{type:"find edges"});case 1399616122:return p(p({},t),{type:"solarize"});case 1314149187:return p(p({},t),{type:"ntsc colors"});case 1231976050:return p(p({},t),{type:"invert"});default:if(n.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}function ic(e,n){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(t){return rc(t,n)}).filter(function(t){return!!t})}}function Cn(e){return Ee(e.radius,"radius")}function ac(e){var n={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:hn(e.opacity),"Md  ":Je.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:_n(e.foregroundColor),BckC:_n(e.backgroundColor)};switch(e.type){case"average":return p(p({},n),{filterID:1098281575});case"blur":return p(p({},n),{filterID:1114403360});case"blur more":return p(p({},n),{filterID:1114403405});case"box blur":return p(p({},n),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":Cn(e.filter)},filterID:697});case"gaussian blur":return p(p({},n),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":Cn(e.filter)},filterID:1198747202});case"motion blur":return p(p({},n),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:Ee(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return p(p({},n),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:ts.encode(e.filter.method),BlrQ:rs.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return p(p({},n),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":Cn(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return p(p({},n),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:as.encode(e.filter.quality),SmBM:is.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return p(p({},n),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":Cn(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return p(p({},n),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:os.encode(e.filter.displacementMap),UndA:pt.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return p(p({},n),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return p(p({},n),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:ss.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return p(p({},n),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:ls.encode(e.filter.size)},filterID:1383099493});case"shear":return p(p({},n),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(c){return{_name:"",_classID:"Pnt ",Hrzn:c.x,Vrtc:c.y}}),UndA:pt.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return p(p({},n),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:us.encode(e.filter.mode)},filterID:1399875698});case"twirl":return p(p({},n),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return p(p({},n),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:cs.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:pt.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return p(p({},n),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:fs.encode(e.filter.style)},filterID:1516722791});case"add noise":return p(p({},n),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:ds.encode(e.filter.distribution),Nose:hn(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return p(p({},n),{filterID:1148416099});case"dust and scratches":return p(p({},n),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return p(p({},n),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":Cn(e.filter)},filterID:1298427424});case"reduce noise":return p(p({},n),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:hn(e.filter.reduceColorNoise),Shrp:hn(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(c){return p({_name:"",_classID:"channelDenoiseParams",Chnl:c.channels.map(function(d){return Xt.encode(d)}),Amnt:c.amount},c.preserveDetails?{EdgF:c.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return p(p({},n),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return p(p({},n),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return p(p({},n),{filterID:1180922912});case"fragment":return p(p({},n),{filterID:1181902701});case"mezzotint":return p(p({},n),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:hs.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return p(p({},n),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:Ee(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return p(p({},n),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return p(p({},n),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return p(p({},n),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return p(p({},n),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return p(p({},n),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":ps.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return p(p({},n),{filterID:1399353968});case"sharpen edges":return p(p({},n),{filterID:1399353925});case"sharpen more":return p(p({},n),{filterID:1399353933});case"smart sharpen":return p(p({},n),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:hn(e.filter.amount),"Rds ":Cn(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:vs.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:hn(e.filter.shadow.fadeAmount),Wdth:hn(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:hn(e.filter.highlight.fadeAmount),Wdth:hn(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return p(p({},n),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:hn(e.filter.amount),"Rds ":Cn(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return p(p({},n),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":ms.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return p(p({},n),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return p(p({},n),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:gs.encode(e.filter.type),ExtR:ys.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return p(p({},n),{filterID:1181639749});case"solarize":return p(p({},n),{filterID:1399616122});case"tiles":return p(p({},n),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:bs.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return p(p({},n),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":Ss.encode(e.filter.edge)},filterID:1416782659});case"wind":return p(p({},n),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:_s.encode(e.filter.method),Drct:Fs.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return p(p({},n),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:ws.encode(e.filter.eliminate),IntC:ks.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return p(p({},n),{filterID:1314149187});case"invert":return p(p({},n),{filterID:1231976050});case"custom":return p(p({},n),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return p(p({},n),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":Cn(e.filter)},filterID:1214736464});case"maximum":return p(p({},n),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":Cn(e.filter)},filterID:1299737888});case"minimum":return p(p({},n),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":Cn(e.filter)},filterID:1299082528});case"offset":return p(p({},n),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":xs.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return p(p({},n),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(c){return{_name:"",_classID:"puppetShape",rigidType:c.rigidType,VrsM:1,VrsN:0,originalVertexArray:li(new Float32Array(Lt(c.originalVertexArray))),deformedVertexArray:li(new Float32Array(Lt(c.deformedVertexArray))),indexArray:li(new Uint32Array(c.indexArray)),pinOffsets:Lt(c.pinOffsets),posFinalPins:Lt(c.posFinalPins),pinVertexIndices:c.pinVertexIndices,PinP:Lt(c.pinPosition),PnRt:c.pinRotation,PnOv:c.pinOverlay,PnDp:c.pinDepth,meshQuality:c.meshQuality,meshExpansion:c.meshExpansion,meshRigidity:c.meshRigidity,imageResolution:c.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:c.meshBoundaryPath.pathComponents.map(function(d){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(d.shapeOperation),SbpL:d.paths.map(function(h){return{_name:"",_classID:"Sbpl",Clsp:h.closed,"Pts ":h.points.map(function(y){return{_name:"",_classID:"Pthp",Anch:Tt(y.anchor),"Fwd ":Tt(y.forward),"Bwd ":Tt(y.backward),Smoo:y.smooth}})}})}})},selectedPin:c.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var t={},r=0;r<e.filter.parameters.length;r++){var o=e.filter.parameters[r],l=o.name,s=o.value,u="".concat(an[Math.floor(r/an.length)]).concat(an[r%an.length]);t["PN".concat(u)]=l,t["PT".concat(u)]=0,t["PF".concat(u)]=s}return p(p({},n),{Fltr:p({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},t),filterID:1348620396})}case"oil paint":return p(p({},n),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return p(p({},n),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return p(p({},n),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(Tt),warpedVertices:e.filter.warpedVertices.map(Tt),quads:e.filter.quads.map(function(c){return{indices:c}})},filterID:442});case"curves":return p(p({},n),{Fltr:p({_name:"Curves",_classID:"Crvs",presetKind:Is.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(c){return"curve"in c?{_name:"",_classID:"CrvA",Chnl:c.channels.map(Xt.encode),"Crv ":c.curve.map(function(d){return p({_name:"",_classID:"Pnt ",Hrzn:d.x,Vrtc:d.y},d.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:c.channels.map(Xt.encode),Mpng:c.values}})}:{}),filterID:1131574899});case"brightness/contrast":return p(p({},n),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(e.type))}}function Zs(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var n=e.width,t=e.height,r=0,o=n/3,l=n*2/3,s=n,u=0,c=t/3,d=t*2/3,h=t;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:t,units:"Pixels"},right:{value:n,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:u},{x:o,y:u},{x:l,y:u},{x:s,y:u},{x:r,y:c},{x:o,y:c},{x:l,y:c},{x:s,y:c},{x:r,y:d},{x:o,y:d},{x:l,y:d},{x:s,y:d},{x:r,y:h},{x:o,y:h},{x:l,y:h},{x:s,y:h}]}}}q("SoLd",De("placedLayer"),function(e,n,t){if(Ce(e)!=="soLD")throw new Error("Invalid SoLd type");var r=X(e);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var o=he(e,!0);n.placedLayer={id:o.Idnt,placed:o.placed,type:ht[o.Type],pageNumber:o.PgNm,totalPages:o.totalPages,frameStep:qe(o.frameStep),duration:qe(o.duration),frameCount:o.frameCount,transform:o.Trnf,width:o["Sz  "].Wdth,height:o["Sz  "].Hght,resolution:xe(o.Rslt),warp:Xs(o.quiltWarp||o.warp)},o.nonAffineTransform&&o.nonAffineTransform.some(function(l,s){return l!==o.Trnf[s]})&&(n.placedLayer.nonAffineTransform=o.nonAffineTransform),o.Crop&&(n.placedLayer.crop=o.Crop),o.comp&&(n.placedLayer.comp=o.comp),o.compInfo&&(n.placedLayer.compInfo={compID:o.compInfo.compID,originalCompID:o.compInfo.originalCompID}),o.filterFX&&(n.placedLayer.filter=ic(o.filterFX,e)),H(e,t())},function(e,n){var t,r;ee(e,"soLD"),Q(e,4);var o=n.placedLayer;if(!o.id||typeof o.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(o.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var l=p(p({Idnt:o.id,placed:(t=o.placed)!==null&&t!==void 0?t:o.id,PgNm:o.pageNumber||1,totalPages:o.totalPages||1},o.crop?{Crop:o.crop}:{}),{frameStep:o.frameStep||{numerator:0,denominator:600},duration:o.duration||{numerator:0,denominator:600},frameCount:o.frameCount||0,Annt:16,Type:ht.indexOf(o.type),Trnf:o.transform,nonAffineTransform:(r=o.nonAffineTransform)!==null&&r!==void 0?r:o.transform,warp:Lr(Zs(o)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:o.width||0,Hght:o.height||0},Rslt:o.resolution?Ee(o.resolution,"resolution"):{units:"Density",value:72}});if(o.filter&&(l.filterFX={_name:"",_classID:"filterFXStyle",enab:o.filter.enabled,validAtPosition:o.filter.validAtPosition,filterMaskEnable:o.filter.maskEnabled,filterMaskLinked:o.filter.maskLinked,filterMaskExtendWithWhite:o.filter.maskExtendWithWhite,filterFXList:o.filter.list.map(function(u){return ac(u)})}),o.warp&&Pi(o.warp)){var s=Lr(o.warp);l.quiltWarp=s,l.warp={warpStyle:"warpStyle.warpNone",warpValue:s.warpValue,warpPerspective:s.warpPerspective,warpPerspectiveOther:s.warpPerspectiveOther,warpRotate:s.warpRotate,bounds:s.bounds,uOrder:s.uOrder,vOrder:s.vOrder}}else delete l.quiltWarp;o.comp&&(l.comp=o.comp),o.compInfo&&(l.compInfo=o.compInfo),ve(e,"","null",l,l.quiltWarp?"quiltWarp":"warp")});bt("SoLE","SoLd");q("fxrp",De("referencePoint"),function(e,n){n.referencePoint={x:pn(e),y:pn(e)}},function(e,n){vn(e,n.referencePoint.x),vn(e,n.referencePoint.y)});q("Lr16",function(){return!1},function(e,n,t,r,o){Ii(e,r,o)},function(e,n){});q("Lr32",function(){return!1},function(e,n,t,r,o){Ii(e,r,o)},function(e,n){});q("LMsk",De("userMask"),function(e,n){n.userMask={colorSpace:Ne(e),opacity:R(e)/255};var t=G(e);if(t!==128)throw new Error("Invalid flag value");H(e,1)},function(e,n){var t=n.userMask;Ve(e,t.colorSpace),O(e,bi(t.opacity,0,1)*255),B(e,128),ye(e,1)});q("Patt",function(e){return!e},function(e,n,t){t()&&H(e,t())},function(e,n){});function ho(e){var n=X(e),t=X(e),r=X(e),o=X(e);return{top:n,left:t,bottom:r,right:o}}function po(e,n){Q(e,n.top),Q(e,n.left),Q(e,n.bottom),Q(e,n.right)}q("Anno",function(e){return e.annotations!==void 0},function(e,n,t){var r=R(e),o=R(e);if(r!==2||o!==1)throw new Error("Invalid Anno version");for(var l=E(e),s=[],u=0;u<l;u++){E(e);var c=Ce(e),d=!!G(e);G(e),R(e);var h=ho(e),y=ho(e),b=Ne(e),_=Fn(e,2),F=Fn(e,2),S=Fn(e,2);E(e),Ce(e);var P=E(e),x=void 0;if(c==="txtA")P>=2&&R(e)===65279?x=ki(e,(P-2)/2):(e.offset-=2,x=xi(e,P)),x=x.replace(/\r/g,`
`);else if(c==="sndA")x=ze(e,P);else throw new Error("Unknown annotation type");s.push({type:c==="txtA"?"text":"sound",open:d,iconLocation:h,popupLocation:y,color:b,author:_,name:F,date:S,data:x})}n.annotations=s,H(e,t())},function(e,n){var t=n.annotations;O(e,2),O(e,1),U(e,t.length);for(var r=0,o=t;r<o.length;r++){var l=o[r],s=l.type==="sound";if(s&&!(l.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!s&&typeof l.data!="string")throw new Error("Text annotation data should be string");var u=e.offset;U(e,0),ee(e,s?"sndA":"txtA"),B(e,l.open?1:0),B(e,28),O(e,1),po(e,l.iconLocation),po(e,l.popupLocation),Ve(e,l.color),Wn(e,l.author||"",2),Wn(e,l.name||"",2),Wn(e,l.date||"",2);var c=e.offset;U(e,0),ee(e,s?"sndM":"txtC"),U(e,0);var d=e.offset;if(s)wn(e,l.data);else{O(e,65279);for(var h=l.data.replace(/\n/g,"\r"),y=0;y<h.length;y++)O(e,h.charCodeAt(y))}e.view.setUint32(u,e.offset-u,!1),e.view.setUint32(c,e.offset-c,!1),e.view.setUint32(d-4,e.offset-d,!1)}});function Ys(e){q(e,function(n){var t=n;return!(!t.linkedFiles||!t.linkedFiles.length||e==="lnkE"&&!t.linkedFiles.some(function(r){return r.linkedFile}))},function(n,t,r,o){var l=t;for(l.linkedFiles=l.linkedFiles||[];r()>8;){var s=oi(n),u=n.offset,c=Ce(n),d=X(n),h=Fn(n,1),y=Be(n),b=Ce(n).trim(),_=Ce(n).trim(),F=oi(n),S=G(n),P=S?he(n):void 0,x=c==="liFE"?he(n):void 0,I={id:h,name:y};if(b&&(I.type=b),_&&(I.creator=_),P&&(I.descriptor={compInfo:{compID:P.compInfo.compID,originalCompID:P.compInfo.originalCompID}}),c==="liFE"&&d>3){var C=X(n),M=G(n),z=G(n),$=G(n),Y=G(n),Z=pn(n),ae=Math.floor(Z),le=(Z-ae)*1e3;I.time=new Date(Date.UTC(C,M,z,$,Y,ae,le)).toISOString()}var Ae=c==="liFE"?oi(n):0;for(c==="liFA"&&H(n,8),c==="liFD"&&(I.data=ze(n,F)),d>=5&&(I.childDocumentID=Be(n)),d>=6&&(I.assetModTime=pn(n)),d>=7&&(I.assetLockedState=G(n)),c==="liFE"&&d===2&&(I.data=ze(n,Ae)),n.skipLinkedFilesData&&(I.data=void 0),e==="lnkE"&&(I.linkedFile={fileSize:Ae,name:(x==null?void 0:x["Nm  "])||"",fullPath:(x==null?void 0:x.fullPath)||"",originalPath:(x==null?void 0:x.originalPath)||"",relativePath:(x==null?void 0:x.relPath)||""}),l.linkedFiles.push(I);s%4;)s++;n.offset=u+s}H(n,r())},function(n,t){for(var r,o,l,s,u,c,d,h,y,b=t,_=0,F=b.linkedFiles;_<F.length;_++){var S=F[_];if(e==="lnkE"==!!S.linkedFile){var P=2;S.assetLockedState!=null?P=7:S.assetModTime!=null?P=6:S.childDocumentID!=null?P=5:e=="lnkE"&&(P=3),si(n,0);var x=n.offset;if(ee(n,e==="lnkE"?"liFE":S.data?"liFD":"liFA"),Q(n,P),!S.id||typeof S.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(S.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(Wn(n,S.id,1),tt(n,S.name||""),ee(n,S.type?"".concat(S.type,"    ").substring(0,4):"    "),ee(n,S.creator?"".concat(S.creator,"    ").substring(0,4):"\0\0\0\0"),si(n,S.data?S.data.byteLength:0),S.descriptor&&S.descriptor.compInfo){var I={compInfo:{compID:S.descriptor.compInfo.compID,originalCompID:S.descriptor.compInfo.originalCompID}};B(n,1),ve(n,"","null",I)}else B(n,0);if(e==="lnkE"){var I={descVersion:2,"Nm  ":(o=(r=S.linkedFile)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"",fullPath:(s=(l=S.linkedFile)===null||l===void 0?void 0:l.fullPath)!==null&&s!==void 0?s:"",originalPath:(c=(u=S.linkedFile)===null||u===void 0?void 0:u.originalPath)!==null&&c!==void 0?c:"",relPath:(h=(d=S.linkedFile)===null||d===void 0?void 0:d.relativePath)!==null&&h!==void 0?h:""};ve(n,"","ExternalFileLink",I);var C=S.time?new Date(S.time):new Date;Q(n,C.getUTCFullYear()),B(n,C.getUTCMonth()),B(n,C.getUTCDate()),B(n,C.getUTCHours()),B(n,C.getUTCMinutes()),vn(n,C.getUTCSeconds()+C.getUTCMilliseconds()/1e3)}S.data?wn(n,S.data):si(n,((y=S.linkedFile)===null||y===void 0?void 0:y.fileSize)||0),P>=5&&tt(n,S.childDocumentID||""),P>=6&&vn(n,S.assetModTime||0),P>=7&&B(n,S.assetLockedState||0);var M=n.offset-x;for(n.view.setUint32(x-4,M,!1);M%4;)M++,B(n,0)}}})}Ys("lnk2");Ys("lnkE");bt("lnkD","lnk2");bt("lnk3","lnk2");q("pths",De("pathList"),function(e,n){he(e,!0),n.pathList=[]},function(e,n){var t={pathList:[]};ve(e,"","pathsDataClass",t)});q("lyvr",De("version"),function(e,n){return n.version=E(e)},function(e,n){return U(e,n.version)});q("lfxs",function(){return!1},function(e,n,t){var r=E(e);if(r!==0)throw new Error("Invalid lfxs version");var o=he(e);n.effects=qt(o,!!e.logMissingFeatures),H(e,t())},function(e,n,t,r){var o=Kt(n.effects,!!r.logMissingFeatures,!0);U(e,0),ve(e,"","null",o)});function Ze(e){return function(n){return!!n.adjustment&&n.adjustment.type===e}}q("brit",Ze("brightness/contrast"),function(e,n,t){n.adjustment||(n.adjustment={type:"brightness/contrast",brightness:de(e),contrast:de(e),meanValue:de(e),labColorOnly:!!G(e),useLegacy:!0}),H(e,t())},function(e,n){var t,r=n.adjustment;Se(e,r.brightness||0),Se(e,r.contrast||0),Se(e,(t=r.meanValue)!==null&&t!==void 0?t:127),B(e,r.labColorOnly?1:0),ye(e,1)});function _r(e){var n=de(e),t=de(e),r=de(e),o=de(e),l=de(e)/100;return{shadowInput:n,highlightInput:t,shadowOutput:r,highlightOutput:o,midtoneInput:l}}function Rt(e,n){Se(e,n.shadowInput),Se(e,n.highlightInput),Se(e,n.shadowOutput),Se(e,n.highlightOutput),Se(e,Math.round(n.midtoneInput*100))}q("levl",Ze("levels"),function(e,n,t){if(R(e)!==2)throw new Error("Invalid levl version");n.adjustment=p(p({},n.adjustment),{type:"levels",rgb:_r(e),red:_r(e),green:_r(e),blue:_r(e)}),H(e,t())},function(e,n){var t=n.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};O(e,2),Rt(e,t.rgb||r),Rt(e,t.red||r),Rt(e,t.blue||r),Rt(e,t.green||r);for(var o=0;o<59;o++)Rt(e,r)});function Fr(e){for(var n=R(e),t=[],r=0;r<n;r++){var o=de(e),l=de(e);t.push({input:l,output:o})}return t}function Vn(e,n){O(e,n.length);for(var t=0,r=n;t<r.length;t++){var o=r[t];O(e,o.output),O(e,o.input)}}q("curv",Ze("curves"),function(e,n,t){if(G(e),R(e)!==1)throw new Error("Invalid curv version");R(e);var r=R(e),o={type:"curves"};r&1&&(o.rgb=Fr(e)),r&2&&(o.red=Fr(e)),r&4&&(o.green=Fr(e)),r&8&&(o.blue=Fr(e)),n.adjustment=p(p({},n.adjustment),o),H(e,t())},function(e,n){var t=n.adjustment,r=t.rgb,o=t.red,l=t.green,s=t.blue,u=0,c=0;r&&r.length&&(u|=1,c++),o&&o.length&&(u|=2,c++),l&&l.length&&(u|=4,c++),s&&s.length&&(u|=8,c++),B(e,0),O(e,1),O(e,0),O(e,u),r&&r.length&&Vn(e,r),o&&o.length&&Vn(e,o),l&&l.length&&Vn(e,l),s&&s.length&&Vn(e,s),ee(e,"Crv "),O(e,4),O(e,0),O(e,c),r&&r.length&&(O(e,0),Vn(e,r)),o&&o.length&&(O(e,1),Vn(e,o)),l&&l.length&&(O(e,2),Vn(e,l)),s&&s.length&&(O(e,3),Vn(e,s)),ye(e,2)});q("expA",Ze("exposure"),function(e,n,t){if(R(e)!==1)throw new Error("Invalid expA version");n.adjustment=p(p({},n.adjustment),{type:"exposure",exposure:yn(e),offset:yn(e),gamma:yn(e)}),H(e,t())},function(e,n){var t=n.adjustment;O(e,1),bn(e,t.exposure),bn(e,t.offset),bn(e,t.gamma),ye(e,2)});q("vibA",Ze("vibrance"),function(e,n,t){var r=he(e);n.adjustment={type:"vibrance"},r.vibrance!==void 0&&(n.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(n.adjustment.saturation=r.Strt),H(e,t())},function(e,n){var t=n.adjustment,r={};t.vibrance!==void 0&&(r.vibrance=t.vibrance),t.saturation!==void 0&&(r.Strt=t.saturation),ve(e,"","null",r)});function $n(e){return{a:de(e),b:de(e),c:de(e),d:de(e),hue:de(e),saturation:de(e),lightness:de(e)}}function et(e,n){var t=n||{};Se(e,t.a||0),Se(e,t.b||0),Se(e,t.c||0),Se(e,t.d||0),Se(e,t.hue||0),Se(e,t.saturation||0),Se(e,t.lightness||0)}q("hue2",Ze("hue/saturation"),function(e,n,t){if(R(e)!==2)throw new Error("Invalid hue2 version");n.adjustment=p(p({},n.adjustment),{type:"hue/saturation",master:$n(e),reds:$n(e),yellows:$n(e),greens:$n(e),cyans:$n(e),blues:$n(e),magentas:$n(e)}),H(e,t())},function(e,n){var t=n.adjustment;O(e,2),et(e,t.master),et(e,t.reds),et(e,t.yellows),et(e,t.greens),et(e,t.cyans),et(e,t.blues),et(e,t.magentas)});function ui(e){return{cyanRed:de(e),magentaGreen:de(e),yellowBlue:de(e)}}function ci(e,n){Se(e,n.cyanRed||0),Se(e,n.magentaGreen||0),Se(e,n.yellowBlue||0)}q("blnc",Ze("color balance"),function(e,n,t){n.adjustment={type:"color balance",shadows:ui(e),midtones:ui(e),highlights:ui(e),preserveLuminosity:!!G(e)},H(e,t())},function(e,n){var t=n.adjustment;ci(e,t.shadows||{}),ci(e,t.midtones||{}),ci(e,t.highlights||{}),B(e,t.preserveLuminosity?1:0),ye(e,1)});q("blwh",Ze("black & white"),function(e,n,t){var r=he(e);n.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(n.adjustment.tintColor=Sn(r.tintColor)),H(e,t())},function(e,n){var t=n.adjustment,r={"Rd  ":t.reds||0,Yllw:t.yellows||0,"Grn ":t.greens||0,"Cyn ":t.cyans||0,"Bl  ":t.blues||0,Mgnt:t.magentas||0,useTint:!!t.useTint,tintColor:_n(t.tintColor),bwPresetKind:t.presetKind||0,blackAndWhitePresetFileName:t.presetFileName||""};ve(e,"","null",r)});q("phfl",Ze("photo filter"),function(e,n,t){var r=R(e);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var o;r===2?o=Ne(e):o={l:X(e)/100,a:X(e)/100,b:X(e)/100},n.adjustment={type:"photo filter",color:o,density:E(e)/100,preserveLuminosity:!!G(e)},H(e,t())},function(e,n){var t=n.adjustment;O(e,2),Ve(e,t.color||{l:0,a:0,b:0}),U(e,(t.density||0)*100),B(e,t.preserveLuminosity?1:0),ye(e,3)});function wr(e){var n=de(e),t=de(e),r=de(e);H(e,2);var o=de(e);return{red:n,green:t,blue:r,constant:o}}function Bt(e,n){var t=n||{};Se(e,t.red),Se(e,t.green),Se(e,t.blue),ye(e,2),Se(e,t.constant)}q("mixr",Ze("channel mixer"),function(e,n,t){if(R(e)!==1)throw new Error("Invalid mixr version");var r=n.adjustment=p(p({},n.adjustment),{type:"channel mixer",monochrome:!!R(e)});r.monochrome||(r.red=wr(e),r.green=wr(e),r.blue=wr(e)),r.gray=wr(e),H(e,t())},function(e,n){var t=n.adjustment;O(e,1),O(e,t.monochrome?1:0),t.monochrome?(Bt(e,t.gray),ye(e,30)):(Bt(e,t.red),Bt(e,t.green),Bt(e,t.blue),Bt(e,t.gray))});var vo=ne("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),mo=ne("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),kr=ne("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});q("clrL",Ze("color lookup"),function(e,n,t){if(R(e)!==1)throw new Error("Invalid clrL version");var r=he(e);n.adjustment={type:"color lookup"};var o=n.adjustment;r.lookupType!==void 0&&(o.lookupType=vo.decode(r.lookupType)),r["Nm  "]!==void 0&&(o.name=r["Nm  "]),r.Dthr!==void 0&&(o.dither=r.Dthr),r.profile!==void 0&&(o.profile=r.profile),r.LUTFormat!==void 0&&(o.lutFormat=mo.decode(r.LUTFormat)),r.dataOrder!==void 0&&(o.dataOrder=kr.decode(r.dataOrder)),r.tableOrder!==void 0&&(o.tableOrder=kr.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(o.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(o.lut3DFileName=r.LUT3DFileName),H(e,t())},function(e,n){var t=n.adjustment,r={};t.lookupType!==void 0&&(r.lookupType=vo.encode(t.lookupType)),t.name!==void 0&&(r["Nm  "]=t.name),t.dither!==void 0&&(r.Dthr=t.dither),t.profile!==void 0&&(r.profile=t.profile),t.lutFormat!==void 0&&(r.LUTFormat=mo.encode(t.lutFormat)),t.dataOrder!==void 0&&(r.dataOrder=kr.encode(t.dataOrder)),t.tableOrder!==void 0&&(r.tableOrder=kr.encode(t.tableOrder)),t.lut3DFileData!==void 0&&(r.LUT3DFileData=t.lut3DFileData),t.lut3DFileName!==void 0&&(r.LUT3DFileName=t.lut3DFileName),O(e,1),ve(e,"","null",r)});q("nvrt",Ze("invert"),function(e,n,t){n.adjustment={type:"invert"},H(e,t())},function(){});q("post",Ze("posterize"),function(e,n,t){n.adjustment={type:"posterize",levels:R(e)},H(e,t())},function(e,n){var t,r=n.adjustment;O(e,(t=r.levels)!==null&&t!==void 0?t:4),ye(e,2)});q("thrs",Ze("threshold"),function(e,n,t){n.adjustment={type:"threshold",level:R(e)},H(e,t())},function(e,n){var t,r=n.adjustment;O(e,(t=r.level)!==null&&t!==void 0?t:128),ye(e,2)});var go=["","","","rgb","hsb","","lab"];q("grdm",Ze("gradient map"),function(e,n,t){var r=R(e);if(r!==1&&r!==3)throw new Error("Invalid grdm version");var o={type:"gradient map",gradientType:"solid"};o.reverse=!!G(e),o.dither=!!G(e);var l=!!G(e);if(e.offset--,l){var s=Ce(e);o.method=yt.decode(s)}o.name=Be(e),o.colorStops=[],o.opacityStops=[];for(var u=R(e),c=0;c<u;c++)o.colorStops.push({location:E(e),midpoint:E(e)/100,color:Ne(e)}),H(e,2);for(var d=R(e),c=0;c<d;c++)o.opacityStops.push({location:E(e),midpoint:E(e)/100,opacity:R(e)/255});var h=R(e);if(h!==2)throw new Error("Invalid grdm expansion count");var y=R(e);o.smoothness=y/4096;var b=R(e);if(b!==32)throw new Error("Invalid grdm length");o.gradientType=R(e)?"noise":"solid",o.randomSeed=E(e),o.addTransparency=!!R(e),o.restrictColors=!!R(e),o.roughness=E(e)/4096,o.colorModel=go[R(e)]||"rgb",o.min=[R(e)/32768,R(e)/32768,R(e)/32768,R(e)/32768],o.max=[R(e)/32768,R(e)/32768,R(e)/32768,R(e)/32768],H(e,t());for(var _=0,F=o.colorStops;_<F.length;_++){var S=F[_];S.location/=y}for(var P=0,x=o.opacityStops;P<x.length;P++){var S=x[P];S.location/=y}n.adjustment=o},function(e,n){var t,r,o,l=n.adjustment;O(e,l.method!==void 0?3:1),B(e,l.reverse?1:0),B(e,l.dither?1:0),l.method!==void 0&&ee(e,yt.encode(l.method)),tt(e,l.name||""),O(e,l.colorStops&&l.colorStops.length||0);for(var s=Math.round(((t=l.smoothness)!==null&&t!==void 0?t:1)*4096),u=0,c=l.colorStops||[];u<c.length;u++){var d=c[u];U(e,Math.round(d.location*s)),U(e,Math.round(d.midpoint*100)),Ve(e,d.color),ye(e,2)}O(e,l.opacityStops&&l.opacityStops.length||0);for(var h=0,y=l.opacityStops||[];h<y.length;h++){var d=y[h];U(e,Math.round(d.location*s)),U(e,Math.round(d.midpoint*100)),O(e,Math.round(d.opacity*255))}O(e,2),O(e,s),O(e,32),O(e,l.gradientType==="noise"?1:0),U(e,l.randomSeed||0),O(e,l.addTransparency?1:0),O(e,l.restrictColors?1:0),U(e,Math.round(((r=l.roughness)!==null&&r!==void 0?r:1)*4096));var b=go.indexOf((o=l.colorModel)!==null&&o!==void 0?o:"rgb");O(e,b===-1?3:b);for(var _=0;_<4;_++)O(e,Math.round((l.min&&l.min[_]||0)*32768));for(var _=0;_<4;_++)O(e,Math.round((l.max&&l.max[_]||0)*32768));ye(e,4)});function On(e){return{c:de(e),m:de(e),y:de(e),k:de(e)}}function Ln(e,n){var t=n||{};Se(e,t.c),Se(e,t.m),Se(e,t.y),Se(e,t.k)}q("selc",Ze("selective color"),function(e,n){if(R(e)!==1)throw new Error("Invalid selc version");var t=R(e)?"absolute":"relative";H(e,8),n.adjustment={type:"selective color",mode:t,reds:On(e),yellows:On(e),greens:On(e),cyans:On(e),blues:On(e),magentas:On(e),whites:On(e),neutrals:On(e),blacks:On(e)}},function(e,n){var t=n.adjustment;O(e,1),O(e,t.mode==="absolute"?1:0),ye(e,8),Ln(e,t.reds),Ln(e,t.yellows),Ln(e,t.greens),Ln(e,t.cyans),Ln(e,t.blues),Ln(e,t.magentas),Ln(e,t.whites),Ln(e,t.neutrals),Ln(e,t.blacks)});q("CgEd",function(e){var n=e.adjustment;return n?n.type==="brightness/contrast"&&!n.useLegacy||(n.type==="levels"||n.type==="curves"||n.type==="exposure"||n.type==="channel mixer"||n.type==="hue/saturation")&&n.presetFileName!==void 0:!1},function(e,n,t){var r=he(e);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?n.adjustment=p(p({},n.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?n.adjustment=p(p({},n.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?n.adjustment=p(p({},n.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):n.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},H(e,t())},function(e,n){var t,r,o,l,s=n.adjustment;if(s.type==="levels"||s.type==="exposure"||s.type==="hue/saturation"){var u={Vrsn:1,presetKind:(t=s.presetKind)!==null&&t!==void 0?t:1,presetFileName:s.presetFileName||""};ve(e,"","null",u)}else if(s.type==="curves"){var u={Vrsn:1,curvesPresetKind:(r=s.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:s.presetFileName||""};ve(e,"","null",u)}else if(s.type==="channel mixer"){var u={Vrsn:1,mixerPresetKind:(o=s.presetKind)!==null&&o!==void 0?o:1,mixerPresetFileName:s.presetFileName||""};ve(e,"","null",u)}else if(s.type==="brightness/contrast"){var u={Vrsn:1,Brgh:s.brightness||0,Cntr:s.contrast||0,means:(l=s.meanValue)!==null&&l!==void 0?l:127,"Lab ":!!s.labColorOnly,useLegacy:!!s.useLegacy,Auto:!!s.auto};ve(e,"","null",u)}else throw new Error("Unhandled CgEd case")});function oc(e){var n=[];function t(r){var o;if(r.children)for(var l=0,s=r.children;l<s.length;l++){var u=s[l];((o=u.text)===null||o===void 0?void 0:o.index)!==void 0&&(n[u.text.index]=u),t(u)}}return t(e),n}q("Txt2",De("engineData"),function(e,n,t,r){var o=ze(e,t());n.engineData=Zt.fromByteArray(o);var l=oc(r),s=Rs(o),u=Qu(s),c=u.ResourceDict.TextFrameSet;if(c)for(var d=0;d<c.length;d++){var h=l[d];c[d].path&&(h!=null&&h.text)&&(h.text.textPath=c[d].path)}},function(e,n){var t=Zt.toByteArray(n.engineData);wn(e,t)});q("FEid",De("filterEffectsMasks"),function(e,n,t){var r=X(e);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(n.filterEffectsMasks=[];t()>8;){if(E(e))throw new Error("filterEffects: 64 bit length is not supported");var o=E(e),l=e.offset+o,s=Fn(e,1),u=X(e);if(u!==1)throw new Error("Invalid filterEffect version ".concat(u));if(E(e))throw new Error("filterEffect: 64 bit length is not supported");E(e);for(var c=X(e),d=X(e),h=X(e),y=X(e),b=X(e),_=X(e),F=[],S=0;S<_+2;S++){var P=X(e);if(P){if(E(e))throw new Error("filterEffect: 64 bit length is not supported");var x=E(e);if(!x)throw new Error("filterEffect: Empty channel");var I=R(e),C=ze(e,x-2);F.push({compressionMode:I,data:C})}else F.push(void 0)}if(n.filterEffectsMasks.push({id:s,top:c,left:d,bottom:h,right:y,depth:b,channels:F}),e.offset<l&&G(e)){var M=X(e),z=X(e),$=X(e),Y=X(e);if(E(e))throw new Error("filterEffect: 64 bit length is not supported");var Z=E(e),I=R(e),C=ze(e,Z-2);n.filterEffectsMasks[n.filterEffectsMasks.length-1].extra={top:M,left:z,bottom:$,right:Y,compressionMode:I,data:C}}e.offset=l;for(var ae=o;ae%4;)e.offset++,ae++}},function(e,n){var t;Q(e,3);for(var r=0,o=n.filterEffectsMasks;r<o.length;r++){var l=o[r];U(e,0),U(e,0);var s=e.offset;Wn(e,l.id,1),Q(e,1),U(e,0),U(e,0);var u=e.offset;Q(e,l.top),Q(e,l.left),Q(e,l.bottom),Q(e,l.right),Q(e,l.depth);var c=Math.max(0,l.channels.length-2);Q(e,c);for(var d=0;d<c+2;d++){var h=l.channels[d];Q(e,h?1:0),h&&(U(e,0),U(e,h.data.length+2),O(e,h.compressionMode),wn(e,h.data))}e.view.setUint32(u-4,e.offset-u,!1);var y=(t=n.filterEffectsMasks[n.filterEffectsMasks.length-1])===null||t===void 0?void 0:t.extra;y&&(B(e,1),Q(e,y.top),Q(e,y.left),Q(e,y.bottom),Q(e,y.right),U(e,0),U(e,y.data.byteLength+2),O(e,y.compressionMode),wn(e,y.data));var b=e.offset-s;for(e.view.setUint32(s-4,b,!1);b%4;)ye(e,1),b++}});bt("FXid","FEid");q("FMsk",De("filterMask"),function(e,n){n.filterMask={colorSpace:Ne(e),opacity:R(e)/255}},function(e,n){var t;Ve(e,n.filterMask.colorSpace),O(e,bi((t=n.filterMask.opacity)!==null&&t!==void 0?t:1,0,1)*255)});q("artd",function(e){return e.artboards!==void 0},function(e,n,t){var r=he(e);n.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:Sn(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},H(e,t())},function(e,n){var t,r,o,l,s,u=n.artboards,c={"Cnt ":u.count,autoExpandOffset:u.autoExpandOffset?{Hrzn:u.autoExpandOffset.horizontal,Vrtc:u.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:u.origin?{Hrzn:u.origin.horizontal,Vrtc:u.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(t=u.autoExpandEnabled)!==null&&t!==void 0?t:!0,autoNestEnabled:(r=u.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(o=u.autoPositionEnabled)!==null&&o!==void 0?o:!0,shrinkwrapOnSaveEnabled:(l=u.shrinkwrapOnSaveEnabled)!==null&&l!==void 0?l:!0,docDefaultNewArtboardBackgroundColor:_n(u.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(s=u.docDefaultNewArtboardBackgroundType)!==null&&s!==void 0?s:1};ve(e,"","null",c,"artd")});function Ks(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return Array.isArray(n)&&n.length>1})}q("lfx2",function(e){return e.effects!==void 0&&!Ks(e.effects)},function(e,n,t){var r=E(e);if(r!==0)throw new Error("Invalid lfx2 version");var o=he(e);n.effects=qt(o,!!e.logMissingFeatures),H(e,t())},function(e,n,t,r){var o=Kt(n.effects,!!r.logMissingFeatures,!0);U(e,0),ve(e,"","null",o)});q("cinf",De("compositorUsed"),function(e,n,t){var r=he(e);function o(l){return l.split(".")[1]}n.compositorUsed={description:r.description,reason:r.reason,engine:o(r.Engn)},r.Vrsn&&(n.compositorUsed.version=r.Vrsn),r.psVersion&&(n.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(n.compositorUsed.enableCompCore=o(r.enableCompCore)),r.enableCompCoreGPU&&(n.compositorUsed.enableCompCoreGPU=o(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(n.compositorUsed.enableCompCoreThreads=o(r.enableCompCoreThreads)),r.compCoreSupport&&(n.compositorUsed.compCoreSupport=o(r.compCoreSupport)),r.compCoreGPUSupport&&(n.compositorUsed.compCoreGPUSupport=o(r.compCoreGPUSupport)),H(e,t())},function(e,n){var t=n.compositorUsed,r={Vrsn:t.version||{major:1,minor:0,fix:0}};t.photoshopVersion&&(r.psVersion=t.photoshopVersion),r.description=t.description,r.reason=t.reason,r.Engn="Engn.".concat(t.engine),t.enableCompCore&&(r.enableCompCore="enable.".concat(t.enableCompCore)),t.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(t.enableCompCoreGPU)),t.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(t.enableCompCoreThreads)),t.compCoreSupport&&(r.compCoreSupport="reason.".concat(t.compCoreSupport)),t.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(t.compCoreGPUSupport)),ve(e,"","null",r)});q("extn",function(e){return e._extn!==void 0},function(e,n){he(e)},function(e,n){});q("iOpa",De("fillOpacity"),function(e,n){n.fillOpacity=G(e)/255,H(e,3)},function(e,n){B(e,n.fillOpacity*255),ye(e,3)});q("brst",De("channelBlendingRestrictions"),function(e,n,t){for(n.channelBlendingRestrictions=[];t()>4;)n.channelBlendingRestrictions.push(X(e))},function(e,n){for(var t=0,r=n.channelBlendingRestrictions;t<r.length;t++){var o=r[t];Q(e,o)}});q("tsly",De("transparencyShapesLayer"),function(e,n){n.transparencyShapesLayer=!!G(e),H(e,3)},function(e,n){B(e,n.transparencyShapesLayer?1:0),ye(e,3)});var Hn=function(){return Hn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Hn.apply(this,arguments)};function qs(e){e===void 0&&(e=4096);var n=new ArrayBuffer(e),t=new DataView(n),r=0;return{buffer:n,view:t,offset:r,tempBuffer:void 0}}function sc(e){return e.buffer.slice(0,e.offset)}function lc(e){return new Uint8Array(e.buffer,0,e.offset)}function B(e,n){var t=Bn(e,1);e.view.setUint8(t,n)}function Se(e,n){var t=Bn(e,2);e.view.setInt16(t,n,!1)}function O(e,n){var t=Bn(e,2);e.view.setUint16(t,n,!1)}function uc(e,n){var t=Bn(e,2);e.view.setUint16(t,n,!0)}function Q(e,n){var t=Bn(e,4);e.view.setInt32(t,n,!1)}function yo(e,n){var t=Bn(e,4);e.view.setInt32(t,n,!0)}function U(e,n){var t=Bn(e,4);e.view.setUint32(t,n,!1)}function bn(e,n){var t=Bn(e,4);e.view.setFloat32(t,n,!1)}function vn(e,n){var t=Bn(e,8);e.view.setFloat64(t,n,!1)}function on(e,n){Q(e,n*65536)}function gn(e,n){Q(e,n*(1<<24))}function wn(e,n){if(n){tl(e,e.offset+n.length);var t=new Uint8Array(e.buffer);t.set(n,e.offset),e.offset+=n.length}}function ye(e,n){for(var t=0;t<n;t++)B(e,0)}function ee(e,n){if(n.length!==4)throw new Error("Invalid signature: '".concat(n,"'"));for(var t=0;t<4;t++)B(e,n.charCodeAt(t))}function Wn(e,n,t){var r=n.length;if(r>255)throw new Error("String too long");B(e,r);for(var o=0;o<r;o++){var l=n.charCodeAt(o);B(e,l<128?l:63)}for(;++r%t;)B(e,0)}function cc(e,n){for(var t=0;t<n.length;t++)O(e,n.charCodeAt(t))}function fc(e,n){for(var t=0;t<n.length;t++)uc(e,n.charCodeAt(t))}function sn(e,n){U(e,n.length),cc(e,n)}function tt(e,n){U(e,n.length+1);for(var t=0;t<n.length;t++)O(e,n.charCodeAt(t));O(e,0)}function Js(e){e===void 0&&(e=[]);for(var n=0,t=0,r=e;t<r.length;t++){var o=r[t];if(o.canvas||o.imageData){var l=Ei(o),s=l.width,u=l.height;n=Math.max(n,2*u+2*s*u)}o.children&&(n=Math.max(n,Js(o.children)))}return n}function He(e,n,t,r,o){r===void 0&&(r=!1),o===void 0&&(o=!1),o&&U(e,0);var l=e.offset;U(e,0),t();for(var s=e.offset-l-4,u=s;u%n!==0;)B(e,0),u++;r&&(s=u),e.view.setUint32(l,s,!1)}function Qs(e){var n;(n=e.children)===null||n===void 0||n.forEach(Qs);var t=e.imageData;if(t&&(t.data instanceof Uint32Array||t.data instanceof Uint16Array))throw new Error("imageData has incorrect bitDepth");if("mask"in e&&e.mask){var r=e.mask.imageData;if(r&&(r.data instanceof Uint32Array||r.data instanceof Uint16Array))throw new Error("mask imageData has incorrect bitDepth")}}function $s(e,n,t){var r;if(t===void 0&&(t={}),!(+n.width>0&&+n.height>0))throw new Error("Invalid document size");if((n.width>3e4||n.height>3e4)&&!t.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var o=(r=n.bitsPerChannel)!==null&&r!==void 0?r:8;if(o!==8)throw new Error("bitsPerChannel other than 8 are not supported for writing");Qs(n);var l=Hn({},n.imageResources),s=Hn(Hn({},t),{layerIds:new Set,layerToId:new Map});s.generateThumbnail&&(l.thumbnail=gc(n));var u=n.imageData;if(!u&&n.canvas&&(u=n.canvas.getContext("2d").getImageData(0,0,n.canvas.width,n.canvas.height)),u&&(n.width!==u.width||n.height!==u.height))throw new Error("Document canvas must have the same size as document");var c=!!u&&Ao(u),d=Math.max(Js(n.children),8*n.width*n.height+2*n.height);e.tempBuffer=new Uint8Array(d),ee(e,"8BPS"),O(e,t.psb?2:1),ye(e,6),O(e,c?4:3),U(e,n.height),U(e,n.width),O(e,o),O(e,3),He(e,1,function(){var z,$,Y;if(n.palette){for(var Z=0;Z<256;Z++)B(e,((z=n.palette[Z])===null||z===void 0?void 0:z.r)||0);for(var Z=0;Z<256;Z++)B(e,(($=n.palette[Z])===null||$===void 0?void 0:$.g)||0);for(var Z=0;Z<256;Z++)B(e,((Y=n.palette[Z])===null||Y===void 0?void 0:Y.b)||0)}});var h=[];nl(h,n.children),h.length||h.push({}),l.layersGroup=h.map(function(z){return z.linkGroup||0}),l.layerGroupsEnabledId=h.map(function(z){return z.linkGroupEnabled==!1?0:1}),He(e,1,function(){for(var z=function(ae){for(var le=ae.has(l),Ae=le===!1?0:le===!0?1:le,Me=function(re){ee(e,"8BIM"),O(e,ae.key),Wn(e,"",2),He(e,2,function(){return ae.write(e,l,re)})},V=0;V<Ae;V++)Me(V)},$=0,Y=Cs;$<Y.length;$++){var Z=Y[$];z(Z)}}),He(e,2,function(){dc(e,h,n,c,s),vc(e,n.globalLayerMaskInfo),el(e,n,n,s)},void 0,!!s.psb);var y=c?[0,1,2,3]:[0,1,2],b=u?u.width:n.width,_=u?u.height:n.height,F={data:new Uint8Array(b*_*4),width:b,height:_};O(e,1);{if(u&&F.data.set(new Uint8Array(u.data.buffer,u.data.byteOffset,u.data.byteLength)),c)for(var S=F.width*F.height*4,P=F.data,x=0;x<S;x+=4){var I=P[x+3];if(I!=0&&I!=255){var C=I/255,M=255*(1-C);P[x+0]=P[x+0]*C+M,P[x+1]=P[x+1]*C+M,P[x+2]=P[x+2]*C+M}}wn(e,Si(e.tempBuffer,F,y,!!t.psb))}}function dc(e,n,t,r,o){He(e,4,function(){var l;Se(e,r?-n.length:n.length);for(var s=n.map(function(P,x){return yc(e.tempBuffer,P,x===0,o)}),u=function(P){var x=P.layer,I=P.top,C=P.left,M=P.bottom,z=P.right,$=P.channels;Q(e,I),Q(e,C),Q(e,M),Q(e,z),O(e,$.length);for(var Y=0,Z=$;Y<Z.length;Y++){var ae=Z[Y];Se(e,ae.channelId),o.psb&&U(e,0),U(e,ae.length)}ee(e,"8BIM"),ee(e,Mr[x.blendMode]||"norm"),B(e,Math.round(bi((l=x.opacity)!==null&&l!==void 0?l:1,0,1)*255)),B(e,x.clipping?1:0);var le=8;x.transparencyProtected&&(le|=1),x.hidden&&(le|=2),(x.vectorMask||x.sectionDivider&&x.sectionDivider.type!==0||x.adjustment)&&(le|=16),x.effectsOpen&&(le|=32),B(e,le),B(e,0),He(e,1,function(){hc(e,x,P),pc(e,x),Wn(e,(x.name||"").substring(0,255),4),el(e,x,t,o)})},c=0,d=s;c<d.length;c++){var h=d[c];u(h)}for(var y=0,b=s;y<b.length;y++)for(var h=b[y],_=0,F=h.channels;_<F.length;_++){var S=F[_];O(e,S.compression),S.buffer&&wn(e,S.buffer)}},!0,o.psb)}function hc(e,n,t){var r=n.mask,o=n.realMask;He(e,1,function(){if(!(!r&&!o)){var l=0,s=0,u=0;r&&(r.userMaskDensity!==void 0&&(l|=1),r.userMaskFeather!==void 0&&(l|=2),r.vectorMaskDensity!==void 0&&(l|=4),r.vectorMaskFeather!==void 0&&(l|=8),r.disabled&&(s|=2),r.positionRelativeToLayer&&(s|=1),r.fromVectorData&&(s|=8),l&&(s|=16));var c=t.mask||{};if(Q(e,c.top||0),Q(e,c.left||0),Q(e,c.bottom||0),Q(e,c.right||0),B(e,r&&r.defaultColor||0),B(e,s),o){o.disabled&&(u|=2),o.positionRelativeToLayer&&(u|=1),o.fromVectorData&&(u|=8);var d=t.realMask||{};B(e,u),B(e,o.defaultColor||0),Q(e,d.top||0),Q(e,d.left||0),Q(e,d.bottom||0),Q(e,d.right||0)}l&&r&&(B(e,l),r.userMaskDensity!==void 0&&B(e,Math.round(r.userMaskDensity*255)),r.userMaskFeather!==void 0&&vn(e,r.userMaskFeather),r.vectorMaskDensity!==void 0&&B(e,Math.round(r.vectorMaskDensity*255)),r.vectorMaskFeather!==void 0&&vn(e,r.vectorMaskFeather)),ye(e,2)}})}function xr(e,n){B(e,n[0]),B(e,n[1]),B(e,n[2]),B(e,n[3])}function pc(e,n){He(e,1,function(){var t=n.blendingRanges;if(t){xr(e,t.compositeGrayBlendSource),xr(e,t.compositeGraphBlendDestinationRange);for(var r=0,o=t.ranges;r<o.length;r++){var l=o[r];xr(e,l.sourceRange),xr(e,l.destRange)}}})}function vc(e,n){He(e,1,function(){n&&(O(e,n.overlayColorSpace),O(e,n.colorSpace1),O(e,n.colorSpace2),O(e,n.colorSpace3),O(e,n.colorSpace4),O(e,n.opacity*255),B(e,n.kind),ye(e,3))})}function el(e,n,t,r){for(var o=function(c){var d=c.key;if(d==="Txt2"&&r.invalidateTextLayers)return"continue";if(d==="vmsk"&&r.psb&&(d="vsms"),c.has(n)){var h=r.psb&&Co.indexOf(d)!==-1,y=d!=="Txt2"&&d!=="cinf"&&d!=="extn"&&d!=="CAI "&&d!=="OCIO",b=d==="Txt2"||d==="luni"||d==="vmsk"||d==="artb"||d==="artd"||d==="vogk"||d==="SoLd"||d==="lnk2"||d==="vscg"||d==="vsms"||d==="GdFl"||d==="lmfx"||d==="lrFX"||d==="cinf"||d==="PlLd"||d==="Anno"||d==="CAI "||d==="OCIO"||d==="GenI"||d==="FEid";ee(e,h?"8B64":"8BIM"),ee(e,d),He(e,b?4:2,function(){c.write(e,n,t,r)},y,h)}},l=0,s=js;l<s.length;l++){var u=s[l];o(u)}}function nl(e,n){if(n)for(var t=0,r=n;t<r.length;t++){var o=r[t];if(o.children&&o.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(o.children&&o.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");o.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),nl(e,o.children),e.push(Hn(Hn({},o),{blendMode:o.blendMode==="pass through"?"normal":o.blendMode,sectionDivider:{type:o.opened===!1?2:1,key:Mr[o.blendMode]||"pass",subType:0}}))):e.push(Hn({},o))}}function mc(e,n){var t=e.buffer.byteLength;do t*=2;while(n>t);var r=new ArrayBuffer(t),o=new Uint8Array(r),l=new Uint8Array(e.buffer);o.set(l),e.buffer=r,e.view=new DataView(e.buffer)}function tl(e,n){n>e.buffer.byteLength&&mc(e,n)}function Bn(e,n){var t=e.offset;return tl(e,e.offset+=n),t}function gc(e){var n=Yt(10,10),t=1;e.width>e.height?(n.width=160,n.height=Math.floor(e.height*(n.width/e.width)),t=n.width/e.width):(n.height=160,n.width=Math.floor(e.width*(n.height/e.height)),t=n.height/e.height);var r=n.getContext("2d");return r.scale(t,t),e.imageData?r.drawImage(Cr(e.imageData),0,0):e.canvas&&r.drawImage(e.canvas,0,0),n}function bo(e,n,t,r,o,l){var s=r.top|0,u=r.left|0,c=r.right|0,d=r.bottom|0,h=Ei(r),y=h.width,b=h.height,_=r.imageData;if(!_&&r.canvas&&y&&b&&(_=r.canvas.getContext("2d").getImageData(0,0,y,b)),y&&b&&_){if(c=u+y,d=s+b,_.width!==y||_.height!==b)throw new Error("Invalid imageData dimentions");var F=void 0,S=void 0;o.compress?(F=Po(_,[0]),S=2):(F=Si(e,_,[0],!!o.psb),S=1),n.channels.push({channelId:l?-3:-2,compression:S,buffer:F,length:2+F.length})}n[l?"realMask":"mask"]={top:s,left:u,right:c,bottom:d}}function yc(e,n,t,r){var o=Sc(e,n,t,r);return n.mask&&bo(e,o,n,n.mask,r,!1),n.realMask&&bo(e,o,n,n.realMask,r,!0),o}function Ei(e){var n=e.canvas,t=e.imageData;return t||n||{width:0,height:0}}function bc(e,n,t,r,o){if(e.data instanceof Uint32Array||e.data instanceof Uint16Array)throw new Error("imageData has incorrect bit depth");for(var l=mt(r,o),s=e.data,u=l.data,c=0;c<o;c++)for(var d=0;d<r;d++){var h=(d+n+(c+t)*e.width)*4,y=(d+c*r)*4;u[y]=s[h],u[y+1]=s[h+1],u[y+2]=s[h+2],u[y+3]=s[h+3]}return l}function Sc(e,n,t,r){var o=n.top|0,l=n.left|0,s=n.right|0,u=n.bottom|0,c=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],d=Ei(n),h=d.width,y=d.height;if(!(n.canvas||n.imageData)||!h||!y)return s=l,u=o,{layer:n,top:o,left:l,right:s,bottom:u,channels:c};s=l+h,u=o+y;var b=n.imageData||n.canvas.getContext("2d").getImageData(0,0,h,y);if(r.trimImageData){var _=_c(b);if(_.left!==0||_.top!==0||_.right!==b.width||_.bottom!==b.height){if(l+=_.left,o+=_.top,s-=b.width-_.right,u-=b.height-_.bottom,h=s-l,y=u-o,!h||!y)return{layer:n,top:o,left:l,right:s,bottom:u,channels:c};b=bc(b,_.left,_.top,h,y)}}var F=[0,1,2];return(!t||r.noBackground||n.mask||Ao(b)||au)&&F.unshift(-1),c=F.map(function(S){var P=Do(S,!1),x,I;return r.compress?(x=Po(b,[P]),I=2):(x=Si(e,b,[P],!!r.psb),I=1),{channelId:S,compression:I,buffer:x,length:2+x.length}}),{layer:n,top:o,left:l,right:s,bottom:u,channels:c}}function So(e,n,t,r){for(var o=e.data,l=e.width,s=(n*l+t)*4+3|0,u=s+(r-t)*4|0,c=s;c<u;c=c+4|0)if(o[c]!==0)return!1;return!0}function _o(e,n,t,r){for(var o=e.data,l=e.width,s=l*4|0,u=t*s+n*4+3|0,c=t,d=u;c<r;c++,d=d+s|0)if(o[d]!==0)return!1;return!0}function _c(e){for(var n=0,t=0,r=e.width,o=e.height;n<o&&So(e,n,t,r);)n++;for(;o>n&&So(e,o-1,t,r);)o--;for(;t<r&&_o(e,t,n,o);)t++;for(;r>t&&_o(e,r-1,n,o);)r--;return{top:n,left:t,right:r,bottom:o}}function Ve(e,n){n?"r"in n?(O(e,0),O(e,Math.round(n.r*257)),O(e,Math.round(n.g*257)),O(e,Math.round(n.b*257)),O(e,0)):"fr"in n?(O(e,0),O(e,Math.round(n.fr*255*257)),O(e,Math.round(n.fg*255*257)),O(e,Math.round(n.fb*255*257)),O(e,0)):"l"in n?(O(e,7),Se(e,Math.round(n.l*1e4)),Se(e,Math.round(n.a<0?n.a*12800:n.a*12700)),Se(e,Math.round(n.b<0?n.b*12800:n.b*12700)),O(e,0)):"h"in n?(O(e,1),O(e,Math.round(n.h*65535)),O(e,Math.round(n.s*65535)),O(e,Math.round(n.b*65535)),O(e,0)):"c"in n?(O(e,2),O(e,Math.round(n.c*257)),O(e,Math.round(n.m*257)),O(e,Math.round(n.y*257)),O(e,Math.round(n.k*257))):(O(e,8),O(e,Math.round(n.k*1e4/255)),ye(e,6)):(O(e,0),ye(e,8))}var Fc=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],wc={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function Xe(e){return{control:Fc[e.bVTy],steps:e.fStp,jitter:se(e.jitter),minimum:se(e["Mnm "])}}function Fo(e){var n={size:yu(e.Dmtr,"Pixels"),angle:jt(e.Angl),roundness:se(e.Rndn),spacingOn:e.Intr,spacing:se(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(n.name=e["Nm  "]),e.Hrdn&&(n.hardness=se(e.Hrdn)),e.sampledData&&(n.sampledData=e.sampledData),n}function Ic(e,n){var t,r,o,l;n===void 0&&(n={});var s=Er(e.buffer,e.byteOffset,e.byteLength),u=de(s),c=[],d=[],h=[];if(u===1||u===2)throw new Error("Unsupported ABR version (".concat(u,")"));if(u===6||u===7||u===9||u===10){var y=de(s);if(y!==1&&y!==2)throw new Error("Unsupported ABR minor version");for(;s.offset<s.view.byteLength;){Dn(s,"8BIM");var b=Ce(s),_=E(s),F=s.offset+_;switch(b){case"samp":{for(;s.offset<F;){for(var S=E(s);S&3;)S++;var P=s.offset+S,x=Fn(s,1);H(s,y===1?10:264);var I=X(s),C=X(s),M=X(s)-I,z=X(s)-C;if(z<=0||M<=0)throw new Error("Invalid bounds");var $=de(s),Y=G(s),Z=new Uint8Array(z*M);if($===8)if(Y===0)Z.set(ze(s,Z.byteLength));else if(Y===1)dt(s,{width:z,height:M,data:Z},z,M,$,1,[0],!1);else throw new Error("Invalid compression");else if($===16)if(Y===0)for(var ae=0;ae<Z.byteLength;ae++)Z[ae]=R(s)>>8;else throw Y===1?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");else throw new Error("Invalid depth");c.push({id:x,bounds:{x:C,y:I,w:z,h:M},alpha:Z}),s.offset=P}break}case"desc":{for(var le=he(s,!0),Ae=0,Me=le.Brsh;Ae<Me.length;Ae++){var V=Me[Ae],re={name:V["Nm  "],shape:Fo(V.Brsh),spacing:se(V.Spcn),wetEdges:V.Wtdg,noise:V.Nose,useBrushSize:V.useBrushSize};V.interpretation!=null&&(re.interpretation=V.interpretation),V.protectTexture!=null&&(re.protectTexture=V.protectTexture),V.useTipDynamics&&(re.shapeDynamics={tiltScale:se(V.tiltScale),sizeDynamics:Xe(V.szVr),angleDynamics:Xe(V.angleDynamics),roundnessDynamics:Xe(V.roundnessDynamics),flipX:V.flipX,flipY:V.flipY,brushProjection:V.brushProjection,minimumDiameter:se(V.minimumDiameter),minimumRoundness:se(V.minimumRoundness)}),V.useScatter&&(re.scatter={count:V["Cnt "],bothAxes:V.bothAxes,countDynamics:Xe(V.countDynamics),scatterDynamics:Xe(V.scatterDynamics)}),V.useTexture&&V.Txtr&&(re.texture={id:V.Txtr.Idnt,name:V.Txtr["Nm  "],blendMode:Je.decode(V.textureBlendMode),depth:se(V.textureDepth),depthMinimum:se(V.minimumDepth),depthDynamics:Xe(V.textureDepthDynamics),scale:se(V.textureScale),invert:V.InvT,brightness:V.textureBrightness,contrast:V.textureContrast});var Pe=V.dualBrush;Pe&&Pe.useDualBrush&&(re.dualBrush={flip:Pe.Flip,shape:Fo(Pe.Brsh),blendMode:Je.decode(Pe.BlnM),useScatter:Pe.useScatter,spacing:se(Pe.Spcn),count:Pe["Cnt "],bothAxes:Pe.bothAxes,countDynamics:Xe(Pe.countDynamics),scatterDynamics:Xe(Pe.scatterDynamics)}),V.useColorDynamics&&(re.colorDynamics={foregroundBackground:Xe(V.clVr),hue:se(V["H   "]),saturation:se(V.Strt),brightness:se(V.Brgh),purity:se(V.purity),perTip:V.colorDynamicsPerTip}),V.usePaintDynamics&&(re.transfer={flowDynamics:Xe(V.prVr),opacityDynamics:Xe(V.opVr),wetnessDynamics:Xe(V.wtVr),mixDynamics:Xe(V.mxVr)}),V.useBrushPose&&(re.brushPose={overrideAngle:V.overridePoseAngle,overrideTiltX:V.overridePoseTiltX,overrideTiltY:V.overridePoseTiltY,overridePressure:V.overridePosePressure,pressure:se(V.brushPosePressure),tiltX:V.brushPoseTiltX,tiltY:V.brushPoseTiltY,angle:V.brushPoseAngle});var K=V.toolOptions;K&&(re.toolOptions={type:wc[K._classID]||"brush",brushPreset:K.brushPreset,flow:(t=K.flow)!==null&&t!==void 0?t:100,smooth:(r=K.Smoo)!==null&&r!==void 0?r:0,mode:Je.decode(K["Md  "]||"BlnM.Nrml"),opacity:(o=K.Opct)!==null&&o!==void 0?o:100,smoothing:!!K.smoothing,smoothingValue:K.smoothingValue||0,smoothingRadiusMode:!!K.smoothingRadiusMode,smoothingCatchup:!!K.smoothingCatchup,smoothingCatchupAtEnd:!!K.smoothingCatchupAtEnd,smoothingZoomCompensation:!!K.smoothingZoomCompensation,pressureSmoothing:!!K.pressureSmoothing,usePressureOverridesSize:!!K.usePressureOverridesSize,usePressureOverridesOpacity:!!K.usePressureOverridesOpacity,useLegacy:!!K.useLegacy},K.prVr&&(re.toolOptions.flowDynamics=Xe(K.prVr)),K.opVr&&(re.toolOptions.opacityDynamics=Xe(K.opVr)),K.szVr&&(re.toolOptions.sizeDynamics=Xe(K.szVr)),"wetness"in K&&(re.toolOptions.wetness=K.wetness),"dryness"in K&&(re.toolOptions.dryness=K.dryness),"mix"in K&&(re.toolOptions.mix=K.mix),"autoFill"in K&&(re.toolOptions.autoFill=K.autoFill),"autoClean"in K&&(re.toolOptions.autoClean=K.autoClean),"loadSolidColorOnly"in K&&(re.toolOptions.loadSolidColorOnly=K.loadSolidColorOnly),"sampleAllLayers"in K&&(re.toolOptions.sampleAllLayers=K.sampleAllLayers),"SmdF"in K&&(re.toolOptions.smudgeFingerPainting=K.SmdF),"SmdS"in K&&(re.toolOptions.smudgeSampleAllLayers=K.SmdS),"Prs "in K&&(re.toolOptions.strength=K["Prs "]),"SmdF"in K&&(re.toolOptions.smudgeFingerPainting=K.SmdF),"SmdS"in K&&(re.toolOptions.smudgeSampleAllLayers=K.SmdS)),d.push(re)}break}case"patt":{s.offset<F&&(h.push(Bu(s)),s.offset=F);break}case"phry":{var le=he(s);n.logMissingFeatures&&!((l=le.hierarchy)===null||l===void 0)&&l.length&&console.log("unhandled phry section",le);break}default:throw new Error("Invalid brush type: ".concat(b))}for(;_%4;)s.offset++,_++}}else throw new Error("Unsupported ABR version (".concat(u,")"));return{samples:c,patterns:h,brushes:d}}var yi=function(){return yi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yi.apply(this,arguments)};function Cc(e){var n=Er(e.buffer,e.byteOffset,e.byteLength),t={shapes:[]};if(Dn(n,"cush"),E(n)!==2)throw new Error("Invalid version");for(var r=E(n),o=0;o<r;o++){for(var l=Be(n);n.offset%4;)n.offset++;if(E(n)!==1)throw new Error("Invalid shape version");var s=E(n),u=n.offset+s,c=Fn(n,1),d=E(n),h=E(n),y=E(n),b=E(n),_=b-h,F=y-d,S={paths:[]};Ws(n,S,_,F,u-n.offset),t.shapes.push(yi({name:l,id:c,width:_,height:F},S)),n.offset=u}return t}var wo;(function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.RGB=3]="RGB",e[e.CMYK=4]="CMYK",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"})(wo||(wo={}));var ko;(function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.ClosedFolder=2]="ClosedFolder",e[e.BoundingSectionDivider=3]="BoundingSectionDivider"})(ko||(ko={}));var xo;(function(e){e[e.None=0]="None",e[e.Visibility=1]="Visibility",e[e.Position=2]="Position",e[e.Appearance=4]="Appearance"})(xo||(xo={}));var Dc=Zt.fromByteArray;function Ac(e,n){var t="buffer"in e?Er(e.buffer,e.byteOffset,e.byteLength):Er(e);return Du(t,n)}function Pc(e,n){var t=qs();return $s(t,e,n),sc(t)}function kc(e,n){var t=qs();return $s(t,e,n),lc(t)}function Ec(e,n){if(typeof Buffer>"u")throw new Error("Buffer not supported on this platform");return Buffer.from(kc(e,n))}export{wo as ColorMode,xo as LayerCompCapturedInfo,ko as SectionDividerType,Dc as byteArrayToBase64,xc as initializeCanvas,Ic as readAbr,Cc as readCsh,Ac as readPsd,Pc as writePsd,Ec as writePsdBuffer,kc as writePsdUint8Array};
