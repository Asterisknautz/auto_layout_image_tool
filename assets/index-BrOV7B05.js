var e,t={};var r,n=function(){if(e)return t;e=1,t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,a=s(e),o=a[0],l=a[1],d=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,l)),c=0,u=l>0?o-4:o;for(r=0;r<u;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],d[c++]=t>>16&255,d[c++]=t>>8&255,d[c++]=255&t;2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,d[c++]=255&t);1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,d[c++]=t>>8&255,d[c++]=255&t);return d},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,l=n-i;s<l;s+=o)a.push(d(e,s,s+o>l?l:s+o));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=a[o],n[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(l(n));return i.join("")}return n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63,t}(),i={exports:{}};var a=(r||(r=1,function(e){function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=256,n=286,i=30,a=15,o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);const u=new Array(60);t(u);const f=new Array(512);t(f);const h=new Array(256);t(h);const p=new Array(29);t(p);const m=new Array(i);function g(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let v,y,b;function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(m);const k=e=>e<256?f[e]:f[256+(e>>>7)],S=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},_=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},F=(e,t,r)=>{_(e,r[2*t],r[2*t+1])},I=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},x=(e,t,r)=>{const n=new Array(16);let i,o,s=0;for(i=1;i<=a;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=I(n[t]++,t))}},C=e=>{let t;for(t=0;t<n;t++)e.dyn_ltree[2*t]=0;for(t=0;t<i;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},D=e=>{e.bi_valid>8?S(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},A=(e,t,r,n)=>{const i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]},O=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&A(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!A(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},M=(e,t,n)=>{let i,a,l,d,c=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+c++],i+=(255&e.pending_buf[e.sym_buf+c++])<<8,a=e.pending_buf[e.sym_buf+c++],0===i?F(e,a,t):(l=h[a],F(e,l+r+1,t),d=o[l],0!==d&&(a-=p[l],_(e,a,d)),i--,l=k(i),F(e,l,n),d=s[l],0!==d&&(i-=m[l],_(e,i,d)))}while(c<e.sym_next);F(e,256,t)},P=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,l,d,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==r[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):r[2*s+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=c<2?++c:0,r[2*d]=1,e.depth[d]=0,e.opt_len--,i&&(e.static_len-=n[2*d+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)O(e,r,s);d=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],O(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,r[2*d]=r[2*s]+r[2*l],e.depth[d]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,r[2*s+1]=r[2*l+1]=d,e.heap[1]=d++,O(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,d=t.stat_desc.max_length;let c,u,f,h,p,m,g=0;for(h=0;h<=a;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],h=r[2*r[2*u+1]+1]+1,h>d&&(h=d,g++),r[2*u+1]=h,u>n||(e.bl_count[h]++,p=0,u>=l&&(p=s[u-l]),m=r[2*u],e.opt_len+=m*(h+p),o&&(e.static_len+=m*(i[2*u+1]+p)));if(0!==g){do{for(h=d-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[d]--,g-=2}while(g>0);for(h=d;0!==h;h--)for(u=e.bl_count[h];0!==u;)f=e.heap[--c],f>n||(r[2*f+1]!==h&&(e.opt_len+=(h-r[2*f+1])*r[2*f],r[2*f+1]=h),u--)}})(e,t),x(r,c,e.bl_count)},L=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<l&&i===o||(s<d?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))},E=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<l&&i===o)){if(s<d)do{F(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(F(e,i,e.bl_tree),s--),F(e,16,e.bl_tree),_(e,s-3,2)):s<=10?(F(e,17,e.bl_tree),_(e,s-3,3)):(F(e,18,e.bl_tree),_(e,s-11,7));s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}};let T=!1;const R=(e,t,r,n)=>{_(e,0+(n?1:0),3),D(e),S(e,r),S(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var B=(e,t,n,i)=>{let a,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<r;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),P(e,e.l_desc),P(e,e.d_desc),s=(e=>{let t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),P(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=a&&(a=o)):a=o=n+5,n+4<=a&&-1!==t?R(e,t,n,i):4===e.strategy||o===a?(_(e,2+(i?1:0),3),M(e,c,u)):(_(e,4+(i?1:0),3),((e,t,r,n)=>{let i;for(_(e,t-257,5),_(e,r-1,5),_(e,n-4,4),i=0;i<n;i++)_(e,e.bl_tree[2*d[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),M(e,e.dyn_ltree,e.dyn_dtree)),C(e),i&&D(e)},z={_tr_init:e=>{T||((()=>{let e,t,r,d,w;const k=new Array(16);for(r=0,d=0;d<28;d++)for(p[d]=r,e=0;e<1<<o[d];e++)h[r++]=d;for(h[r-1]=d,w=0,d=0;d<16;d++)for(m[d]=w,e=0;e<1<<s[d];e++)f[w++]=d;for(w>>=7;d<i;d++)for(m[d]=w<<7,e=0;e<1<<s[d]-7;e++)f[256+w++]=d;for(t=0;t<=a;t++)k[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,k[8]++;for(;e<=255;)c[2*e+1]=9,e++,k[9]++;for(;e<=279;)c[2*e+1]=7,e++,k[7]++;for(;e<=287;)c[2*e+1]=8,e++,k[8]++;for(x(c,287,k),e=0;e<i;e++)u[2*e+1]=5,u[2*e]=I(e,5);v=new g(c,o,257,n,a),y=new g(u,s,0,i,a),b=new g(new Array(0),l,0,19,7)})(),T=!0),e.l_desc=new w(e.dyn_ltree,v),e.d_desc=new w(e.dyn_dtree,y),e.bl_desc=new w(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,C(e)},_tr_stored_block:R,_tr_flush_block:B,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(h[n]+r+1)]++,e.dyn_dtree[2*k(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{var t;_(e,2,3),F(e,256,c),16===(t=e).bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},N=(e,t,r,n)=>{let i=65535&e,a=e>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16};const U=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var G=(e,t,r,n)=>{const i=U,a=n+r;e^=-1;for(let o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:H,_tr_stored_block:W,_tr_flush_block:X,_tr_tally:Z,_tr_align:K}=z,{Z_NO_FLUSH:Y,Z_PARTIAL_FLUSH:q,Z_FULL_FLUSH:J,Z_FINISH:Q,Z_BLOCK:$,Z_OK:ee,Z_STREAM_END:te,Z_STREAM_ERROR:re,Z_DATA_ERROR:ne,Z_BUF_ERROR:ie,Z_DEFAULT_COMPRESSION:ae,Z_FILTERED:oe,Z_HUFFMAN_ONLY:se,Z_RLE:le,Z_FIXED:de,Z_DEFAULT_STRATEGY:ce,Z_UNKNOWN:ue,Z_DEFLATED:fe}=j,he=258,pe=262,me=42,ge=113,ve=666,ye=(e,t)=>(e.msg=V[t],t),be=e=>2*e-(e>4?9:0),we=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ke=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let Se=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const _e=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Fe=(e,t)=>{X(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_e(e.strm)},Ie=(e,t)=>{e.pending_buf[e.pending++]=t},xe=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ce=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=N(e.adler,t,i,r):2===e.state.wrap&&(e.adler=G(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},De=(e,t)=>{let r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-pe?e.strstart-(e.w_size-pe):0,d=e.window,c=e.w_mask,u=e.prev,f=e.strstart+he;let h=d[a+o-1],p=d[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,d[r+o]===p&&d[r+o-1]===h&&d[r]===d[a]&&d[++r]===d[a+1]){a+=2,r++;do{}while(d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&a<f);if(n=he-(f-a),a=f-he,n>o){if(e.match_start=t,o=n,n>=s)break;h=d[a+o-1],p=d[a+o]}}}while((t=u[t&c])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},Ae=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-pe)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ke(e),n+=t),0===e.strm.avail_in)break;if(r=Ce(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Se(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Se(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<pe&&0!==e.strm.avail_in)},Oe=(e,t)=>{let r,n,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<a&&(0===r&&t!==Q||t===Y||r!==n+e.strm.avail_in))break;o=t===Q&&r===n+e.strm.avail_in?1:0,W(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,_e(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Ce(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Y&&t!==Q&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Ce(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=a||(n||t===Q)&&t!==Y&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=t===Q&&0===e.strm.avail_in&&r===n?1:0,W(e,e.block_start,r,o),e.block_start+=r,_e(e.strm)),o?3:1)},Me=(e,t)=>{let r,n;for(;;){if(e.lookahead<pe){if(Ae(e),e.lookahead<pe&&t===Y)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-pe&&(e.match_length=De(e,r)),e.match_length>=3)if(n=Z(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Se(e,e.ins_h,e.window[e.strstart+1]);else n=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Q?(Fe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Fe(e,!1),0===e.strm.avail_out)?1:2},Pe=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<pe){if(Ae(e),e.lookahead<pe&&t===Y)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-pe&&(e.match_length=De(e,r),e.match_length<=5&&(e.strategy===oe||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Z(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Fe(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=Z(e,0,e.window[e.strstart-1]),n&&Fe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Z(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Q?(Fe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Fe(e,!1),0===e.strm.avail_out)?1:2};function Le(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Ee=[new Le(0,0,0,0,Oe),new Le(4,4,8,4,Me),new Le(4,5,16,8,Me),new Le(4,6,32,32,Me),new Le(4,4,16,16,Pe),new Le(8,16,32,32,Pe),new Le(8,16,128,128,Pe),new Le(8,32,128,256,Pe),new Le(32,128,258,1024,Pe),new Le(32,258,258,4096,Pe)];function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),we(this.dyn_ltree),we(this.dyn_dtree),we(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),we(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),we(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Re=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==me&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ge&&t.status!==ve?1:0},Be=e=>{if(Re(e))return ye(e,re);e.total_in=e.total_out=0,e.data_type=ue;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?me:ge,e.adler=2===t.wrap?0:1,t.last_flush=-2,H(t),ee},ze=e=>{const t=Be(e);var r;return t===ee&&((r=e.state).window_size=2*r.w_size,we(r.head),r.max_lazy_match=Ee[r.level].max_lazy,r.good_match=Ee[r.level].good_length,r.nice_match=Ee[r.level].nice_length,r.max_chain_length=Ee[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Ne=(e,t,r,n,i,a)=>{if(!e)return re;let o=1;if(t===ae&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==fe||n<8||n>15||t<0||t>9||a<0||a>de||8===n&&1!==o)return ye(e,re);8===n&&(n=9);const s=new Te;return e.state=s,s.strm=e,s.status=me,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=r,ze(e)};var Ue={deflateInit:(e,t)=>Ne(e,t,fe,15,8,ce),deflateInit2:Ne,deflateReset:ze,deflateResetKeep:Be,deflateSetHeader:(e,t)=>Re(e)||2!==e.state.wrap?re:(e.state.gzhead=t,ee),deflate:(e,t)=>{if(Re(e)||t>$||t<0)return e?ye(e,re):re;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===ve&&t!==Q)return ye(e,0===e.avail_out?ie:re);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(_e(e),0===e.avail_out)return r.last_flush=-1,ee}else if(0===e.avail_in&&be(t)<=be(n)&&t!==Q)return ye(e,ie);if(r.status===ve&&0!==e.avail_in)return ye(e,ie);if(r.status===me&&0===r.wrap&&(r.status=ge),r.status===me){let t=fe+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=se||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,xe(r,t),0!==r.strstart&&(xe(r,e.adler>>>16),xe(r,65535&e.adler)),e.adler=1,r.status=ge,_e(e),0!==r.pending)return r.last_flush=-1,ee}if(57===r.status)if(e.adler=0,Ie(r,31),Ie(r,139),Ie(r,8),r.gzhead)Ie(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ie(r,255&r.gzhead.time),Ie(r,r.gzhead.time>>8&255),Ie(r,r.gzhead.time>>16&255),Ie(r,r.gzhead.time>>24&255),Ie(r,9===r.level?2:r.strategy>=se||r.level<2?4:0),Ie(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ie(r,255&r.gzhead.extra.length),Ie(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=G(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Ie(r,0),Ie(r,0),Ie(r,0),Ie(r,0),Ie(r,0),Ie(r,9===r.level?2:r.strategy>=se||r.level<2?4:0),Ie(r,3),r.status=ge,_e(e),0!==r.pending)return r.last_flush=-1,ee;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=G(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,_e(e),0!==r.pending)return r.last_flush=-1,ee;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=G(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),_e(e),0!==r.pending)return r.last_flush=-1,ee;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ie(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),_e(e),0!==r.pending)return r.last_flush=-1,ee;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ie(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(_e(e),0!==r.pending))return r.last_flush=-1,ee;Ie(r,255&e.adler),Ie(r,e.adler>>8&255),e.adler=0}if(r.status=ge,_e(e),0!==r.pending)return r.last_flush=-1,ee}if(0!==e.avail_in||0!==r.lookahead||t!==Y&&r.status!==ve){let n=0===r.level?Oe(r,t):r.strategy===se?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(Ae(e),0===e.lookahead)){if(t===Y)return 1;break}if(e.match_length=0,r=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(Fe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Fe(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===le?((e,t)=>{let r,n,i,a;const o=e.window;for(;;){if(e.lookahead<=he){if(Ae(e),e.lookahead<=he&&t===Y)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=e.strstart+he;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=he-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=Z(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(Fe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Fe(e,!1),0===e.strm.avail_out)?1:2})(r,t):Ee[r.level].func(r,t);if(3!==n&&4!==n||(r.status=ve),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),ee;if(2===n&&(t===q?K(r):t!==$&&(W(r,0,0,!1),t===J&&(we(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),_e(e),0===e.avail_out))return r.last_flush=-1,ee}return t!==Q?ee:r.wrap<=0?te:(2===r.wrap?(Ie(r,255&e.adler),Ie(r,e.adler>>8&255),Ie(r,e.adler>>16&255),Ie(r,e.adler>>24&255),Ie(r,255&e.total_in),Ie(r,e.total_in>>8&255),Ie(r,e.total_in>>16&255),Ie(r,e.total_in>>24&255)):(xe(r,e.adler>>>16),xe(r,65535&e.adler)),_e(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ee:te)},deflateEnd:e=>{if(Re(e))return re;const t=e.state.status;return e.state=null,t===ge?ye(e,ne):ee},deflateSetDictionary:(e,t)=>{let r=t.length;if(Re(e))return re;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==me||n.lookahead)return re;if(1===i&&(e.adler=N(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(we(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Ae(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Se(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Ae(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,n.wrap=i,ee},deflateInfo:"pako deflate (from Nodeca project)"};const Ge=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ve=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)Ge(r,t)&&(e[t]=r[t])}}return e},je=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let t=e[n];r.set(t,i),i+=t.length}return r};let He=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Cr){He=!1}const We=new Uint8Array(256);for(let Dr=0;Dr<256;Dr++)We[Dr]=Dr>=252?6:Dr>=248?5:Dr>=240?4:Dr>=224?3:Dr>=192?2:1;We[254]=We[254]=1;var Xe=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},Ze=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const a=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){a[i++]=t;continue}let o=We[t];if(o>4)a[i++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&He)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(a,i)},Ke=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+We[e[r]]>t?r:t},Ye=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const qe=Object.prototype.toString,{Z_NO_FLUSH:Je,Z_SYNC_FLUSH:Qe,Z_FULL_FLUSH:$e,Z_FINISH:et,Z_OK:tt,Z_STREAM_END:rt,Z_DEFAULT_COMPRESSION:nt,Z_DEFAULT_STRATEGY:it,Z_DEFLATED:at}=j;function ot(e){this.options=Ve({level:nt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:it},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let r=Ue.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==tt)throw new Error(V[r]);if(t.header&&Ue.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Xe(t.dictionary):"[object ArrayBuffer]"===qe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Ue.deflateSetDictionary(this.strm,e),r!==tt)throw new Error(V[r]);this._dict_set=!0}}function st(e,t){const r=new ot(t);if(r.push(e,!0),r.err)throw r.msg||V[r.err];return r.result}ot.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?et:Je,"string"==typeof e?r.input=Xe(e):"[object ArrayBuffer]"===qe.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Qe||a===$e)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Ue.deflate(r,a),i===rt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ue.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===tt;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ot.prototype.onData=function(e){this.chunks.push(e)},ot.prototype.onEnd=function(e){e===tt&&(this.result=je(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lt={Deflate:ot,deflate:st,deflateRaw:function(e,t){return(t=t||{}).raw=!0,st(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,st(e,t)}};const dt=16209;var ct=function(e,t){let r,n,i,a,o,s,l,d,c,u,f,h,p,m,g,v,y,b,w,k,S,_,F,I;const x=e.state;r=e.next_in,F=e.input,n=r+(e.avail_in-5),i=e.next_out,I=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=x.dmax,l=x.wsize,d=x.whave,c=x.wnext,u=x.window,f=x.hold,h=x.bits,p=x.lencode,m=x.distcode,g=(1<<x.lenbits)-1,v=(1<<x.distbits)-1;e:do{h<15&&(f+=F[r++]<<h,h+=8,f+=F[r++]<<h,h+=8),y=p[f&g];t:for(;;){if(b=y>>>24,f>>>=b,h-=b,b=y>>>16&255,0===b)I[i++]=65535&y;else{if(!(16&b)){if(!(64&b)){y=p[(65535&y)+(f&(1<<b)-1)];continue t}if(32&b){x.mode=16191;break e}e.msg="invalid literal/length code",x.mode=dt;break e}w=65535&y,b&=15,b&&(h<b&&(f+=F[r++]<<h,h+=8),w+=f&(1<<b)-1,f>>>=b,h-=b),h<15&&(f+=F[r++]<<h,h+=8,f+=F[r++]<<h,h+=8),y=m[f&v];r:for(;;){if(b=y>>>24,f>>>=b,h-=b,b=y>>>16&255,!(16&b)){if(!(64&b)){y=m[(65535&y)+(f&(1<<b)-1)];continue r}e.msg="invalid distance code",x.mode=dt;break e}if(k=65535&y,b&=15,h<b&&(f+=F[r++]<<h,h+=8,h<b&&(f+=F[r++]<<h,h+=8)),k+=f&(1<<b)-1,k>s){e.msg="invalid distance too far back",x.mode=dt;break e}if(f>>>=b,h-=b,b=i-a,k>b){if(b=k-b,b>d&&x.sane){e.msg="invalid distance too far back",x.mode=dt;break e}if(S=0,_=u,0===c){if(S+=l-b,b<w){w-=b;do{I[i++]=u[S++]}while(--b);S=i-k,_=I}}else if(c<b){if(S+=l+c-b,b-=c,b<w){w-=b;do{I[i++]=u[S++]}while(--b);if(S=0,c<w){b=c,w-=b;do{I[i++]=u[S++]}while(--b);S=i-k,_=I}}}else if(S+=c-b,b<w){w-=b;do{I[i++]=u[S++]}while(--b);S=i-k,_=I}for(;w>2;)I[i++]=_[S++],I[i++]=_[S++],I[i++]=_[S++],w-=3;w&&(I[i++]=_[S++],w>1&&(I[i++]=_[S++]))}else{S=i-k;do{I[i++]=I[S++],I[i++]=I[S++],I[i++]=I[S++],w-=3}while(w>2);w&&(I[i++]=I[S++],w>1&&(I[i++]=I[S++]))}break}}break}}while(r<n&&i<o);w=h>>3,r-=w,h-=w<<3,f&=(1<<h)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),x.hold=f,x.bits=h};const ut=15,ft=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var gt=(e,t,r,n,i,a,o,s)=>{const l=s.bits;let d,c,u,f,h,p,m=0,g=0,v=0,y=0,b=0,w=0,k=0,S=0,_=0,F=0,I=null;const x=new Uint16Array(16),C=new Uint16Array(16);let D,A,O,M=null;for(m=0;m<=ut;m++)x[m]=0;for(g=0;g<n;g++)x[t[r+g]]++;for(b=l,y=ut;y>=1&&0===x[y];y--);if(b>y&&(b=y),0===y)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(v=1;v<y&&0===x[v];v++);for(b<v&&(b=v),S=1,m=1;m<=ut;m++)if(S<<=1,S-=x[m],S<0)return-1;if(S>0&&(0===e||1!==y))return-1;for(C[1]=0,m=1;m<ut;m++)C[m+1]=C[m]+x[m];for(g=0;g<n;g++)0!==t[r+g]&&(o[C[t[r+g]]++]=g);if(0===e?(I=M=o,p=20):1===e?(I=ft,M=ht,p=257):(I=pt,M=mt,p=0),F=0,g=0,m=v,h=a,w=b,k=0,u=-1,_=1<<b,f=_-1,1===e&&_>852||2===e&&_>592)return 1;for(;;){D=m-k,o[g]+1<p?(A=0,O=o[g]):o[g]>=p?(A=M[o[g]-p],O=I[o[g]-p]):(A=96,O=0),d=1<<m-k,c=1<<w,v=c;do{c-=d,i[h+(F>>k)+c]=D<<24|A<<16|O}while(0!==c);for(d=1<<m-1;F&d;)d>>=1;if(0!==d?(F&=d-1,F+=d):F=0,g++,0==--x[m]){if(m===y)break;m=t[r+o[g]]}if(m>b&&(F&f)!==u){for(0===k&&(k=b),h+=v,w=m-k,S=1<<w;w+k<y&&(S-=x[w+k],!(S<=0));)w++,S<<=1;if(_+=1<<w,1===e&&_>852||2===e&&_>592)return 1;u=F&f,i[u]=b<<24|w<<16|h-a}}return 0!==F&&(i[h+F]=m-k<<24|64<<16),s.bits=b,0};const{Z_FINISH:vt,Z_BLOCK:yt,Z_TREES:bt,Z_OK:wt,Z_STREAM_END:kt,Z_NEED_DICT:St,Z_STREAM_ERROR:_t,Z_DATA_ERROR:Ft,Z_MEM_ERROR:It,Z_BUF_ERROR:xt,Z_DEFLATED:Ct}=j,Dt=16180,At=16190,Ot=16191,Mt=16192,Pt=16194,Lt=16199,Et=16200,Tt=16206,Rt=16209,Bt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function zt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Dt||t.mode>16211?1:0},Ut=e=>{if(Nt(e))return _t;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Dt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,wt},Gt=e=>{if(Nt(e))return _t;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ut(e)},Vt=(e,t)=>{let r;if(Nt(e))return _t;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?_t:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Gt(e))},jt=(e,t)=>{if(!e)return _t;const r=new zt;e.state=r,r.strm=e,r.window=null,r.mode=Dt;const n=Vt(e,t);return n!==wt&&(e.state=null),n};let Ht,Wt,Xt=!0;const Zt=e=>{if(Xt){Ht=new Int32Array(512),Wt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(gt(1,e.lens,0,288,Ht,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;gt(2,e.lens,0,32,Wt,0,e.work,{bits:5}),Xt=!1}e.lencode=Ht,e.lenbits=9,e.distcode=Wt,e.distbits=5},Kt=(e,t,r,n)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Yt={inflateReset:Gt,inflateReset2:Vt,inflateResetKeep:Ut,inflateInit:e=>jt(e,15),inflateInit2:jt,inflate:(e,t)=>{let r,n,i,a,o,s,l,d,c,u,f,h,p,m,g,v,y,b,w,k,S,_,F=0;const I=new Uint8Array(4);let x,C;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Nt(e)||!e.output||!e.input&&0!==e.avail_in)return _t;r=e.state,r.mode===Ot&&(r.mode=Mt),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=r.hold,c=r.bits,u=s,f=l,_=wt;e:for(;;)switch(r.mode){case Dt:if(0===r.wrap){r.mode=Mt;break}for(;c<16;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(2&r.wrap&&35615===d){0===r.wbits&&(r.wbits=15),r.check=0,I[0]=255&d,I[1]=d>>>8&255,r.check=G(r.check,I,2,0),d=0,c=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=Rt;break}if((15&d)!==Ct){e.msg="unknown compression method",r.mode=Rt;break}if(d>>>=4,c-=4,S=8+(15&d),0===r.wbits&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=Rt;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&d?16189:Ot,d=0,c=0;break;case 16181:for(;c<16;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(r.flags=d,(255&r.flags)!==Ct){e.msg="unknown compression method",r.mode=Rt;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Rt;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&4&r.wrap&&(I[0]=255&d,I[1]=d>>>8&255,r.check=G(r.check,I,2,0)),d=0,c=0,r.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.head&&(r.head.time=d),512&r.flags&&4&r.wrap&&(I[0]=255&d,I[1]=d>>>8&255,I[2]=d>>>16&255,I[3]=d>>>24&255,r.check=G(r.check,I,4,0)),d=0,c=0,r.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&4&r.wrap&&(I[0]=255&d,I[1]=d>>>8&255,r.check=G(r.check,I,2,0)),d=0,c=0,r.mode=16184;case 16184:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&4&r.wrap&&(I[0]=255&d,I[1]=d>>>8&255,r.check=G(r.check,I,2,0)),d=0,c=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(h=r.length,h>s&&(h=s),h&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),S)),512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,h,a)),s-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;h=0;do{S=n[a+h++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,h,a)),s-=h,a+=h,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;h=0;do{S=n[a+h++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,h,a)),s-=h,a+=h,S)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(4&r.wrap&&d!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Rt;break}d=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ot;break;case 16189:for(;c<32;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}e.adler=r.check=Bt(d),d=0,c=0,r.mode=At;case At:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,St;e.adler=r.check=1,r.mode=Ot;case Ot:if(t===yt||t===bt)break e;case Mt:if(r.last){d>>>=7&c,c-=7&c,r.mode=Tt;break}for(;c<3;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}switch(r.last=1&d,d>>>=1,c-=1,3&d){case 0:r.mode=16193;break;case 1:if(Zt(r),r.mode=Lt,t===bt){d>>>=2,c-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Rt}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Rt;break}if(r.length=65535&d,d=0,c=0,r.mode=Pt,t===bt)break e;case Pt:r.mode=16195;case 16195:if(h=r.length,h){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;i.set(n.subarray(a,a+h),o),s-=h,a+=h,l-=h,o+=h,r.length-=h;break}r.mode=Ot;break;case 16196:for(;c<14;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(r.nlen=257+(31&d),d>>>=5,c-=5,r.ndist=1+(31&d),d>>>=5,c-=5,r.ncode=4+(15&d),d>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Rt;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.lens[D[r.have++]]=7&d,d>>>=3,c-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},_=gt(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,_){e.msg="invalid code lengths set",r.mode=Rt;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;F=r.lencode[d&(1<<r.lenbits)-1],g=F>>>24,v=F>>>16&255,y=65535&F,!(g<=c);){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(y<16)d>>>=g,c-=g,r.lens[r.have++]=y;else{if(16===y){for(C=g+2;c<C;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(d>>>=g,c-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=Rt;break}S=r.lens[r.have-1],h=3+(3&d),d>>>=2,c-=2}else if(17===y){for(C=g+3;c<C;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}d>>>=g,c-=g,S=0,h=3+(7&d),d>>>=3,c-=3}else{for(C=g+7;c<C;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}d>>>=g,c-=g,S=0,h=11+(127&d),d>>>=7,c-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Rt;break}for(;h--;)r.lens[r.have++]=S}}if(r.mode===Rt)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Rt;break}if(r.lenbits=9,x={bits:r.lenbits},_=gt(1,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,_){e.msg="invalid literal/lengths set",r.mode=Rt;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},_=gt(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,_){e.msg="invalid distances set",r.mode=Rt;break}if(r.mode=Lt,t===bt)break e;case Lt:r.mode=Et;case Et:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,ct(e,f),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=r.hold,c=r.bits,r.mode===Ot&&(r.back=-1);break}for(r.back=0;F=r.lencode[d&(1<<r.lenbits)-1],g=F>>>24,v=F>>>16&255,y=65535&F,!(g<=c);){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(v&&!(240&v)){for(b=g,w=v,k=y;F=r.lencode[k+((d&(1<<b+w)-1)>>b)],g=F>>>24,v=F>>>16&255,y=65535&F,!(b+g<=c);){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}d>>>=b,c-=b,r.back+=b}if(d>>>=g,c-=g,r.back+=g,r.length=y,0===v){r.mode=16205;break}if(32&v){r.back=-1,r.mode=Ot;break}if(64&v){e.msg="invalid literal/length code",r.mode=Rt;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(C=r.extra;c<C;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;F=r.distcode[d&(1<<r.distbits)-1],g=F>>>24,v=F>>>16&255,y=65535&F,!(g<=c);){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(!(240&v)){for(b=g,w=v,k=y;F=r.distcode[k+((d&(1<<b+w)-1)>>b)],g=F>>>24,v=F>>>16&255,y=65535&F,!(b+g<=c);){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}d>>>=b,c-=b,r.back+=b}if(d>>>=g,c-=g,r.back+=g,64&v){e.msg="invalid distance code",r.mode=Rt;break}r.offset=y,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(C=r.extra;c<C;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Rt;break}r.mode=16204;case 16204:if(0===l)break e;if(h=f-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Rt;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=i,p=o-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do{i[o++]=m[p++]}while(--h);0===r.length&&(r.mode=Et);break;case 16205:if(0===l)break e;i[o++]=r.length,l--,r.mode=Et;break;case Tt:if(r.wrap){for(;c<32;){if(0===s)break e;s--,d|=n[a++]<<c,c+=8}if(f-=l,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?G(r.check,i,f,o-f):N(r.check,i,f,o-f)),f=l,4&r.wrap&&(r.flags?d:Bt(d))!==r.check){e.msg="incorrect data check",r.mode=Rt;break}d=0,c=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,d+=n[a++]<<c,c+=8}if(4&r.wrap&&d!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Rt;break}d=0,c=0}r.mode=16208;case 16208:_=kt;break e;case Rt:_=Ft;break e;case 16210:return It;default:return _t}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,(r.wsize||f!==e.avail_out&&r.mode<Rt&&(r.mode<Tt||t!==vt))&&Kt(e,e.output,e.next_out,f-e.avail_out),u-=e.avail_in,f-=e.avail_out,e.total_in+=u,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?G(r.check,i,f,e.next_out-f):N(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ot?128:0)+(r.mode===Lt||r.mode===Pt?256:0),(0===u&&0===f||t===vt)&&_===wt&&(_=xt),_},inflateEnd:e=>{if(Nt(e))return _t;let t=e.state;return t.window&&(t.window=null),e.state=null,wt},inflateGetHeader:(e,t)=>{if(Nt(e))return _t;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,wt):_t},inflateSetDictionary:(e,t)=>{const r=t.length;let n,i,a;return Nt(e)?_t:(n=e.state,0!==n.wrap&&n.mode!==At?_t:n.mode===At&&(i=1,i=N(i,t,r,0),i!==n.check)?Ft:(a=Kt(e,t,r,r),a?(n.mode=16210,It):(n.havedict=1,wt)))},inflateInfo:"pako inflate (from Nodeca project)"},qt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Jt=Object.prototype.toString,{Z_NO_FLUSH:Qt,Z_FINISH:$t,Z_OK:er,Z_STREAM_END:tr,Z_NEED_DICT:rr,Z_STREAM_ERROR:nr,Z_DATA_ERROR:ir,Z_MEM_ERROR:ar}=j;function or(e){this.options=Ve({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let r=Yt.inflateInit2(this.strm,t.windowBits);if(r!==er)throw new Error(V[r]);if(this.header=new qt,Yt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Xe(t.dictionary):"[object ArrayBuffer]"===Jt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Yt.inflateSetDictionary(this.strm,t.dictionary),r!==er)))throw new Error(V[r])}function sr(e,t){const r=new or(t);if(r.push(e),r.err)throw r.msg||V[r.err];return r.result}or.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?$t:Qt,"[object ArrayBuffer]"===Jt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Yt.inflate(r,o),a===rr&&i&&(a=Yt.inflateSetDictionary(r,i),a===er?a=Yt.inflate(r,o):a===ir&&(a=rr));r.avail_in>0&&a===tr&&r.state.wrap>0&&0!==e[r.next_in];)Yt.inflateReset(r),a=Yt.inflate(r,o);switch(a){case nr:case ir:case rr:case ar:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||a===tr))if("string"===this.options.to){let e=Ke(r.output,r.next_out),t=r.next_out-e,i=Ze(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==er||0!==s){if(a===tr)return a=Yt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},or.prototype.onData=function(e){this.chunks.push(e)},or.prototype.onEnd=function(e){e===er&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=je(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lr={Inflate:or,inflate:sr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,sr(e,t)},ungzip:sr};const{Deflate:dr,deflate:cr,deflateRaw:ur,gzip:fr}=lt,{Inflate:hr,inflate:pr,inflateRaw:mr,ungzip:gr}=lr;var vr=dr,yr=cr,br=ur,wr=fr,kr=hr,Sr=pr,_r=mr,Fr=gr,Ir=j,xr={Deflate:vr,deflate:yr,deflateRaw:br,gzip:wr,Inflate:kr,inflate:Sr,inflateRaw:_r,ungzip:Fr,constants:Ir};e.Deflate=vr,e.Inflate=kr,e.constants=Ir,e.default=xr,e.deflate=yr,e.deflateRaw=br,e.gzip=wr,e.inflate=Sr,e.inflateRaw=_r,e.ungzip=Fr,Object.defineProperty(e,"__esModule",{value:!0})}(i.exports)),i.exports),o={},s={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(s).forEach(function(e){return o[s[e]]=e});var l,d,c,u,f,h,p,m,g,v,y=["none","red","orange","yellow","green","blue","violet","gray"],b=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function w(e,t,r){var n=function(e){var t={};return Object.keys(e).forEach(function(r){return t[e[r]]=r}),t}(r);return{decode:function(e){var r=e.split(".")[1];if(r&&!n[r])throw new Error("Unrecognized value for enum: '".concat(e,"'"));return n[r]||t},encode:function(n){if(n&&!r[n])throw new Error("Invalid value for enum: '".concat(n,"'"));return"".concat(e,".").concat(r[n]||r[t])}}}function k(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}}function S(e,t,r){return e<t?t:e>r?r:e}function _(e){for(var t=e.width*e.height*4,r=3;r<t;r+=4)if(255!==e.data[r])return!0;return!1}function F(e){for(var t=e.data,r=t instanceof Float32Array?1:t instanceof Uint16Array?65535:255,n=0,i=0|t.length;n<i;n=n+4|0)t[n+0]=0,t[n+1]=0,t[n+2]=0,t[n+3]=r}function I(e){var t,r=D(e.width,e.height);if(e.data instanceof Uint8ClampedArray)t=e;else{t=M(e.width,e.height);var n=e.data,i=t.data;if(n instanceof Float32Array)for(var a=0,o=n.length;a<o;a+=4)i[a+0]=Math.round(255*Math.pow(n[a+0],1/2.2)),i[a+1]=Math.round(255*Math.pow(n[a+1],1/2.2)),i[a+2]=Math.round(255*Math.pow(n[a+2],1/2.2)),i[a+3]=Math.round(255*n[a+3]);else{var s=n instanceof Uint16Array?8:0;for(a=0,o=n.length;a<o;a++)i[a]=n[a]>>>s}}return r.getContext("2d").putImageData(t,0,0),r}function x(e,t,r,n){var i=t.data,a=t.width,o=t.height;if(a&&o){for(var s=4*a|0,l=0,d=r.length*(n?4:2)*o|0,c=0,u=r;c<u.length;c++)for(var f=u[c],h=0,p=0|f;h<o;h++){var m=h*s|0,g=m+s|0,v=g+f-4|0,y=v-4|0,b=d;for(p=m+f|0;p<g;p=p+4|0)if(p<y){var w=i[p],k=i[p=p+4|0],S=i[p=p+4|0];if(w===k&&w===S){for(var _=3;_<128&&p<v&&i[p+4|0]===w;)_=_+1|0,p=p+4|0;e[d++]=1-_,e[d++]=w}else{var F=d,I=!0;_=1;for(e[d++]=0,e[d++]=w;p<v&&_<128;){if(w=k,k=S,S=i[p=p+4|0],w===k&&w===S){p=p-12|0,I=!1;break}_++,e[d++]=w}I&&(_<127?(e[d++]=k,e[d++]=S,_+=2):_<128?(e[d++]=k,_++,p=p-4|0):p=p-8|0),e[F]=_-1}}else p===v?(e[d++]=0,e[d++]=i[p]):(e[d++]=1,e[d++]=i[p],p=p+4|0,e[d++]=i[p]);var x=d-b;n&&(e[l++]=x>>24&255,e[l++]=x>>16&255),e[l++]=x>>8&255,e[l++]=255&x}return e.slice(0,d)}}function C(e,t){for(var r=e.data,n=e.width*e.height,i=new Uint8Array(n),o=[],s=0,l=0,d=t;l<d.length;l++){for(var c=0,u=h=d[l];c<n;c++,u+=4)i[c]=r[u];var f=a.deflate(i);o.push(f),s+=f.byteLength}if(o.length>0){f=new Uint8Array(s);for(var h=0,p=0,m=o;p<m.length;p++){var g=m[p];f.set(g,h),h+=g.byteLength}return f}return o[0]}(d=l||(l={}))[d.RGB=0]="RGB",d[d.HSB=1]="HSB",d[d.CMYK=2]="CMYK",d[d.Lab=7]="Lab",d[d.Grayscale=8]="Grayscale",(u=c||(c={}))[u.PositionRelativeToLayer=1]="PositionRelativeToLayer",u[u.LayerMaskDisabled=2]="LayerMaskDisabled",u[u.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",u[u.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",u[u.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt",(h=f||(f={}))[h.UserMaskDensity=1]="UserMaskDensity",h[h.UserMaskFeather=2]="UserMaskFeather",h[h.VectorMaskDensity=4]="VectorMaskDensity",h[h.VectorMaskFeather=8]="VectorMaskFeather",(m=p||(p={}))[m.Color0=0]="Color0",m[m.Color1=1]="Color1",m[m.Color2=2]="Color2",m[m.Color3=3]="Color3",m[m.Transparency=-1]="Transparency",m[m.UserMask=-2]="UserMask",m[m.RealUserMask=-3]="RealUserMask",(v=g||(g={}))[v.RawData=0]="RawData",v[v.RleCompressed=1]="RleCompressed",v[v.ZipWithoutPrediction=2]="ZipWithoutPrediction",v[v.ZipWithPrediction=3]="ZipWithPrediction";var D=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},A=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")},O=void 0,M=function(e,t){return O||(O=D(1,1)),O.getContext("2d").createImageData(e,t)};function P(e,t,r){D=e,A=t||A,M=r||M}function L(e){return 4294967168&e?4294965248&e?4294901760&e?4:3:2:1}function E(e,t,r){var n=L(r);switch(n){case 1:e[t]=r;break;case 2:e[t]=r>>6&31|192,e[t+1]=63&r|128;break;case 3:e[t]=r>>12&15|224,e[t+1]=r>>6&63|128,e[t+2]=63&r|128;break;default:e[t]=r>>18&7|240,e[t+1]=r>>12&63|128,e[t+2]=r>>6&63|128,e[t+3]=63&r|128}return n}function T(e){if(e.length>1e3&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);var t=new Uint8Array(function(e){for(var t=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n>=55296&&n<=56319){if(r+1<e.length){var i=e.charCodeAt(r+1);56320==(64512&i)&&(r++,t+=L(((1023&n)<<10)+(1023&i)+65536))}}else t+=L(n)}return t}(e));return function(e,t,r){for(var n=0;n<r.length;n++){var i=r.charCodeAt(n);if(i>=55296&&i<=56319){if(n+1<r.length){var a=r.charCodeAt(n+1);56320==(64512&a)&&(n++,t+=E(e,t,((1023&i)<<10)+(1023&a)+65536))}}else t+=E(e,t,i)}}(t,0,e),t}function R(e,t){if(t>=e.length)throw Error("Invalid byte index");var r=e[t];if(128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function B(e){if(e.byteLength>1e3&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t=[],r=0;r<e.length;){var n=e[r++],i=void 0;if(128&n)if(192==(224&n)){if((i=(31&n)<<6|R(e,r++))<128)throw Error("Invalid continuation byte")}else if(224==(240&n)){if((i=(15&n)<<12|R(e,r++)<<6|R(e,r++))<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else{if(240!=(248&n))throw Error("Invalid UTF-8 detected");if((i=(15&n)<<18|R(e,r++)<<12|R(e,r++)<<6|R(e,r++))<65536||i>1114111)throw Error("Invalid continuation byte")}else i=n;i>65535&&(i-=65536,t.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|1023&i),t.push(String.fromCharCode(i))}return t.join("")}"undefined"!=typeof document&&(D=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},A=function(e){var t=new Image;t.src="data:image/jpeg;base64,"+n.fromByteArray(e);var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r});var z=function(){return z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},z.apply(this,arguments)};var N,U,G={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},V=(N=G,U={},Object.keys(N).forEach(function(e){return U[N[e]]=e}),U);function j(e,t){return{name:e,classID:t}}for(var H=j("","null"),W={strokeStyleContent:j("","solidColorLayer"),printProofSetup:j("Proof Setup","proofSetup"),Grad:j("Gradient","Grdn"),Trnf:j("Transform","Trnf"),patternFill:j("","patternFill"),ebbl:j("","ebbl"),SoFi:j("","SoFi"),GrFl:j("","GrFl"),sdwC:j("","RGBC"),hglC:j("","RGBC"),"Clr ":j("","RGBC"),tintColor:j("","RGBC"),Ofst:j("","Pnt "),ChFX:j("","ChFX"),MpgS:j("","ShpC"),DrSh:j("","DrSh"),IrSh:j("","IrSh"),OrGl:j("","OrGl"),IrGl:j("","IrGl"),TrnS:j("","ShpC"),Ptrn:j("","Ptrn"),FrFX:j("","FrFX"),phase:j("","Pnt "),frameStep:H,duration:H,workInTime:H,workOutTime:H,audioClipGroupList:H,bounds:j("","Rctn"),customEnvelopeWarp:j("","customEnvelopeWarp"),warp:j("","warp"),"Sz  ":j("","Pnt "),origin:j("","Pnt "),autoExpandOffset:j("","Pnt "),keyOriginShapeBBox:j("","unitRect"),Vrsn:H,psVersion:H,docDefaultNewArtboardBackgroundColor:j("","RGBC"),artboardRect:j("","classFloatRect"),keyOriginRRectRadii:j("","radii"),keyOriginBoxCorners:H,rectangleCornerA:j("","Pnt "),rectangleCornerB:j("","Pnt "),rectangleCornerC:j("","Pnt "),rectangleCornerD:j("","Pnt "),compInfo:H,quiltWarp:j("","quiltWarp"),generatorSettings:H,crema:H,FrIn:H,blendOptions:H,FXRf:H,Lefx:H,time:H,animKey:H,timeScope:H,inTime:H,outTime:H,sheetStyle:H,translation:H,Skew:H,boundingBox:j("","boundingBox"),"Lnk ":j("","ExternalFileLink"),frameReader:j("","FrameReader"),effectParams:j("","motionTrackEffectParams"),Impr:j("None","none"),Anch:j("","Pnt "),"Fwd ":j("","Pnt "),"Bwd ":j("","Pnt "),FlrC:j("","Pnt "),meshBoundaryPath:j("","pathClass"),filterFX:j("","filterFXStyle"),Fltr:j("","rigidTransform"),FrgC:j("","RGBC"),BckC:j("","RGBC"),sdwM:j("Parameters","adaptCorrectTones"),hglM:j("Parameters","adaptCorrectTones"),customShape:j("","customShape"),origFXRefPoint:H,FXRefPoint:H,ClMg:j("","ClMg")},X={"Crv ":j("","CrPt"),Clrs:j("","Clrt"),Trns:j("","TrnS"),keyDescriptorList:H,solidFillMulti:j("","SoFi"),gradientFillMulti:j("","GrFl"),dropShadowMulti:j("","DrSh"),innerShadowMulti:j("","IrSh"),frameFXMulti:j("","FrFX"),FrIn:H,FSts:H,LaSt:H,sheetTimelineOptions:H,trackList:j("","animationTrack"),globalTrackList:j("","animationTrack"),keyList:H,audioClipGroupList:H,audioClipList:H,countObjectList:j("","countObject"),countGroupList:j("","countGroup"),slices:j("","slice"),"Pts ":j("","Pthp"),SbpL:j("","SbpL"),pathComponents:j("","PaCm"),filterFXList:j("","filterFX"),puppetShapeList:j("","puppetShape"),channelDenoise:j("","channelDenoiseParams"),ShrP:j("","Pnt "),layerSettings:H,list:H,Adjs:j("","CrvA")},Z={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},K=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],Y={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},q={},J=0,Q=Object.keys(Z);J<Q.length;J++)for(var $=Q[J],ee=0,te=Z[$];ee<te.length;ee++){var re=te[ee];q[re]=$}for(var ne=0,ie=Object.keys(W);ne<ie.length;ne++){re=ie[ne];q[re]||(q[re]="Objc")}for(var ae=0,oe=Object.keys(X);ae<oe.length;ae++){re=oe[ae];Y[re]="Objc"}function se(e,t,r,n){return"presetKind"===e?"string"==typeof t?"enum":"long":"null"===e&&"slices"===r?"TEXT":"groupID"===e?"slices"===r?"long":"TEXT":"Sz  "===e?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":"Type"===e?"string"==typeof t?"enum":"long":"AntA"===e?"string"==typeof t?"enum":"bool":"Hrzn"!==e&&"Vrtc"!==e||"keyType.Pstn"!==n.Type&&"Ofst"!==n._classID?"Hrzn"===e||"Vrtc"===e||"Top "===e||"Left"===e||"Btom"===e||"Rght"===e?"slices"===r?"long":"number"==typeof t?"doub":"UntF":"Vrsn"===e?"number"==typeof t?"long":"Objc":"Rd  "===e||"Grn "===e||"Bl  "===e?"artd"===r?"long":"doub":"Trnf"===e?Array.isArray(t)?"VlLs":"Objc":q[e]:"long"}function le(e){return Hr(e,Mr(e)||4)}function de(e,t){if(4===t.length&&"warp"!==t&&"time"!==t&&"hold"!==t&&"list"!==t)ta(e,0),ca(e,t);else{ta(e,t.length);for(var r=0;r<t.length;r++)Ji(e,t.charCodeAt(r))}}function ce(e,t){for(var r=me(e),n=t?{_name:r.name,_classID:r.classID}:{},i=Lr(e),a=0;a<i;a++){var o=le(e),s=fe(e,Nr(e),t);n[o]=s}return n}function ue(e,t,r,n,i){ha(e,t),de(e,r);var a=Object.keys(n),o=a.length;"_name"in n&&o--,"_classID"in n&&o--,na(e,o);for(var s=0,l=a;s<l.length;s++){var d=l[s];if("_name"!==d&&"_classID"!==d){var c=se(d,n[d],i,n),u=W[d];"bounds"===d&&"text"===i?u=j("","bounds"):"origin"===d?c="slices"===i?"enum":"Objc":"Cyn "!==d&&"Mgnt"!==d&&"Ylw "!==d&&"Blck"!==d||"CMYC"!==n._classID?/^PN[a-z][a-z]$/.test(d)?c="TEXT":/^PT[a-z][a-z]$/.test(d)?c="long":/^PF[a-z][a-z]$/.test(d)?c="doub":"Rds "!==d&&"Thsh"!==d||"number"!=typeof n[d]||"SmrB"!==n._classID?"ClSz"===d||"Rds "===d||"Amnt"===d?c="number"==typeof n[d]?"long":"UntF":"sdwM"!==d&&"hglM"!==d||"string"!=typeof n[d]?"blur"===d&&"string"==typeof n[d]?c="enum":"Hght"===d&&"number"==typeof n[d]&&"Embs"===n._classID?c="long":"Angl"!==d||"number"!=typeof n[d]||"Embs"!==n._classID&&"smartSharpen"!==n._classID&&"Twrl"!==n._classID&&"MtnB"!==n._classID?"Angl"===d&&"number"==typeof n[d]?c="doub":"bounds"===d&&"slices"===i?(c="Objc",u=j("","Rct1")):"Scl "===d?"object"==typeof n[d]&&"Hrzn"in n[d]?(c="Objc",u=H):c="number"==typeof n[d]?"long":"UntF":"audioClipGroupList"===d&&1===a.length?c="VlLs":"Strt"!==d&&"Brgh"!==d||!("H   "in n)?"Wdth"===d&&"object"==typeof n[d]?c="UntF":"Ofst"===d&&"number"==typeof n[d]?c="long":"Strt"===d&&"object"==typeof n[d]?(c="Objc",u=H):-1!==K.indexOf(d)?c="RGBC"===r&&"artd"!==i?"doub":"long":"profile"===d?c="printOutput"===r?"TEXT":"tdta":"strokeStyleContent"===d?n[d]["Clr "]?u=j("","solidColorLayer"):n[d].Grad?u=j("","gradientLayer"):n[d].Ptrn&&(u=j("","patternLayer")):"bounds"===d&&"quiltWarp"===i&&(u=j("","classFloatRect")):c="doub":c="long":c="enum":c="doub":c="doub",u&&"RGBC"===u.classID&&"H   "in n[d]&&(u={classID:"HSBC",name:""}),de(e,d),ca(e,c||"long"),pe(e,c||"long",n[d],d,u,i)}}}function fe(e,t,r){switch(t){case"obj ":return function(e){for(var t=Mr(e),r=[],n=0;n<t;n++){var i=Nr(e);switch(i){case"prop":me(e);var a=le(e);r.push(a);break;case"Clss":r.push(me(e));break;case"Enmr":me(e);var o=le(e),s=le(e);r.push("".concat(o,".").concat(s));break;case"rele":me(e),r.push(Lr(e));break;case"Idnt":case"indx":r.push(Mr(e));break;case"name":me(e),r.push(Vr(e));break;default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return r}(e);case"Objc":case"GlbO":return ce(e,r);case"VlLs":for(var n=Mr(e),i=[],a=0;a<n;a++){var o=Nr(e);i.push(fe(e,o,r))}return i;case"doub":return Tr(e);case"UntF":var s=Nr(e),l=Tr(e);if(!G[s])throw new Error("Invalid units: ".concat(s));return{units:G[s],value:l};case"UnFl":s=Nr(e),l=Er(e);if(!G[s])throw new Error("Invalid units: ".concat(s));return{units:G[s],value:l};case"TEXT":return Vr(e);case"enum":var d=le(e);l=le(e);return"".concat(d,".").concat(l);case"long":return Mr(e);case"comp":return{low:Lr(e),high:Lr(e)};case"bool":return!!xr(e);case"type":case"GlbC":return me(e);case"alis":return Hr(e,Mr(e));case"tdta":return zr(e,Mr(e));case"ObAr":Mr(e),Vr(e),le(e);var c=Mr(e);for(i=[],a=0;a<c;a++){var u=le(e);Nr(e),Nr(e);for(var f=Mr(e),h=[],p=0;p<f;p++)h.push(Tr(e));i.push({type:u,values:h})}return i;case"Pth ":Mr(e);var m=Nr(e);Pr(e);var g=function(e,t){var r="";for(;t--;){var n=Or(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r}(e,Pr(e));return{sig:m,path:g};default:throw new Error("Invalid TySh descriptor OSType: ".concat(t," at ").concat(e.offset.toString(16)))}}var he={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function pe(e,t,r,n,i,a){switch(t){case"obj ":!function(e,t,r){ta(e,r.length);for(var n=0;n<r.length;n++){var i=r[n],a="unknown";switch("string"==typeof i&&(a=/^[a-z ]+\.[a-z ]+$/i.test(i)?"Enmr":"name"),ca(e,a),a){case"Enmr":var o=i.split("."),s=o[0],l=o[1];ge(e,"\0",s),de(e,s),de(e,l);break;case"name":ge(e,"\0","Lyr "),fa(e,i+"\0");break;default:throw new Error("Invalid descriptor reference type: ".concat(a))}}}(e,0,r);break;case"Objc":case"GlbO":if("object"!=typeof r)throw new Error("Invalid struct value: ".concat(JSON.stringify(r),", key: ").concat(n));if(!i)throw new Error("Missing ext type for: '".concat(n,"' (").concat(JSON.stringify(r),")"));ue(e,r._name||i.name,r._classID||i.classID,r,a);break;case"VlLs":if(!Array.isArray(r))throw new Error("Invalid list value: ".concat(JSON.stringify(r),", key: ").concat(n));ta(e,r.length);for(var o=0;o<r.length;o++){var s=Y[n];ca(e,s||"long"),pe(e,s||"long",r[o],"".concat(n,"[]"),X[n],a)}break;case"doub":if("number"!=typeof r)throw new Error("Invalid number value: ".concat(JSON.stringify(r),", key: ").concat(n));aa(e,r);break;case"UntF":if(!V[r.units])throw new Error("Invalid units: ".concat(r.units," in ").concat(n));ca(e,V[r.units]),aa(e,r.value);break;case"UnFl":if(!V[r.units])throw new Error("Invalid units: ".concat(r.units," in ").concat(n));ca(e,V[r.units]),ia(e,r.value);break;case"TEXT":ha(e,r);break;case"enum":if("string"!=typeof r)throw new Error("Invalid enum value: ".concat(JSON.stringify(r),", key: ").concat(n));var l=r.split("."),d=l[0],c=l[1];de(e,d),de(e,c);break;case"long":if("number"!=typeof r)throw new Error("Invalid integer value: ".concat(JSON.stringify(r),", key: ").concat(n));ta(e,r);break;case"bool":if("boolean"!=typeof r)throw new Error("Invalid boolean value: ".concat(JSON.stringify(r),", key: ").concat(n));Ji(e,r?1:0);break;case"tdta":ta(e,r.byteLength),la(e,r);break;case"ObAr":ta(e,16),ha(e,"");var u=he[n];if(!u)throw new Error("Not implemented ObArType for: ".concat(n));de(e,u),ta(e,r.length);for(o=0;o<r.length;o++){de(e,r[o].type),ca(e,"UnFl"),ca(e,"#Pxl"),ta(e,r[o].values.length);for(var f=0;f<r[o].values.length;f++)aa(e,r[o].values[f])}break;case"Pth ":var h=12+2*r.path.length;ta(e,h),ca(e,r.sig),ra(e,h),ra(e,r.path.length),function(e,t){for(var r=0;r<t.length;r++)ea(e,t.charCodeAt(r))}(e,r.path);break;default:throw new Error("Not implemented descriptor OSType: ".concat(t))}}function me(e){return{name:Vr(e),classID:le(e)}}function ge(e,t,r){fa(e,t),de(e,r)}function ve(e,t){void 0===t&&(t=!1);var r=Lr(e);if(16!==r)throw new Error("Invalid descriptor version: ".concat(r));return ce(e,t)}function ye(e,t,r,n,i){void 0===i&&(i=""),na(e,16),ue(e,t,r,n,i)}function be(e){return{x:e.Hrzn,y:e.Vrtc}}function we(e){return{Hrzn:e.x,Vrtc:e.y}}function ke(e){return{top:Xe(e["Top "]),left:Xe(e.Left),right:Xe(e.Rght),bottom:Xe(e.Btom)}}function Se(e){var t;return(t={Left:Qe(e.left,"bounds.left")})["Top "]=Qe(e.top,"bounds.top"),t.Rght=Qe(e.right,"bounds.right"),t.Btom=Qe(e.bottom,"bounds.bottom"),t}function _e(e){var t={enabled:!!e.enab,position:mt.decode(e.Styl),fillType:gt.decode(e.PntT),blendMode:it.decode(e["Md  "]),opacity:He(e.Opct),size:Xe(e["Sz  "])};return void 0!==e.present&&(t.present=e.present),void 0!==e.showInDialog&&(t.showInDialog=e.showInDialog),void 0!==e.overprint&&(t.overprint=e.overprint),e["Clr "]&&(t.color=Ge(e["Clr "])),e.Grad&&(t.gradient=Te(e)),e.Ptrn&&(t.pattern=Re(e)),t}function Fe(e){var t={};return t.enab=!!e.enabled,void 0!==e.present&&(t.present=!!e.present),void 0!==e.showInDialog&&(t.showInDialog=!!e.showInDialog),t.Styl=mt.encode(e.position),t.PntT=gt.encode(e.fillType),t["Md  "]=it.encode(e.blendMode),t.Opct=qe(e.opacity),t["Sz  "]=Qe(e.size,"size"),e.color&&(t["Clr "]=Ve(e.color)),e.gradient&&(t=z(z({},t),ze(e.gradient))),e.pattern&&(t=z(z({},t),Ne(e.pattern))),void 0!==e.overprint&&(t.overprint=!!e.overprint),t}function Ie(e,t,r){for(var n,i,a,o=r?{"Scl ":Je(null!==(n=e.scale)&&void 0!==n?n:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":Je(null!==(i=e.scale)&&void 0!==i?i:1)},s=0,l=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"];s<l.length;s++){if(e[h=l[s]]&&!Array.isArray(e[h]))throw new Error("".concat(h," should be an array"))}var d=function(e){return!!e&&e.length>1&&r},c=function(e){return!!e&&e.length>=1&&(!r||1===e.length)};if(c(e.dropShadow)&&(o.DrSh=Pe(e.dropShadow[0],"dropShadow",t)),d(e.dropShadow)&&(o.dropShadowMulti=e.dropShadow.map(function(e){return Pe(e,"dropShadow",t)})),c(e.innerShadow)&&(o.IrSh=Pe(e.innerShadow[0],"innerShadow",t)),d(e.innerShadow)&&(o.innerShadowMulti=e.innerShadow.map(function(e){return Pe(e,"innerShadow",t)})),e.outerGlow&&(o.OrGl=Pe(e.outerGlow,"outerGlow",t)),d(e.solidFill)&&(o.solidFillMulti=e.solidFill.map(function(e){return Pe(e,"solidFill",t)})),d(e.gradientOverlay)&&(o.gradientFillMulti=e.gradientOverlay.map(function(e){return Pe(e,"gradientOverlay",t)})),d(e.stroke)&&(o.frameFXMulti=e.stroke.map(function(e){return Fe(e)})),e.innerGlow&&(o.IrGl=Pe(e.innerGlow,"innerGlow",t)),e.bevel&&(o.ebbl=Pe(e.bevel,"bevel",t)),c(e.solidFill)&&(o.SoFi=Pe(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(o.patternFill=Pe(e.patternOverlay,"patternOverlay",t)),c(e.gradientOverlay)&&(o.GrFl=Pe(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(o.ChFX=Pe(e.satin,"satin",t)),c(e.stroke)&&(o.FrFX=Fe(null===(a=e.stroke)||void 0===a?void 0:a[0])),r){o.numModifyingFX=0;for(var u=0,f=Object.keys(e);u<f.length;u++){var h,p=e[h=f[u]];if(Array.isArray(p))for(var m=0,g=p;m<g.length;m++){g[m].enabled&&o.numModifyingFX++}else p.enabled&&o.numModifyingFX++}}return o}function xe(e,t){var r={},n=e.masterFXSwitch,i=e.DrSh,a=e.dropShadowMulti,o=e.IrSh,s=e.innerShadowMulti,l=e.OrGl,d=e.IrGl,c=e.ebbl,u=e.SoFi,f=e.solidFillMulti,h=e.patternFill,p=e.GrFl,m=e.gradientFillMulti,g=e.ChFX,v=e.FrFX,y=e.frameFXMulti;e.numModifyingFX;var b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return n||(r.disabled=!0),e["Scl "]&&(r.scale=He(e["Scl "])),i&&(r.dropShadow=[Me(i,t)]),a&&(r.dropShadow=a.map(function(e){return Me(e,t)})),o&&(r.innerShadow=[Me(o,t)]),s&&(r.innerShadow=s.map(function(e){return Me(e,t)})),l&&(r.outerGlow=Me(l,t)),d&&(r.innerGlow=Me(d,t)),c&&(r.bevel=Me(c,t)),u&&(r.solidFill=[Me(u,t)]),f&&(r.solidFill=f.map(function(e){return Me(e,t)})),h&&(r.patternOverlay=Me(h,t)),p&&(r.gradientOverlay=[Me(p,t)]),m&&(r.gradientOverlay=m.map(function(e){return Me(e,t)})),g&&(r.satin=Me(g,t)),v&&(r.stroke=[_e(v)]),y&&(r.stroke=y.map(function(e){return _e(e)})),t&&Object.keys(b).length>1&&console.log("Unhandled effect keys:",b),r}function Ce(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=i.time,o=a.denominator,s=a.numerator,l=i.selected,d=i.animKey,c={numerator:s,denominator:o},u=ut.decode(i.animInterpStyle);switch(d.Type){case"keyType.Opct":r.push({interpolation:u,time:c,selected:l,type:"opacity",value:He(d.Opct)});break;case"keyType.Pstn":r.push({interpolation:u,time:c,selected:l,type:"position",x:d.Hrzn,y:d.Vrtc});break;case"keyType.Trnf":r.push({interpolation:u,time:c,selected:l,type:"transform",scale:be(d["Scl "]),skew:be(d.Skew),rotation:d.rotation,translation:be(d.translation)});break;case"keyType.sheetStyle":var f={interpolation:u,time:c,selected:l,type:"style"};d.sheetStyle.Lefx&&(f.style=xe(d.sheetStyle.Lefx,t)),r.push(f);break;case"keyType.globalLighting":r.push({interpolation:u,time:c,selected:l,type:"globalLighting",globalAngle:d.gblA,globalAltitude:d.globalAltitude});break;default:throw new Error("Unsupported keyType value")}}return r}function De(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=n.time,a=n.selected,o=void 0!==a&&a,s=n.interpolation,l=ut.encode(s),d=void 0;switch(n.type){case"opacity":d={Type:"keyType.Opct",Opct:qe(n.value)};break;case"position":d={Type:"keyType.Pstn",Hrzn:n.x,Vrtc:n.y};break;case"transform":d={Type:"keyType.Trnf","Scl ":we(n.scale),Skew:we(n.skew),rotation:n.rotation,translation:we(n.translation)};break;case"style":d={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},n.style&&(d.sheetStyle={Vrsn:1,Lefx:Ie(n.style,!1,!1),blendOptions:{}});break;case"globalLighting":d={Type:"keyType.globalLighting",gblA:n.globalAngle,globalAltitude:n.globalAltitude};break;default:throw new Error("Unsupported keyType value")}t.push({Vrsn:1,animInterpStyle:l,time:i,animKey:d,selected:o})}return t}function Ae(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],a={type:ft.decode(i.trackID),enabled:i.enab,keys:Ce(i.keyList,t)};i.effectParams&&(a.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:Ce(i.effectParams.keyList,t)}),r.push(a)}return r}function Oe(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(z(z({trackID:ft.encode(n.type),Vrsn:1,enab:!!n.enabled,Effc:!!n.effectParams},n.effectParams?{effectParams:{keyList:De(n.keys),fillCanvas:n.effectParams.fillCanvas,zoomOrigin:n.effectParams.zoomOrigin}}:{}),{keyList:De(n.keys)}))}return t}function Me(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],o=e[a];switch(a){case"enab":r.enabled=!!o;break;case"uglg":r.useGlobalLight=!!o;break;case"AntA":r.antialiased=!!o;break;case"Algn":r.align=!!o;break;case"Dthr":r.dither=!!o;break;case"Invr":r.invert=!!o;break;case"Rvrs":r.reverse=!!o;break;case"Clr ":r.color=Ge(o);break;case"hglC":r.highlightColor=Ge(o);break;case"sdwC":r.shadowColor=Ge(o);break;case"Styl":r.position=mt.decode(o);break;case"Md  ":r.blendMode=it.decode(o);break;case"hglM":r.highlightBlendMode=it.decode(o);break;case"sdwM":r.shadowBlendMode=it.decode(o);break;case"bvlS":r.style=at.decode(o);break;case"bvlD":r.direction=st.decode(o);break;case"bvlT":r.technique=ot.decode(o);break;case"GlwT":r.technique=lt.decode(o);break;case"glwS":r.source=dt.decode(o);break;case"Type":r.type=ct.decode(o);break;case"gs99":r.interpolationMethod=ht.decode(o);break;case"Opct":r.opacity=He(o);break;case"hglO":r.highlightOpacity=He(o);break;case"sdwO":r.shadowOpacity=He(o);break;case"lagl":case"Angl":r.angle=je(o);break;case"Lald":r.altitude=je(o);break;case"Sftn":r.soften=Xe(o);break;case"srgR":r.strength=He(o);break;case"blur":r.size=Xe(o);break;case"Nose":r.noise=He(o);break;case"Inpr":r.range=He(o);break;case"Ckmt":r.choke=Xe(o);break;case"ShdN":r.jitter=He(o);break;case"Dstn":r.distance=Xe(o);break;case"Scl ":r.scale=He(o);break;case"Ptrn":r.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":r.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":r.offset={x:He(o.Hrzn),y:He(o.Vrtc)};break;case"MpgS":case"TrnS":r.contour={name:o["Nm  "],curve:o["Crv "].map(function(e){return{x:e.Hrzn,y:e.Vrtc}})};break;case"Grad":r.gradient=Le(o);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[a]=o;break;case"_name":case"_classID":break;default:t&&console.log("Invalid effect key: '".concat(a,"', value:"),o)}}return r}function Pe(e,t,r){for(var n={},i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];switch(o){case"enabled":n.enab=!!s;break;case"useGlobalLight":n.uglg=!!s;break;case"antialiased":n.AntA=!!s;break;case"align":n.Algn=!!s;break;case"dither":n.Dthr=!!s;break;case"invert":n.Invr=!!s;break;case"reverse":n.Rvrs=!!s;break;case"color":n["Clr "]=Ve(s);break;case"highlightColor":n.hglC=Ve(s);break;case"shadowColor":n.sdwC=Ve(s);break;case"position":n.Styl=mt.encode(s);break;case"blendMode":n["Md  "]=it.encode(s);break;case"highlightBlendMode":n.hglM=it.encode(s);break;case"shadowBlendMode":n.sdwM=it.encode(s);break;case"style":n.bvlS=at.encode(s);break;case"direction":n.bvlD=st.encode(s);break;case"technique":"bevel"===t?n.bvlT=ot.encode(s):n.GlwT=lt.encode(s);break;case"source":n.glwS=dt.encode(s);break;case"type":n.Type=ct.encode(s);break;case"interpolationMethod":n.gs99=ht.encode(s);break;case"opacity":n.Opct=qe(s);break;case"highlightOpacity":n.hglO=qe(s);break;case"shadowOpacity":n.sdwO=qe(s);break;case"angle":"gradientOverlay"===t||"patternFill"===t?n.Angl=Ye(s):n.lagl=Ye(s);break;case"altitude":n.Lald=Ye(s);break;case"soften":n.Sftn=Qe(s,o);break;case"strength":n.srgR=qe(s);break;case"size":n.blur=Qe(s,o);break;case"noise":n.Nose=qe(s);break;case"range":n.Inpr=qe(s);break;case"choke":n.Ckmt=Qe(s,o);break;case"jitter":n.ShdN=qe(s);break;case"distance":n.Dstn=Qe(s,o);break;case"scale":n["Scl "]=qe(s);break;case"pattern":n.Ptrn={"Nm  ":s.name,Idnt:s.id};break;case"phase":n.phase={Hrzn:s.x,Vrtc:s.y};break;case"offset":n.Ofst={Hrzn:qe(s.x),Vrtc:qe(s.y)};break;case"contour":n["satin"===t?"MpgS":"TrnS"]={"Nm  ":s.name,"Crv ":s.curve.map(function(e){return{Hrzn:e.x,Vrtc:e.y}})};break;case"gradient":n.Grad=Ee(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[o]=s;break;default:r&&console.log("Invalid effect key: '".concat(o,"', value:"),s)}}return n}function Le(e){if("GrdF.CstS"===e.GrdF){var t=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(e){return{color:Ge(e["Clr "]),location:e.Lctn/t,midpoint:e.Mdpn/100}}),opacityStops:e.Trns.map(function(e){return{opacity:He(e.Opct),location:e.Lctn/t,midpoint:e.Mdpn/100}})}}return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:pt.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(e){return e/100}),max:e["Mxm "].map(function(e){return e/100})}}function Ee(e){var t,r;if("solid"===e.type){var n=Math.round(4096*(null!==(t=e.smoothness)&&void 0!==t?t:1));return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:n,Clrs:e.colorStops.map(function(e){var t;return{"Clr ":Ve(e.color),Type:"Clry.UsrS",Lctn:Math.round(e.location*n),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}}),Trns:e.opacityStops.map(function(e){var t;return{Opct:qe(e.opacity),Lctn:Math.round(e.location*n),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}})}}return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:pt.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(4096*(null!==(r=e.roughness)&&void 0!==r?r:1)),"Mnm ":(e.min||[0,0,0,0]).map(function(e){return 100*e}),"Mxm ":(e.max||[1,1,1,1]).map(function(e){return 100*e})}}function Te(e){var t=Le(e.Grad);return t.style=ct.decode(e.Type),void 0!==e.Dthr&&(t.dither=e.Dthr),void 0!==e.gradientsInterpolationMethod&&(t.interpolationMethod=ht.decode(e.gradientsInterpolationMethod)),void 0!==e.Rvrs&&(t.reverse=e.Rvrs),void 0!==e.Angl&&(t.angle=je(e.Angl)),void 0!==e["Scl "]&&(t.scale=He(e["Scl "])),void 0!==e.Algn&&(t.align=e.Algn),void 0!==e.Ofst&&(t.offset={x:He(e.Ofst.Hrzn),y:He(e.Ofst.Vrtc)}),t}function Re(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return void 0!==e.Lnkd&&(t.linked=e.Lnkd),void 0!==e.phase&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function Be(e){if("Grad"in e)return Te(e);if("Ptrn"in e)return z({type:"pattern"},Re(e));if("Clr "in e)return{type:"color",color:Ge(e["Clr "])};throw new Error("Invalid vector content")}function ze(e){var t={};return void 0!==e.dither&&(t.Dthr=e.dither),void 0!==e.interpolationMethod&&(t.gradientsInterpolationMethod=ht.encode(e.interpolationMethod)),void 0!==e.reverse&&(t.Rvrs=e.reverse),void 0!==e.angle&&(t.Angl=Ye(e.angle)),t.Type=ct.encode(e.style),void 0!==e.align&&(t.Algn=e.align),void 0!==e.scale&&(t["Scl "]=qe(e.scale)),e.offset&&(t.Ofst={Hrzn:qe(e.offset.x),Vrtc:qe(e.offset.y)}),t.Grad=Ee(e),t}function Ne(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return void 0!==e.linked&&(t.Lnkd=!!e.linked),void 0!==e.phase&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function Ue(e){return"color"===e.type?{key:"SoCo",descriptor:{"Clr ":Ve(e.color)}}:"pattern"===e.type?{key:"PtFl",descriptor:Ne(e)}:{key:"GdFl",descriptor:ze(e)}}function Ge(e){if("H   "in e)return{h:We(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}function Ve(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":Ye(360*e.h),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function je(e){if(void 0===e)return 0;if("Angle"!==e.units)throw new Error("Invalid units: ".concat(e.units));return e.value}function He(e){if(void 0===e)return 1;if("Percent"!==e.units)throw new Error("Invalid units: ".concat(e.units));return e.value/100}function We(e){if(void 0===e)return 1;if("Percent"===e.units)return e.value/100;if("Angle"===e.units)return e.value/360;throw new Error("Invalid units: ".concat(e.units))}function Xe(e){var t=e.units,r=e.value;if("Pixels"!==t&&"Millimeters"!==t&&"Points"!==t&&"None"!==t&&"Picas"!==t&&"Inches"!==t&&"Centimeters"!==t&&"Density"!==t)throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:r})));return{value:r,units:t}}function Ze(e,t){return void 0===t&&(t="Pixels"),"number"==typeof e?{value:e,units:t}:Xe(e)}function Ke(e,t){var r=e.units,n=e.value;if(r!==t)throw new Error("Invalid units: ".concat(JSON.stringify({units:r,value:n})));return n}function Ye(e){return{units:"Angle",value:e||0}}function qe(e){return{units:"Percent",value:Math.round(100*(e||0))}}function Je(e){return{units:"Percent",value:100*(e||0)}}function Qe(e,t){if(null==e)return{units:"Pixels",value:0};if("object"!=typeof e)throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var r=e.units,n=e.value;if("number"!=typeof n)throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if("Pixels"!==r&&"Millimeters"!==r&&"Points"!==r&&"None"!==r&&"Picas"!==r&&"Inches"!==r&&"Centimeters"!==r&&"Density"!==r)throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:r,value:n}}function $e(e){return{numerator:e.numerator,denominator:e.denominator}}var et=w("textGridding","none",{none:"None",round:"Rnd "}),tt=w("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),rt=w("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),nt=w("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),it=w("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),at=w("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),ot=w("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),st=w("BESs","up",{up:"In  ",down:"Out "}),lt=w("BETE","softer",{softer:"SfBL",precise:"PrBL"}),dt=w("IGSr","edge",{edge:"SrcE",center:"SrcC"}),ct=w("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),ut=w("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),ft=w("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),ht=w("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),pt=w("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),mt=w("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),gt=w("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),vt=w("ESliceType","image",{image:"Img ",noImage:"noImage"}),yt=w("ESliceHorzAlign","default",{default:"default"}),bt=w("ESliceVertAlign","default",{default:"default"}),wt=w("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),kt=w("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),St=w("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),_t=w("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),Ft=w("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),It=w("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),xt=w("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),Ct=w("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),Dt=w("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),At=w("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),Ot=w("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),Mt=w("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),Pt=w("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),Lt=w("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),Et=w("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),Tt=w("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),Rt=w("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),Bt=w("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),zt=w("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),Nt=w("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),Ut=w("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),Gt=w("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),Vt=w("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),jt=w("ExtR","random",{random:"Rndm","level-based":"LvlB"}),Ht=w("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),Wt=w("CntE","upper",{lower:"Lwr ",upper:"Upr "}),Xt=w("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),Zt=w("Drct","from the right",{left:"Left",right:"Rght"}),Kt=w("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),Yt=w("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),qt=w("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});w("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});var Jt=w("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"}),Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qt.apply(this,arguments)},$t=[],er={};function tr(e,t,r,n){var i={key:e,has:t,read:r,write:n};$t.push(i),er[i.key]=i}var rr=[void 0,"PPI","PPCM"],nr=[void 0,"Inches","Centimeters","Points","Picas","Columns"],ir="0123456789abcdef";function ar(e){return e<=57?e-48:e-87}function or(e,t){return ar(e.charCodeAt(t))<<4|ar(e.charCodeAt(t+1))}function sr(e,t){return B(zr(e,t))}function lr(e,t){la(e,T(t))}function dr(e){for(var t=zr(e,xr(e)),r=!1,n=0;n<t.byteLength;n++)if(128&t[n]){r=!0;break}return r?new TextDecoder("gbk").decode(t):B(t)}function cr(e,t){for(var r="",n=0,i=t.codePointAt(n++);void 0!==i;i=t.codePointAt(n++))r+=i>127?"?":String.fromCodePoint(i);var a=T(r);Ji(e,a.byteLength),la(e,a)}tr(1061,function(e){return void 0!==e.captionDigest},function(e,t){for(var r="",n=0;n<16;n++){var i=xr(e);r+=ir[i>>4],r+=ir[15&i]}t.captionDigest=r},function(e,t){for(var r=0;r<16;r++)Ji(e,or(t.captionDigest,2*r))}),tr(1060,function(e){return void 0!==e.xmpMetadata},function(e,t,r){t.xmpMetadata=sr(e,r())},function(e,t){lr(e,t.xmpMetadata)});var ur=w("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});tr(1082,function(e){return void 0!==e.printInformation},function(e,t){var r,n,i=ve(e);t.printInformation={printerName:i.printerName||"",renderingIntent:ur.decode(null!==(r=i.Inte)&&void 0!==r?r:"Inte.Img ")};var a=t.printInformation;void 0!==i.PstS&&(a.printerManagesColors=i.PstS),void 0!==i["Nm  "]&&(a.printerProfile=i["Nm  "]),void 0!==i.MpBl&&(a.blackPointCompensation=i.MpBl),void 0!==i.printSixteenBit&&(a.printSixteenBit=i.printSixteenBit),void 0!==i.hardProof&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:ur.decode(null!==(n=i.printProofSetup.Inte)&&void 0!==n?n:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,t){var r,n,i=t.printInformation,a={};i.printerManagesColors?a.PstS=!0:(void 0!==i.hardProof&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=null!==(r=i.printerProfile)&&void 0!==r?r:"CIE RGB"),a.Inte=ur.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:ur.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:(null===(n=i.proofSetup)||void 0===n?void 0:n.builtin)?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},ye(e,"","printOutput",a)}),tr(1005,function(e){return void 0!==e.resolutionInfo},function(e,t){var r=Rr(e),n=Ar(e),i=Ar(e),a=Rr(e),o=Ar(e),s=Ar(e);t.resolutionInfo={horizontalResolution:r,horizontalResolutionUnit:rr[n]||"PPI",widthUnit:nr[i]||"Inches",verticalResolution:a,verticalResolutionUnit:rr[o]||"PPI",heightUnit:nr[s]||"Inches"}},function(e,t){var r=t.resolutionInfo;oa(e,r.horizontalResolution||0),$i(e,Math.max(1,rr.indexOf(r.horizontalResolutionUnit))),$i(e,Math.max(1,nr.indexOf(r.widthUnit))),oa(e,r.verticalResolution||0),$i(e,Math.max(1,rr.indexOf(r.verticalResolutionUnit))),$i(e,Math.max(1,nr.indexOf(r.heightUnit)))});var fr=["centered","size to fit","user defined"];tr(1062,function(e){return void 0!==e.printScale},function(e,t){t.printScale={style:fr[Dr(e)],x:Er(e),y:Er(e),scale:Er(e)}},function(e,t){var r=t.printScale,n=r.style,i=r.x,a=r.y,o=r.scale;Qi(e,Math.max(0,fr.indexOf(n))),ia(e,i||0),ia(e,a||0),ia(e,o||0)}),tr(1006,function(e){return void 0!==e.alphaChannelNames},function(e,t,r){if(t.alphaChannelNames)Wr(e,r());else for(t.alphaChannelNames=[];r()>0;){var n=dr(e);t.alphaChannelNames.push(n)}},function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){cr(e,n[r])}}),tr(1045,function(e){return void 0!==e.alphaChannelNames},function(e,t,r){for(t.alphaChannelNames=[];r()>0;)t.alphaChannelNames.push(Vr(e))},function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){ha(e,n[r])}}),tr(1053,function(e){return void 0!==e.alphaIdentifiers},function(e,t,r){for(t.alphaIdentifiers=[];r()>=4;)t.alphaIdentifiers.push(Lr(e))},function(e,t){for(var r=0,n=t.alphaIdentifiers;r<n.length;r++){na(e,n[r])}}),tr(1010,function(e){return void 0!==e.backgroundColor},function(e,t){return t.backgroundColor=fn(e)},function(e,t){return Ca(e,t.backgroundColor)}),tr(1037,function(e){return void 0!==e.globalAngle},function(e,t){return t.globalAngle=Mr(e)},function(e,t){return ta(e,t.globalAngle)}),tr(1049,function(e){return void 0!==e.globalAltitude},function(e,t){return t.globalAltitude=Lr(e)},function(e,t){return na(e,t.globalAltitude)}),tr(1011,function(e){return void 0!==e.printFlags},function(e,t){t.printFlags={labels:!!xr(e),cropMarks:!!xr(e),colorBars:!!xr(e),registrationMarks:!!xr(e),negative:!!xr(e),flip:!!xr(e),interpolate:!!xr(e),caption:!!xr(e),printFlags:!!xr(e)}},function(e,t){var r=t.printFlags;Ji(e,r.labels?1:0),Ji(e,r.cropMarks?1:0),Ji(e,r.colorBars?1:0),Ji(e,r.registrationMarks?1:0),Ji(e,r.negative?1:0),Ji(e,r.flip?1:0),Ji(e,r.interpolate?1:0),Ji(e,r.caption?1:0),Ji(e,r.printFlags?1:0)}),tr(1080,function(e){return void 0!==e.countInformation},function(e,t){var r=ve(e);t.countInformation=r.countGroupList.map(function(e){return{color:{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]},name:e["Nm  "],size:e["Rds "],fontSize:e.fontSize,visible:e.Vsbl,points:e.countObjectList.map(function(e){return{x:e["X   "],y:e["Y   "]}})}})},function(e,t){ye(e,"","Cnt ",{Vrsn:1,countGroupList:t.countInformation.map(function(e){return{"Rd  ":e.color.r,"Grn ":e.color.g,"Bl  ":e.color.b,"Nm  ":e.name,"Rds ":e.size,fontSize:e.fontSize,Vsbl:e.visible,countObjectList:e.points.map(function(e){return{"X   ":e.x,"Y   ":e.y}})}})})}),tr(1024,function(e){return void 0!==e.layerState},function(e,t){return t.layerState=Ar(e)},function(e,t){return $i(e,t.layerState)}),tr(1026,function(e){return void 0!==e.layersGroup},function(e,t,r){for(t.layersGroup=[];r()>0;)t.layersGroup.push(Ar(e))},function(e,t){for(var r=0,n=t.layersGroup;r<n.length;r++){$i(e,n[r])}}),tr(1072,function(e){return void 0!==e.layerGroupsEnabledId},function(e,t,r){for(t.layerGroupsEnabledId=[];r()>0;)t.layerGroupsEnabledId.push(xr(e))},function(e,t){for(var r=0,n=t.layerGroupsEnabledId;r<n.length;r++){Ji(e,n[r])}}),tr(1069,function(e){return void 0!==e.layerSelectionIds},function(e,t){var r=Ar(e);for(t.layerSelectionIds=[];r--;)t.layerSelectionIds.push(Lr(e))},function(e,t){$i(e,t.layerSelectionIds.length);for(var r=0,n=t.layerSelectionIds;r<n.length;r++){na(e,n[r])}}),tr(1032,function(e){return void 0!==e.gridAndGuidesInformation},function(e,t){var r=Lr(e),n=Lr(e),i=Lr(e),a=Lr(e);if(1!==r)throw new Error("Invalid 1032 resource version: ".concat(r));t.gridAndGuidesInformation={grid:{horizontal:n,vertical:i},guides:[]};for(var o=0;o<a;o++)t.gridAndGuidesInformation.guides.push({location:Lr(e)/32,direction:xr(e)?"horizontal":"vertical"})},function(e,t){var r=t.gridAndGuidesInformation,n=r.grid||{horizontal:576,vertical:576},i=r.guides||[];na(e,1),na(e,n.horizontal),na(e,n.vertical),na(e,i.length);for(var a=0,o=i;a<o.length;a++){var s=o[a];na(e,32*s.location),Ji(e,"horizontal"===s.direction?1:0)}}),tr(1065,function(e){return void 0!==e.layerComps},function(e,t){var r=ve(e,!0);t.layerComps={list:[]};for(var n=0,i=r.list;n<i.length;n++){var a=i[n];t.layerComps.list.push({id:a.compID,name:a["Nm  "],capturedInfo:a.capturedInfo}),"comment"in a&&(t.layerComps.list[t.layerComps.list.length-1].comment=a.comment)}"lastAppliedComp"in r&&(t.layerComps.lastApplied=r.lastAppliedComp)},function(e,t){for(var r=t.layerComps,n={list:[]},i=0,a=r.list;i<a.length;i++){var o=a[i],s={_classID:"Comp"};s["Nm  "]=o.name,"comment"in o&&(s.comment=o.comment),s.compID=o.id,s.capturedInfo=o.capturedInfo,n.list.push(s)}"lastApplied"in r&&(n.lastAppliedComp=r.lastApplied),ye(e,"","CompList",n)});var hr=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];function pr(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function mr(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function gr(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}tr(1078,function(e){return void 0!==e.onionSkins},function(e,t){var r=ve(e);t.onionSkins={enabled:r.enab,framesBefore:r.numBefore,framesAfter:r.numAfter,frameSpacing:r.Spcn,minOpacity:r.minOpacity/100,maxOpacity:r.maxOpacity/100,blendMode:hr[r.BlnM]||"normal"}},function(e,t){var r=t.onionSkins;ye(e,"","null",{Vrsn:1,enab:r.enabled,numBefore:r.framesBefore,numAfter:r.framesAfter,Spcn:r.frameSpacing,minOpacity:100*r.minOpacity|0,maxOpacity:100*r.maxOpacity|0,BlnM:Math.max(0,hr.indexOf(r.blendMode))})}),tr(1075,function(e){return void 0!==e.timelineInformation},function(e,t){var r,n,i=ve(e);t.timelineInformation={enabled:i.enab,frameStep:$e(i.frameStep),frameRate:i.frameRate,time:$e(i.time),duration:$e(i.duration),workInTime:$e(i.workInTime),workOutTime:$e(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:Ae(i.globalTrackList,!!e.logMissingFeatures)},(null===(n=null===(r=i.audioClipGroupList)||void 0===r?void 0:r.audioClipGroupList)||void 0===n?void 0:n.length)&&(t.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(e){return{id:e.groupID,muted:e.muted,audioClips:e.audioClipList.map(function(e){var t=e.clipID,r=e.timeScope,n=e.muted,i=e.audioLevel,a=e.frameReader;return{id:t,start:$e(r.Strt),duration:$e(r.duration),inTime:$e(r.inTime),outTime:$e(r.outTime),muted:n,audioLevel:i,frameReader:{type:a.frameReaderType,mediaDescriptor:a.mediaDescriptor,link:{name:a["Lnk "]["Nm  "],fullPath:a["Lnk "].fullPath,relativePath:a["Lnk "].relPath}}}})}}))},function(e,t){var r,n=t.timelineInformation;ye(e,"","null",{Vrsn:1,enab:n.enabled,frameStep:n.frameStep,frameRate:n.frameRate,time:n.time,duration:n.duration,workInTime:n.workInTime,workOutTime:n.workOutTime,LCnt:n.repeats,globalTrackList:Oe(n.globalTracks),audioClipGroupList:{audioClipGroupList:null===(r=n.audioClipGroups)||void 0===r?void 0:r.map(function(e){return{groupID:e.id,muted:e.muted,audioClipList:e.audioClips.map(function(e){return{clipID:e.id,timeScope:{Vrsn:1,Strt:e.start,duration:e.duration,inTime:e.inTime,outTime:e.outTime},frameReader:{frameReaderType:e.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":e.frameReader.link.name,fullPath:e.frameReader.link.fullPath,relPath:e.frameReader.link.relativePath},mediaDescriptor:e.frameReader.mediaDescriptor},muted:e.muted,audioLevel:e.audioLevel}})}})},hasMotion:n.hasMotion},"anim")}),tr(1076,function(e){return void 0!==e.sheetDisclosure},function(e,t){var r=ve(e);t.sheetDisclosure={},r.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=r.sheetTimelineOptions.map(function(e){return{sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}}))},function(e,t){var r=t.sheetDisclosure,n={Vrsn:1};r.sheetTimelineOptions&&(n.sheetTimelineOptions=r.sheetTimelineOptions.map(function(e){return{Vrsn:2,sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}})),ye(e,"","null",n)}),tr(1054,function(e){return void 0!==e.urlsList},function(e,t){var r=Lr(e);t.urlsList=[];for(var n=0;n<r;n++){if("slic"!==Nr(e)&&e.throwForMissingFeatures)throw new Error("Unknown long");var i=Lr(e),a=Vr(e);t.urlsList.push({id:i,url:a,ref:"slice"})}},function(e,t){var r=t.urlsList;na(e,r.length);for(var n=0;n<r.length;n++)ca(e,"slic"),na(e,r[n].id),fa(e,r[n].url)});var vr=["autoGenerated","layer","userGenerated"],yr=["noImage","image"],br=["default"];tr(1050,function(e){return e.slices?e.slices.length:0},function(e,t){var r=Lr(e);if(6===r){t.slices||(t.slices=[]);var n=Mr(e),i=Mr(e),a=Mr(e),o=Mr(e),s=Vr(e),l=Lr(e);t.slices.push({bounds:{top:n,left:i,bottom:a,right:o},groupName:s,slices:[]});for(var d=t.slices[t.slices.length-1].slices,c=0;c<l;c++){var u=Lr(e),f=Lr(e),h=gr(vr,Lr(e)),p="layer"==h?Lr(e):0,m=Vr(e),g=gr(yr,Lr(e)),v=Mr(e),y=Mr(e),b=Mr(e),w=Mr(e),k=Vr(e),S=Vr(e),_=Vr(e),F=Vr(e),I=!!xr(e),x=Vr(e),C=gr(br,Lr(e)),D=gr(br,Lr(e)),A=xr(e),O=xr(e),M=xr(e),P=xr(e),L=A+O+M+P===0?"none":0===A?"matte":"color";d.push({id:u,groupId:f,origin:h,associatedLayerId:p,name:m,target:S,message:_,altTag:F,cellTextIsHTML:I,cellText:x,horizontalAlignment:C,verticalAlignment:D,type:g,url:k,bounds:{top:y,left:v,bottom:w,right:b},backgroundColorType:L,backgroundColor:{r:O,g:M,b:P,a:A}})}(E=ve(e)).slices.forEach(function(e){var t=d.find(function(t){return e.sliceID==t.id});t&&(t.topOutset=e.topOutset,t.leftOutset=e.leftOutset,t.bottomOutset=e.bottomOutset,t.rightOutset=e.rightOutset)})}else{if(7!==r&&8!==r)throw new Error("Invalid slices version (".concat(r,")"));var E=ve(e);t.slices||(t.slices=[]),t.slices.push({groupName:E.baseName,bounds:mr(E.bounds),slices:E.slices.map(function(e){return Qt(Qt({},e["Nm  "]?{name:e["Nm  "]}:{}),{id:e.sliceID,groupId:e.groupID,associatedLayerId:0,origin:wt.decode(e.origin),type:vt.decode(e.Type),bounds:mr(e.bounds),url:e.url,target:e.null,message:e.Msge,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horizontalAlignment:yt.decode(e.horzAlign),verticalAlignment:bt.decode(e.vertAlign),backgroundColorType:kt.decode(e.bgColorType),backgroundColor:e.bgColor?{r:e.bgColor["Rd  "],g:e.bgColor["Grn "],b:e.bgColor["Bl  "],a:e.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:e.topOutset||0,leftOutset:e.leftOutset||0,bottomOutset:e.bottomOutset||0,rightOutset:e.rightOutset||0})})})}},function(e,t,r){var n=t.slices[r],i=n.bounds,a=n.groupName,o=n.slices;na(e,6),ta(e,i.top),ta(e,i.left),ta(e,i.bottom),ta(e,i.right),fa(e,a),na(e,o.length);for(var s=0;s<o.length;s++){var l=o[s],d=l.backgroundColor,c=d.a,u=d.r,f=d.g,h=d.b;"none"===l.backgroundColorType?c=u=f=h=0:"matte"===l.backgroundColorType&&(c=0,u=f=h=255),na(e,l.id),na(e,l.groupId),na(e,vr.indexOf(l.origin)),"layer"===l.origin&&na(e,l.associatedLayerId),fa(e,l.name||""),na(e,yr.indexOf(l.type)),ta(e,l.bounds.left),ta(e,l.bounds.top),ta(e,l.bounds.right),ta(e,l.bounds.bottom),fa(e,l.url),fa(e,l.target),fa(e,l.message),fa(e,l.altTag),Ji(e,l.cellTextIsHTML?1:0),fa(e,l.cellText),na(e,br.indexOf(l.horizontalAlignment)),na(e,br.indexOf(l.verticalAlignment)),Ji(e,c),Ji(e,u),Ji(e,f),Ji(e,h)}var p={bounds:pr(i),slices:[]};o.forEach(function(e){var t=Qt(Qt({sliceID:e.id,groupID:e.groupId,origin:wt.encode(e.origin),Type:vt.encode(e.type),bounds:pr(e.bounds)},e.name?{"Nm  ":e.name}:{}),{url:e.url,null:e.target,Msge:e.message,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horzAlign:yt.encode(e.horizontalAlignment),vertAlign:bt.encode(e.verticalAlignment),bgColorType:kt.encode(e.backgroundColorType)});if("color"===e.backgroundColorType){var r=e.backgroundColor,n=r.r,i=r.g,a=r.b,o=r.a;t.bgColor={"Rd  ":n,"Grn ":i,"Bl  ":a,alpha:o}}t.topOutset=e.topOutset||0,t.leftOutset=e.leftOutset||0,t.bottomOutset=e.bottomOutset||0,t.rightOutset=e.rightOutset||0,p.slices.push(t)}),ye(e,"","null",p,"slices")}),tr(1064,function(e){return void 0!==e.pixelAspectRatio},function(e,t){if(Lr(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:Tr(e)}},function(e,t){na(e,2),aa(e,t.pixelAspectRatio.aspect)}),tr(1041,function(e){return void 0!==e.iccUntaggedProfile},function(e,t){t.iccUntaggedProfile=!!xr(e)},function(e,t){Ji(e,t.iccUntaggedProfile?1:0)}),tr(1044,function(e){return void 0!==e.idsSeedNumber},function(e,t){return t.idsSeedNumber=Lr(e)},function(e,t){return na(e,t.idsSeedNumber)}),tr(1036,function(e){return void 0!==e.thumbnail||void 0!==e.thumbnailRaw},function(e,t,r){var n=Lr(e),i=Lr(e),a=Lr(e);Lr(e),Lr(e),Lr(e);var o=Ar(e),s=Ar(e);if(1!==n||24!==o||1!==s)return e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(n,", bitsPerPixel: ").concat(o,", planes: ").concat(s,")")),void Wr(e,r());var l=zr(e,r());e.useRawThumbnail?t.thumbnailRaw={width:i,height:a,data:l}:l.byteLength&&(t.thumbnail=A(l))},function(e,t){var r,i=0,a=0,o=new Uint8Array(0);if(t.thumbnailRaw)i=t.thumbnailRaw.width,a=t.thumbnailRaw.height,o=t.thumbnailRaw.data;else try{var s=null===(r=t.thumbnail.toDataURL("image/jpeg",1))||void 0===r?void 0:r.substring(23);s&&(o=n.toByteArray(s),i=t.thumbnail.width,a=t.thumbnail.height)}catch(ee){}var l=4*Math.floor((24*i+31)/32),d=l*a*1,c=o.length;na(e,1),na(e,i),na(e,a),na(e,l),na(e,d),na(e,c),$i(e,24),$i(e,1),la(e,o)}),tr(1057,function(e){return void 0!==e.versionInfo},function(e,t,r){if(1!==Lr(e))throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!xr(e),writerName:Vr(e),readerName:Vr(e),fileVersion:Lr(e)},Wr(e,r())},function(e,t){var r=t.versionInfo;na(e,1),Ji(e,r.hasRealMergedData?1:0),fa(e,r.writerName),fa(e,r.readerName),na(e,r.fileVersion)}),tr(7e3,function(e){return void 0!==e.imageReadyVariables},function(e,t,r){t.imageReadyVariables=sr(e,r())},function(e,t){lr(e,t.imageReadyVariables)}),tr(7001,function(e){return void 0!==e.imageReadyDataSets},function(e,t,r){t.imageReadyDataSets=sr(e,r())},function(e,t){lr(e,t.imageReadyDataSets)}),tr(1088,function(e){return void 0!==e.pathSelectionState},function(e,t,r){var n=ve(e);t.pathSelectionState=n.null},function(e,t){ye(e,"","null",{null:t.pathSelectionState})});var wr=w("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});tr(4e3,function(e){return void 0!==e.animations},function(e,t,r){var n=Nr(e);if("mani"===n)Xr(e,"IRFR"),un(e,1,function(r){for(var n=function(){Xr(e,"8BIM");var r=Nr(e);un(e,1,function(n){if("AnDs"===r){var i=ve(e);t.animations={frames:i.FrIn.map(function(e){return{id:e.FrID,delay:(e.FrDl||0)/100,dispose:e.FrDs?wr.decode(e.FrDs):"auto"}}),animations:i.FSts.map(function(e){return{id:e.FsID,frames:e.FsFr,repeats:e.LCnt,activeFrame:e.AFrm||0}})}}else if("Roll"===r){var a=zr(e,n());e.logDevFeatures&&e.log("#4000 Roll",a)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",r)})};r()>0;)n()});else if("mopt"===n){var i=zr(e,r());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",n)},function(e,t){t.animations&&(ca(e,"mani"),ca(e,"IRFR"),ma(e,1,function(){ca(e,"8BIM"),ca(e,"AnDs"),ma(e,1,function(){for(var r={FrIn:[],FSts:[]},n=0;n<t.animations.frames.length;n++){var i=t.animations.frames[n],a={FrID:i.id};i.delay&&(a.FrDl=100*i.delay|0),a.FrDs=wr.encode(i.dispose),r.FrIn.push(a)}for(n=0;n<t.animations.animations.length;n++){var o=t.animations.animations[n],s={FsID:o.id,AFrm:0|o.activeFrame,FsFr:o.frames,LCnt:0|o.repeats};r.FSts.push(s)}ye(e,"","null",r)})}))});var kr=[0,1,3,2],Sr=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function _r(e){for(var t=e.width*e.height*4,r=0;r<t;r+=4)e.data[r+1]=e.data[r],e.data[r+2]=e.data[r]}function Fr(e,t,r){return{view:new DataView(e,t,r),offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}function Ir(e,t){if(e.strict)throw new Error(t);e.debug&&e.log(t)}function xr(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function Cr(e){return e.view.getUint8(e.offset)}function Dr(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function Ar(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function Or(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function Mr(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function Pr(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}function Lr(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function Er(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}function Tr(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function Rr(e){return Mr(e)/65536}function Br(e){return Mr(e)/(1<<24)}function zr(e,t){var r=e.view.byteOffset+e.offset;if(e.offset+=t,r+t>e.view.buffer.byteLength){if(Ir(e,"Reading bytes exceeding buffer length"),t>104857600)throw new Error("Reading past end of file");var n=new Uint8Array(t),i=Math.min(t,e.view.byteLength-r);return i>0&&n.set(new Uint8Array(e.view.buffer,r,i)),n}return new Uint8Array(e.view.buffer,r,t)}function Nr(e){return Zr(e,4)}function Ur(e,t){var r=String.fromCharCode(e.view.getUint8(t))+String.fromCharCode(e.view.getUint8(t+1))+String.fromCharCode(e.view.getUint8(t+2))+String.fromCharCode(e.view.getUint8(t+3));return"8BIM"==r||"8B64"==r}function Gr(e,t){for(var r=xr(e),n=r?Zr(e,r):"";++r%t;)e.offset++;return n}function Vr(e){return jr(e,Lr(e))}function jr(e,t){for(var r="";t--;){var n=Ar(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r}function Hr(e,t){for(var r="";t--;)r+=String.fromCharCode(xr(e));return r}function Wr(e,t){e.offset+=t}function Xr(e,t,r){var n=e.offset,i=Nr(e);if(i!==t&&i!==r)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(n.toString(16)))}function Zr(e,t){for(var r=zr(e,t),n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}function Kr(e){return"8BIM"===e||"MeSa"===e||"AgHg"===e||"PHUT"===e||"DCSR"===e}function Yr(e,t){var r;void 0===t&&(t={}),Xr(e,"8BPS");var n=Ar(e);if(1!==n&&2!==n)throw new Error("Invalid PSD file version: ".concat(n));Wr(e,6);var i=Ar(e),a=Lr(e),o=Lr(e),s=Ar(e),l=Ar(e),d=1===n?3e4:3e5;if(o>d||a>d)throw new Error("Invalid size: ".concat(o,"x").concat(a));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(s))throw new Error("Invalid bitsPerChannel: ".concat(s));if(-1===kr.indexOf(l))throw new Error("Color mode not supported: ".concat(null!==(r=Sr[l])&&void 0!==r?r:l));var c={width:o,height:a,channels:i,bitsPerChannel:s,colorMode:l};Object.assign(e,t),e.large=2===n,e.globalAlpha=!1;var u=[0,1,-1,2,-2,3,-3,4,-4];un(e,1,function(t){if(t()){if(2===l){if(768!=t())throw new Error("Invalid color palette size");c.palette=[];for(var r=0;r<256;r++)c.palette.push({r:xr(e),g:0,b:0});for(r=0;r<256;r++)c.palette[r].g=xr(e);for(r=0;r<256;r++)c.palette[r].b=xr(e)}Wr(e,t())}});var f={};un(e,1,function(t){for(var r=function(){for(var t=e.offset,r="",n=0,i=u;n<i.length;n++){var a=i[n];try{e.offset=t+a,r=Nr(e)}catch(s){}if(Kr(r))break}if(!Kr(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(t.toString(16)));var o=Ar(e);Gr(e,2),un(e,2,function(t){var r=er[o],n=1036===o&&!!e.skipThumbnail;if(r&&!n)try{r.read(e,f,t)}catch(i){if(e.throwForMissingFeatures)throw i;Wr(e,t())}else Wr(e,t())})};t()>0;)r()});var h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(f,["layersGroup","layerGroupsEnabledId"]);Object.keys(h)&&(c.imageResources=h),un(e,1,function(t){if(un(e,2,function(t){qr(e,c,f),Wr(e,t())},void 0,e.large),t()>0){var r=function(e){return un(e,1,function(t){if(t()){var r=Ar(e),n=Ar(e),i=Ar(e),a=Ar(e),o=Ar(e),s=Ar(e)/255,l=xr(e);return Wr(e,t()),{overlayColorSpace:r,colorSpace1:n,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:s,kind:l}}})}(e);r&&(c.globalLayerMaskInfo=r)}else Wr(e,t());for(;t()>0;){for(;t()&&0===Cr(e);)Wr(e,1);t()>=12?tn(e,c,c,f):Wr(e,t())}},void 0,e.large);var p=c.children&&c.children.length;return e.skipCompositeImageData&&(e.skipLayerImageData||p)||function(e,t){var r,n=Ar(e),i=null!==(r=t.bitsPerChannel)&&void 0!==r?r:8;if(-1===kr.indexOf(t.colorMode))throw new Error("Color mode not supported: ".concat(t.colorMode));if(0!==n&&1!==n)throw new Error("Compression type not supported: ".concat(n));var a=rn(t.width,t.height,i);switch(F(a),t.colorMode){case 0:if(1!==i)throw new Error("Invalid bitsPerChannel for bitmap color mode");var o=void 0;if(0===n)o=zr(e,Math.ceil(t.width/8)*t.height);else{if(1!==n)throw new Error("Bitmap compression not supported: ".concat(n));cn(e,{data:o=new Uint8Array(t.width*t.height),width:t.width,height:t.height},t.width,t.height,8,1,[0],e.large)}!function(e,t,r,n){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,a=0,o=0;i<n;i++)for(var s=0;s<r;)for(var l=e[o++],d=0;d<8&&s<r;d++,s++,a+=4){var c=128&l?0:255;l<<=1,t[a+0]=c,t[a+1]=c,t[a+2]=c,t[a+3]=255}}(o,a.data,t.width,t.height);break;case 3:case 1:var s=1===t.colorMode?[0]:[0,1,2];if(t.channels&&t.channels>3)for(var l=3;l<t.channels;l++)s.push(l);else e.globalAlpha&&s.push(3);if(0===n)for(l=0;l<s.length;l++)sn(e,a,t.width,t.height,i,4,s[l]);else 1===n&&(e.offset,cn(e,a,t.width,t.height,i,4,s,e.large));1===t.colorMode&&_r(a);break;case 2:if(8!==i)throw new Error("bitsPerChannel Not supproted");if(1!==t.channels)throw new Error("Invalid channel count");if(!t.palette)throw new Error("Missing color palette");if(0===n)throw new Error("Not implemented");if(1!==n)throw new Error("Not implemented");var d={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height)};cn(e,d,t.width,t.height,i,1,[0],e.large),function(e,t,r){for(var n=e.width*e.height,i=e.data,a=t.data,o=0,s=0;o<n;o++,s+=4){var l=r[i[o]];a[s+0]=l.r,a[s+1]=l.g,a[s+2]=l.b,a[s+3]=255}}(d,a,t.palette);break;case 4:if(8!==i)throw new Error("bitsPerChannel Not supproted");if(4!==t.channels)throw new Error("Invalid channel count");s=[0,1,2,3];if(e.globalAlpha&&s.push(4),0===n)throw new Error("Not implemented");if(1!==n)throw new Error("Not implemented");var c={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height*5)};e.offset,cn(e,c,t.width,t.height,i,5,s,e.large),nn(c,a,!0);break;default:throw new Error("Color mode not supported: ".concat(t.colorMode))}if(e.globalAlpha){if(8!==t.bitsPerChannel)throw new Error("bitsPerChannel Not supproted");var u=a.data,f=a.width*a.height*4;for(l=0;l<f;l+=4){var h=u[l+3];if(0!=h&&255!=h){var p=1/(h/255),m=255*(1-p);u[l+0]=u[l+0]*p+m,u[l+1]=u[l+1]*p+m,u[l+2]=u[l+2]*p+m}}}e.useImageData?t.imageData=a:t.canvas=I(a)}(e,c),c}function qr(e,t,r){var n,i,a=r.layersGroup,o=void 0===a?[]:a,l=r.layerGroupsEnabledId,d=void 0===l?[]:l,c=Dr(e);c<0&&(e.globalAlpha=!0,c=-c);for(var u=[],f=[],h=0;h<c;h++){var p=Jr(e,t,r),m=p.layer,g=p.channels;void 0!==o[h]&&(m.linkGroup=o[h]),void 0!==d[h]&&(m.linkGroupEnabled=!!d[h]),u.push(m),f.push(g)}if(!e.skipLayerImageData)for(h=0;h<c;h++)$r(e,t,u[h],f[h]);t.children||(t.children=[]);var v=[t];for(h=u.length-1;h>=0;h--){var y=u[h],b=y.sectionDivider?y.sectionDivider.type:0;1===b||2===b?(y.opened=1===b,y.children=[],(null===(n=y.sectionDivider)||void 0===n?void 0:n.key)&&(y.blendMode=null!==(i=s[y.sectionDivider.key])&&void 0!==i?i:y.blendMode),v[v.length-1].children.unshift(y),v.push(y)):3===b?v.pop():v[v.length-1].children.unshift(y)}}function Jr(e,t,r){var n={};n.top=Mr(e),n.left=Mr(e),n.bottom=Mr(e),n.right=Mr(e);for(var i=Ar(e),a=[],o=0;o<i;o++){var l=Dr(e),d=Lr(e);if(e.large){if(0!==d)throw new Error("Sizes larger than 4GB are not supported");d=Lr(e)}a.push({id:l,length:d})}Xr(e,"8BIM");var c=Nr(e);if(!s[c])throw new Error("Invalid blend mode: '".concat(c,"'"));n.blendMode=s[c],n.opacity=xr(e)/255,n.clipping=1===xr(e);var u=xr(e);return n.transparencyProtected=!!(1&u),n.hidden=!!(2&u),32&u&&(n.effectsOpen=!0),Wr(e,1),un(e,1,function(i){!function(e,t){un(e,1,function(r){if(r()){var n={};t.mask=n,n.top=Mr(e),n.left=Mr(e),n.bottom=Mr(e),n.right=Mr(e),n.defaultColor=xr(e);var i=xr(e);if(n.positionRelativeToLayer=!!(1&i),n.disabled=!!(2&i),n.fromVectorData=!!(8&i),r()>=18){var a={};t.realMask=a;var o=xr(e);a.positionRelativeToLayer=!!(1&o),a.disabled=!!(2&o),a.fromVectorData=!!(8&o),a.defaultColor=xr(e),a.top=Mr(e),a.left=Mr(e),a.bottom=Mr(e),a.right=Mr(e)}if(16&i){var s=xr(e);1&s&&(n.userMaskDensity=xr(e)/255),2&s&&(n.userMaskFeather=Tr(e)),4&s&&(n.vectorMaskDensity=xr(e)/255),8&s&&(n.vectorMaskFeather=Tr(e))}Wr(e,r())}})}(e,n);var a=function(e){return un(e,1,function(t){for(var r=Qr(e),n=Qr(e),i=[];t()>0;){var a=Qr(e),o=Qr(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:r,compositeGraphBlendDestinationRange:n,ranges:i}})}(e);for(a&&(n.blendingRanges=a),n.name=Gr(e,1);i()>4&&!Ur(e,e.offset);)e.offset++;for(;i()>=12;)tn(e,n,t,r);Wr(e,i())}),{layer:n,channels:a}}function Qr(e){return[xr(e),xr(e),xr(e),xr(e)]}function $r(e,t,r,n){var i,a,o,s,l,d=(r.right||0)-(r.left||0),c=(r.bottom||0)-(r.top||0),u=4===t.colorMode;if(d&&c)if(u){if(8!==t.bitsPerChannel)throw new Error("bitsPerChannel Not supproted");l={width:d,height:c,data:new Uint8ClampedArray(d*c*5)};for(var f=4;f<l.data.byteLength;f+=5)l.data[f]=255}else F(l=rn(d,c,null!==(i=t.bitsPerChannel)&&void 0!==i?i:8));for(var h=0,p=n;h<p.length;h++){var m=p[h];if(0!==m.length){if(m.length<2)throw new Error("Invalid channel length");var g=e.offset,v=Ar(e);if(v>3&&(e.offset-=1,v=Ar(e)),v>3&&(e.offset-=3,v=Ar(e)),v>3)throw new Error("Invalid compression: ".concat(v));if(-2===m.id||-3===m.id){var y=-2===m.id?r.mask:r.realMask;if(!y)throw new Error("Missing layer ".concat(-2===m.id?"mask":"real mask"," data"));var b=(y.right||0)-(y.left||0),w=(y.bottom||0)-(y.top||0);if(b<0||w<0||b>3e4||w>3e4)throw new Error("Invalid mask size");if(b&&w){var S=rn(b,w,null!==(a=t.bitsPerChannel)&&void 0!==a?a:8);F(S),e.offset,en(e,m.length,S,v,b,w,null!==(o=t.bitsPerChannel)&&void 0!==o?o:8,0,e.large,4),_r(S),e.useImageData?y.imageData=S:y.canvas=I(S)}}else{var _=k(m.id,u),x=l;if(_<0&&(x=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(m.id));en(e,m.length,x,v,d,c,null!==(s=t.bitsPerChannel)&&void 0!==s?s:8,_,e.large,u?5:4),e.offset=g+m.length,x&&1===t.colorMode&&_r(x)}}}if(l){if(u){var C=l;nn(C,l=M(C.width,C.height),!1)}e.useImageData?r.imageData=l:r.canvas=I(l)}}function en(e,t,r,n,i,a,o,s,l,d){if(0===n)sn(e,r,i,a,o,d,s);else if(1===n)cn(e,r,i,a,o,d,[s],l);else if(2===n)dn(e,t,r,i,a,o,d,s,!1);else{if(3!==n)throw new Error("Invalid Compression type: ".concat(n));dn(e,t,r,i,a,o,d,s,!0)}}function tn(e,t,r,n){var i=Nr(e);if("8BIM"!==i&&"8B64"!==i)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat((e.offset-4).toString(16)));var a=Nr(e),o="8B64"===i||e.large&&-1!==b.indexOf(a);un(e,2,function(i){var o=ai[a];if(o)try{o.read(e,t,i,r,n)}catch(s){if(e.throwForMissingFeatures)throw s}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(a)),Wr(e,i());i()&&(e.logMissingFeatures&&e.log("Unread ".concat(i()," bytes left for additional info: ").concat(a)),Wr(e,i()))},!1,o)}function rn(e,t,r,n){if(void 0===n&&(n=4),1===r||8===r)return 4===n?M(e,t):{width:e,height:t,data:new Uint8ClampedArray(e*t*n)};if(16===r)return{width:e,height:t,data:new Uint16Array(e*t*n)};if(32===r)return{width:e,height:t,data:new Float32Array(e*t*n)};throw new Error("Invalid bitDepth (".concat(r,")"))}function nn(e,t,r){for(var n=t.width*t.height*4,i=e.data,a=t.data,o=0,s=0;s<n;o+=5,s+=4){var l=i[o],d=i[o+1],c=i[o+2],u=i[o+3];a[s]=(l*u|0)/255|0,a[s+1]=(d*u|0)/255|0,a[s+2]=(c*u|0)/255|0,a[s+3]=r?255-i[o+4]:i[o+4]}}function an(e,t){if(8===t)return e;if(16===t){if(e.byteOffset%2){var r=new Uint16Array(e.byteLength/2);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength).set(e),r}return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2)}if(32===t){if(e.byteOffset%4){r=new Float32Array(e.byteLength/4);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength).set(e),r}return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4)}throw new Error("Invalid bitDepth (".concat(t,")"))}function on(e,t,r,n){!function(e,t){if(e.byteLength/e.length!==t.byteLength/t.length)throw new Error("Invalid array types")}(e.data,t);for(var i=e.width*e.height,a=e.data,o=0,s=0|r;o<i;o++,s=s+n|0)a[s]=t[o]}function sn(e,t,r,n,i,a,o){var s=zr(e,r*n*Math.floor(i/8));if(32==i)for(var l=0;l<s.byteLength;l+=4){var d=s[l+0],c=s[l+1],u=s[l+2],f=s[l+3];s[l+0]=f,s[l+1]=u,s[l+2]=c,s[l+3]=d}var h=an(s,i);t&&o<a&&on(t,h,o,a)}function ln(e,t,r,n){for(var i=0;i<r;i++)for(var a=1,o=i*t+1;a<t;a++,o++)e[o]=(e[o-1]+e[o])%n}function dn(e,t,r,n,i,o,s,l,d){var c=zr(e,t),u=a.inflate(c);if(r&&l<s){var f=an(u,o);if(8===o)d&&ln(u,n,i,256),on(r,u,l,s);else if(16===o)d&&ln(f,n,i,65536),on(r,f,l,s);else{if(32!==o)throw new Error("Invalid bitDepth");d&&ln(u,4*n,i,256);for(var h=l,p=new Uint32Array(r.data.buffer,r.data.byteOffset,r.data.length),m=0;m<i;m++)for(var g=4*n*m,v=0;v<n;v++,g++,h+=s){var y=g+n,b=y+n,w=b+n;p[h]=(u[g]<<24|u[y]<<16|u[b]<<8|u[w])>>>0}}}}function cn(e,t,r,n,i,a,o,s){var l,d=t&&t.data;if(s){l=new Uint32Array(o.length*n);for(var c=0,u=0;c<o.length;c++)for(var f=0;f<n;f++,u++)l[u]=Lr(e)}else{l=new Uint16Array(o.length*n);for(c=0,u=0;c<o.length;c++)for(f=0;f<n;f++,u++)l[u]=Ar(e)}if(1!==i&&8!==i)throw new Error("Invalid bit depth (".concat(i,")"));var h=a-1|0,p=0;for(u=0;p<o.length;p++){var m=0|o[p];if(!d||(p>h||m>h))for(f=0;f<n;f++,u++)Wr(e,l[u]);else{f=0;for(var g=0|m;f<n;f++,u++)for(var v=l[u],y=zr(e,v),b=0,w=0;b<v;b++){var k=y[b];if(k>128){var S=y[++b];k=256-k|0;for(var _=0;_<=k&&w<r;_=_+1|0,w=w+1|0)d[g]=S,g=g+a|0}else if(k<128)for(_=0;_<=k&&w<r;_=_+1|0,w=w+1|0)d[g]=y[++b],g=g+a|0}}}}function un(e,t,r,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var a=Lr(e);if(i){if(0!==a)throw new Error("Sizes larger than 4GB are not supported");a=Lr(e)}if(!(a<=0&&n)){var o=e.offset+a;if(o>e.view.byteLength)throw new Error("Section exceeds file size");var s=r(function(){return o-e.offset});for(e.offset!==o&&(e.offset>o?Ir(e,"Exceeded section limits"):Ir(e,"Unread section data"));o%t;)o++;return e.offset=o,s}}function fn(e){switch(Ar(e)){case 0:var t=Ar(e)/257,r=Ar(e)/257,n=Ar(e)/257;return Wr(e,2),{r:t,g:r,b:n};case 1:var i=Ar(e)/65535,a=Ar(e)/65535;n=Ar(e)/65535;return Wr(e,2),{h:i,s:a,b:n};case 2:return{c:Ar(e)/257,m:Ar(e)/257,y:Ar(e)/257,k:c=Ar(e)/257};case 7:var o=Dr(e)/1e4,s=Dr(e),l=Dr(e),d=s<0?s/12800:s/12700;n=l<0?l/12800:l/12700;return Wr(e,2),{l:o,a:d,b:n};case 8:var c=255*Ar(e)/1e4;return Wr(e,6),{k:c};default:throw new Error("Invalid color space")}}function hn(e){Lr(e);var t=Lr(e);if(1!==t)throw new Error("Invalid pattern version: ".concat(t));var r=Lr(e),n=Dr(e),i=Dr(e);if(3!==r&&1!==r&&2!==r)throw new Error("Unsupported pattern color mode: ".concat(r));var a=Vr(e),o=Gr(e,1),s=[];if(2===r){for(var l=0;l<256;l++)s.push({r:xr(e),g:xr(e),b:xr(e)});Wr(e,4)}var d=Lr(e);if(3!==d)throw new Error("Invalid pattern VMAL version: ".concat(d));Lr(e);var c=Lr(e),u=Lr(e),f=Lr(e),h=Lr(e),p=Lr(e),m=h-u,g=f-c,v=new Uint8Array(m*g*4);for(l=3;l<v.byteLength;l+=4)v[l]=255;l=0;for(var y=0;l<p+2;l++){if(Lr(e)){var b=Lr(e),w=Lr(e),k=Lr(e),S=Lr(e),_=Lr(e),F=Lr(e),I=Ar(e),x=xr(e),C=zr(e,b-23);if(8!==w||8!==I)throw new Error("16bit pixel depth not supported for patterns");var D=F-S,A=_-k,O=S-u,M=k-c;if(0===x){if(3===r&&y<3)for(var P=0;P<A;P++)for(var L=0;L<D;L++){var E=L+P*D;v[(B=4*(O+L+(P+M)*m))+y]=C[E]}if(1===r&&y<1)for(var T=0;T<A;T++)for(var R=0;R<D;R++){var B=4*(O+R+(T+M)*m),z=C[E=R+T*D];v[B+0]=z,v[B+1]=z,v[B+2]=z}if(2===r)throw new Error("Indexed pattern color mode not implemented")}else{if(1!==x)throw new Error("Invalid pattern compression mode");e.log("Unsupported pattern compression"),a+=" (failed to decode)"}y++}}return{id:o,name:a,x:n,y:i,bounds:{x:u,y:c,w:m,h:g},data:v}}var pn=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function mn(e){return Xr(e,"8BIM"),s[Nr(e)]||"normal"}function gn(e,t){ca(e,"8BIM"),ca(e,o[t]||"norm")}function vn(e){return xr(e)/255}function yn(e,t){Ji(e,0|Math.round(255*t))}function bn(e,t){var r;na(e,51),na(e,2),oa(e,t.size&&t.size.value||0),oa(e,0),oa(e,t.angle||0),oa(e,t.distance&&t.distance.value||0),Ca(e,t.color),gn(e,t.blendMode),Ji(e,t.enabled?1:0),Ji(e,t.useGlobalLight?1:0),yn(e,null!==(r=t.opacity)&&void 0!==r?r:1),Ca(e,t.color)}function wn(e){return 32===e||10===e||13===e||9===e}function kn(e){return e>=48&&e<=57||46===e||45===e}function Sn(e){var t=0;function r(){for(;t<e.length&&wn(e[t]);)t++}function n(){var r=e[t];return t++,92===r&&(r=e[t],t++),r}function i(){var r="";if(41===e[t])return t++,r;if(254!==e[t]||255!==e[t+1])throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&41!==e[t];){var i=n()<<8|n();r+=String.fromCharCode(i)}return t++,r}var a=null,o=[];function s(e){o.length?(l(e),o.push(e)):(o.push(e),a=e)}function l(e){if(!o.length)throw new Error("Invalid data");var t=o[o.length-1];if("string"==typeof t)o[o.length-2][t]=e,c();else{if(!Array.isArray(t))throw new Error("Invalid data");t.push(e)}}function d(e){o.length||s({});var t=o[o.length-1];if(t&&"string"==typeof t)l("nil"===e?null:"/".concat(e));else{if(!t||"object"!=typeof t)throw new Error("Invalid data");o.push(e)}}function c(){if(!o.length)throw new Error("Invalid data");o.pop()}r();for(var u=e.length;u>0&&0===e[u-1];)u--;for(;t<u;){var f=t,h=e[f];if(60===h&&60===e[f+1])t+=2,s({});else if(62===h&&62===e[f+1])t+=2,c();else if(47===h){for(var p=t+=1;t<e.length&&!wn(e[t]);)t++;for(var m="",g=p;g<t;g++)m+=String.fromCharCode(e[g]);d(m)}else if(40===h)t+=1,l(i());else if(91===h)t+=1,s([]);else if(93===h)t+=1,c();else if(110===h&&117===e[f+1]&&108===e[f+2]&&108===e[f+3])t+=4,l(null);else if(116===h&&114===e[f+1]&&117===e[f+2]&&101===e[f+3])t+=4,l(!0);else if(102===h&&97===e[f+1]&&108===e[f+2]&&115===e[f+3]&&101===e[f+4])t+=5,l(!1);else if(kn(h)){for(var v="";t<e.length&&kn(e[t]);)v+=String.fromCharCode(e[t]),t++;l(parseFloat(v))}else t+=1,console.log("Invalid token '".concat(String.fromCharCode(h),"' (").concat(h,") at ").concat(t));r()}return a}var _n=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],Fn=["RunLengthArray"];function In(e,t){void 0===t&&(t=!1);var r=new Uint8Array(1024),n=0,i=0;function a(e){if(n>=r.length){var t=new Uint8Array(2*r.length);t.set(r),r=t}r[n]=e,n++}function o(e){for(var t=0;t<e.length;t++)a(e.charCodeAt(t))}function s(){if(t)o(" ");else for(var e=0;e<i;e++)o("\t")}function l(e,r){s(),o("/".concat(e)),h(r,e,!0),t||o("\n")}function d(e){return e.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function c(e,t){return t&&-1!==_n.indexOf(t)||(0|e)!==e?d(e):function(e){return e.toString()}(e)}function u(e){var t=Object.keys(e);return-1!==t.indexOf("98")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),-1!==t.indexOf("99")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),t}function f(e){40!==e&&41!==e&&92!==e||a(92),a(e)}function h(e,r,n){function p(){n?o(" "):s()}if(void 0===n&&(n=!1),null===e)p(),o(t?"/nil":"null");else if("number"==typeof e)p(),o(c(e,r));else if("boolean"==typeof e)p(),o(e?"true":"false");else if("string"==typeof e)if(p(),"99"!==r&&"98"!==r||"/"!==e.charAt(0)){o("("),a(254),a(255);for(var m=0;m<e.length;m++){var g=e.charCodeAt(m);f(g>>8&255),f(255&g)}o(")")}else o(e);else if(Array.isArray(e))if(p(),e.every(function(e){return"number"==typeof e})){o("[");for(var v=-1!==Fn.indexOf(r),y=0,b=e;y<b.length;y++){var w=b[y];o(" "),o(v?c(w):d(w))}o(" ]")}else{o("["),t||o("\n");for(var k=0,S=e;k<S.length;k++){h(w=S[k],r),t||o("\n")}s(),o("]")}else if("object"==typeof e){n&&!t&&o("\n"),s(),o("<<"),t||o("\n"),i++;for(var _=0,F=u(e);_<F.length;_++){var I=F[_];l(I,e[I])}i--,s(),o(">>")}}if(t){if("object"==typeof e)for(var p=0,m=u(e);p<m.length;p++){var g=m[p];l(g,e[g])}}else o("\n\n"),h(e);return r.slice(0,n)}var xn=function(){return xn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xn.apply(this,arguments)},Cn={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},Dn={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},An={font:Cn,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},On={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Mn=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Pn=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],Ln=["none","crisp","strong","smooth","sharp"],En=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function Tn(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function Rn(e){var t=e.Values;switch(e.Type){case 0:return{k:255*t[1]};case 1:return 1===t[0]?{r:255*t[1],g:255*t[2],b:255*t[3]}:{r:255*t[1],g:255*t[2],b:255*t[3],a:255*t[0]};case 2:return{c:255*t[1],m:255*t[2],y:255*t[3],k:255*t[4]};default:throw new Error("Unknown color type in text layer")}}function Bn(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}return{Type:1,Values:[0,0,0,0]}}function zn(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Nn(e,t){if(!e||!t)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++){if(e[o=n[r]]!==t[o])return!1}for(var i=0,a=Object.keys(t);i<a.length;i++){var o;if(e[o=a[i]]!==t[o])return!1}return!0}function Un(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t.name)return r;return e.push(t),e.length-1}function Gn(e,t,r){for(var n={},i=0,a=t;i<a.length;i++){var o=a[i],s=Tn(o);void 0!==e[s]&&(n[o]="justification"===o?En[e[s]]:"font"===o?r[e[s]]:"fillColor"===o||"strokeColor"===o?Rn(e[s]):e[s])}return n}function Vn(e,t,r){for(var n,i={},a=0,o=t;a<o.length;a++){var s=o[a],l=Tn(s);void 0!==e[s]&&(i[l]="justification"===s?En.indexOf(null!==(n=e[s])&&void 0!==n?n:"left"):"font"===s?Un(r,e[s]):"fillColor"===s||"strokeColor"===s?Bn(e[s]):e[s])}return i}function jn(e,t){return Gn(e,Mn,t)}function Hn(e,t){return Gn(e,Pn,t)}function Wn(e,t){return Vn(e,Mn,t)}function Xn(e,t){return Vn(e,Pn,t)}function Zn(e,t,r){if(t.length){for(var n=function(r){var n=t[0].style[r];if(void 0!==n){(Array.isArray(n)?t.every(function(e){return zn(e.style[r],n)}):"object"==typeof n?t.every(function(e){return Nn(e.style[r],n)}):t.every(function(e){return e.style[r]===n}))&&(e[r]=n)}if(void 0!==e[r])for(var i=0,a=t;i<a.length;i++){var o=a[i];(Array.isArray(n)?zn(o.style[r],n):"object"==typeof n?Nn(o.style[r],n):o.style[r]===n)&&delete o.style[r]}},i=0,a=r;i<a.length;i++){n(a[i])}t.every(function(e){return 0===Object.keys(e.style).length})&&(t.length=0)}}function Kn(e){var t,r,n,i,a,o,s,l,d,c,u,f,h="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),p=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],m=(null===(t=e.style)||void 0===t?void 0:t.font)||(null===(n=null===(r=e.styleRuns)||void 0===r?void 0:r.find(function(e){return e.style.font}))||void 0===n?void 0:n.style.font)||Cn,g=[],v=[],y=e.paragraphStyleRuns;if(y&&y.length){for(var b=h.length,w=0,k=y;w<k.length;w++){var S=k[w];b-=P=Math.min(S.length,b),P&&(1===b&&S===y[y.length-1]&&(P++,b--),v.push(P),g.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Wn(xn(xn(xn({},Dn),e.paragraphStyle),S.style),p)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}b&&(v.push(b),g.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Wn(xn(xn({},Dn),e.paragraphStyle),p)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var _=0,F=0;_<h.length;_++)13===h.charCodeAt(_)&&(v.push(_-F+1),g.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Wn(xn(xn({},Dn),e.paragraphStyle),p)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),F=_+1);for(var I=Xn(xn(xn({},An),{font:m}),p),x=e.styleRuns||[{length:h.length,style:e.style||{}}],C=[],D=[],A=h.length,O=0,M=x;O<M.length;O++){var P,L=M[O];A-=P=Math.min(L.length,A),P&&(1===A&&L===x[x.length-1]&&(P++,A--),D.push(P),C.push({StyleSheet:{StyleSheetData:Xn(xn(xn({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),L.style),p)}}))}A&&x.length&&(D.push(A),C.push({StyleSheet:{StyleSheetData:Xn(xn({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),p)}}));var E=xn(xn({},On),e.gridInfo),T="vertical"===e.orientation?2:0,R="vertical"===e.orientation?1:0,B="box"===e.shapeType?1:0,z={ShapeType:B};0===B?z.PointBase=e.pointBase||[0,0]:z.BoxBounds=e.boxBounds||[0,0,0,0],z.Base={ShapeType:B,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var N={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"、。，．・：；？！ー―’”）〕］｝〉》」』】ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ゛゜?!)]},.:;℃℉¢％‰",NoEnd:"‘“（〔［｛〈《「『【([{￥＄£＠§〒＃",Keep:"―‥",Hanging:"、。.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"、。，．・：；？！’”）〕］｝〉》」』】ヽヾゝゞ々",NoEnd:"‘“（〔［｛〈《「『【",Keep:"―‥",Hanging:"、。.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:Wn(xn(xn({},Dn),e.paragraphStyle),p)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:I}],FontSet:p.map(function(e){return{Name:e.name,Script:e.script||0,FontType:e.type||0,Synthetic:e.synthetic||0}}),SuperscriptSize:null!==(i=e.superscriptSize)&&void 0!==i?i:.583,SuperscriptPosition:null!==(a=e.superscriptPosition)&&void 0!==a?a:.333,SubscriptSize:null!==(o=e.subscriptSize)&&void 0!==o?o:.583,SubscriptPosition:null!==(s=e.subscriptPosition)&&void 0!==s?s:.333,SmallCapSize:null!==(l=e.smallCapSize)&&void 0!==l?l:.7};return{EngineDict:{Editor:{Text:h},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:g,RunLengthArray:v,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:C,RunLengthArray:D,IsJoinable:2},GridInfo:{GridIsOn:!!E.isOn,ShowGrid:!!E.show,GridSize:null!==(d=E.size)&&void 0!==d?d:18,GridLeading:null!==(c=E.leading)&&void 0!==c?c:22,GridColor:Bn(E.color),GridLeadingFillColor:Bn(E.color),AlignLineHeightToGridFlags:!!E.alignLineHeightToGridFlags},AntiAlias:Ln.indexOf(null!==(u=e.antiAlias)&&void 0!==u?u:"sharp"),UseFractionalGlyphWidths:null===(f=e.useFractionalGlyphWidths)||void 0===f||f,Rendered:{Version:1,Shapes:{WritingDirection:T,Children:[{ShapeType:B,Procession:R,Lines:{WritingDirection:T,Children:[]},Cookie:{Photoshop:z}}]}}},ResourceDict:xn({},N),DocumentResources:xn({},N)}}var Yn={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},qn={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:Yn},54:{name:"StrokeColor",children:Yn},55:{children:{99:{uproot:!0}}},79:{children:Yn}},Jn={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:qn}},Qn={name:"StyleSheetData",children:qn},$n={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:Qn}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:Jn},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:Jn},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:Qn}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:qn},3:{name:"ParagraphSheet",children:Jn}}}};function ei(e,t){var r,n;if(null===e)return e;if(Array.isArray(e))return e.map(function(e){return ei(e,t)});if("object"!=typeof e)return e;for(var i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];if(t[s]){if(t[s].uproot){"99"!==s&&(i=ei(e[s],null!==(r=t[s].children)&&void 0!==r?r:{})),e[99]&&(i._type=e[99]);break}i[t[s].name||s]=ei(e[s],null!==(n=t[s].children)&&void 0!==n?n:{})}else"99"===s?i._type=e[s]:i[s]=ei(e[s],{})}return i}function ti(e){return ei(e,$n)}var ri=function(){return ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ri.apply(this,arguments)},ni="abcdefghijklmnopqrstuvwxyz",ii=[],ai={};function oi(e,t,r,n){var i={key:e,has:t,read:r,write:n};ii.push(i),ai[i.key]=i}function si(e,t){ai[e]=ai[t]}function li(e){return function(t){return void 0!==t[e]}}function di(e){if(Lr(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return Lr(e)}function ci(e,t){na(e,0),na(e,t)}function ui(e,t,r){var n=Br(e)*r,i=Br(e)*t,a=Br(e)*r,o=Br(e)*t,s=Br(e)*r;return[i,n,o,a,Br(e)*t,s]}function fi(e,t,r,n){sa(e,t[1]/n),sa(e,t[0]/r),sa(e,t[3]/n),sa(e,t[2]/r),sa(e,t[5]/n),sa(e,t[4]/r)}oi("TySh",li("text"),function(e,t,r){if(1!==Dr(e))throw new Error("Invalid TySh version");for(var n=[],i=0;i<6;i++)n.push(Tr(e));if(50!==Dr(e))throw new Error("Invalid TySh text version");var a=ve(e);if(1!==Dr(e))throw new Error("Invalid TySh warp version");var o=ve(e);if(t.text={transform:n,left:Er(e),top:Er(e),right:Er(e),bottom:Er(e),text:a["Txt "].replace(/\r/g,"\n"),index:a.TextIndex||0,gridding:et.decode(a.textGridding),antiAlias:rt.decode(a.AntA),orientation:tt.decode(a.Ornt),warp:{style:nt.decode(o.warpStyle),value:o.warpValue||0,perspective:o.warpPerspective||0,perspectiveOther:o.warpPerspectiveOther||0,rotate:tt.decode(o.warpRotate)}},a.bounds&&(t.text.bounds=ke(a.bounds)),a.boundingBox&&(t.text.boundingBox=ke(a.boundingBox)),a.EngineData){var s=function(e){for(var t,r,n,i,a,o,s=e.EngineDict,l=e.ResourceDict,d=l.FontSet.map(function(e){return{name:e.Name,script:e.Script,type:e.FontType,synthetic:e.Synthetic}}),c=s.Editor.Text.replace(/\r/g,"\n"),u=0;/\n$/.test(c);)c=c.substring(0,c.length-1),u++;var f={text:c,antiAlias:null!==(t=Ln[s.AntiAlias])&&void 0!==t?t:"smooth",useFractionalGlyphWidths:!!s.UseFractionalGlyphWidths,superscriptSize:l.SuperscriptSize,superscriptPosition:l.SuperscriptPosition,subscriptSize:l.SubscriptSize,subscriptPosition:l.SubscriptPosition,smallCapSize:l.SmallCapSize},h=null===(o=null===(a=null===(i=null===(n=null===(r=s.Rendered)||void 0===r?void 0:r.Shapes)||void 0===n?void 0:n.Children)||void 0===i?void 0:i[0])||void 0===a?void 0:a.Cookie)||void 0===o?void 0:o.Photoshop;h&&(f.shapeType=1===h.ShapeType?"box":"point",h.PointBase&&(f.pointBase=h.PointBase),h.BoxBounds&&(f.boxBounds=h.BoxBounds));var p=s.ParagraphRun;f.paragraphStyle={},f.paragraphStyleRuns=[];for(var m=0;m<p.RunArray.length;m++){var g=p.RunArray[m],v=p.RunLengthArray[m],y=jn(g.ParagraphSheet.Properties,d);f.paragraphStyleRuns.push({length:v,style:y})}for(var b=u;f.paragraphStyleRuns.length&&b>0;b--)0===--f.paragraphStyleRuns[f.paragraphStyleRuns.length-1].length&&f.paragraphStyleRuns.pop();Zn(f.paragraphStyle,f.paragraphStyleRuns,Mn),f.paragraphStyleRuns.length||delete f.paragraphStyleRuns;var w=s.StyleRun;for(f.style={},f.styleRuns=[],m=0;m<w.RunArray.length;m++){var k=w.RunLengthArray[m];(y=Hn(w.RunArray[m].StyleSheet.StyleSheetData,d)).font||(y.font=d[0]),f.styleRuns.push({length:k,style:y})}for(b=u;f.styleRuns.length&&b>0;b--)0===--f.styleRuns[f.styleRuns.length-1].length&&f.styleRuns.pop();return Zn(f.style,f.styleRuns,Pn),f.styleRuns.length||delete f.styleRuns,f}(Sn(a.EngineData));t.text=ri(ri({},t.text),s)}Wr(e,r())},function(e,t){var r=t.text,n=r.warp||{},i=r.transform||[1,0,0,1,0,0],a=ri(ri(ri({"Txt ":(r.text||"").replace(/\r?\n/g,"\r"),textGridding:et.encode(r.gridding),Ornt:tt.encode(r.orientation),AntA:rt.encode(r.antiAlias)},r.bounds?{bounds:Se(r.bounds)}:{}),r.boundingBox?{boundingBox:Se(r.boundingBox)}:{}),{TextIndex:r.index||0,EngineData:In(Kn(r))});Qi(e,1);for(var o=0;o<6;o++)aa(e,i[o]);Qi(e,50),ye(e,"","TxLr",a,"text"),Qi(e,1),ye(e,"","warp",yi(n)),ia(e,r.left),ia(e,r.top),ia(e,r.right),ia(e,r.bottom)}),oi("SoCo",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"color"===e.vectorFill.type},function(e,t){var r=ve(e);t.vectorFill=Be(r)},function(e,t){ye(e,"","null",Ue(t.vectorFill).descriptor)}),oi("GdFl",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&("solid"===e.vectorFill.type||"noise"===e.vectorFill.type)},function(e,t,r){var n=ve(e);t.vectorFill=Be(n),Wr(e,r())},function(e,t){ye(e,"","null",Ue(t.vectorFill).descriptor)}),oi("PtFl",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"pattern"===e.vectorFill.type},function(e,t){var r=ve(e);t.vectorFill=Be(r)},function(e,t){ye(e,"","null",Ue(t.vectorFill).descriptor)}),oi("vscg",function(e){return void 0!==e.vectorFill&&void 0!==e.vectorStroke},function(e,t,r){Nr(e);var n=ve(e);t.vectorFill=Be(n),Wr(e,r())},function(e,t){var r=Ue(t.vectorFill),n=r.descriptor;ca(e,r.key),ye(e,"","null",n)});var hi=["exclude","combine","subtract","intersect"];function pi(e,t,r,n,i){for(var a=e.offset+i,o=t.paths,s=void 0;a-e.offset>=26;){var l=Ar(e);switch(l){case 0:case 3:Ar(e);var d=Dr(e),c=Ar(e);Wr(e,18),s={open:3===l,knots:[],fillRule:2===c?"non-zero":"even-odd"},-1!==d&&(s.operation=hi[d]),o.push(s);break;case 1:case 2:case 4:case 5:s.knots.push({linked:1===l||4===l,points:ui(e,r,n)});break;case 6:Wr(e,24);break;case 7:var u=Br(e),f=Br(e),h=Br(e),p=Br(e),m=Br(e);Wr(e,4),t.clipboard={top:u,left:f,bottom:h,right:p,resolution:m};break;case 8:t.fillStartsWithAllPixels=!!Ar(e),Wr(e,22);break;default:throw new Error("Invalid vmsk section")}}return o}oi("vmsk",li("vectorMask"),function(e,t,r,n){var i=n.width,a=n.height;if(3!==Lr(e))throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var o=t.vectorMask,s=Lr(e);o.invert=!!(1&s),o.notLink=!!(2&s),o.disable=!!(4&s),pi(e,o,i,a,r()),Wr(e,r())},function(e,t,r){var n=r.width,i=r.height,a=t.vectorMask,o=(a.invert?1:0)|(a.notLink?2:0)|(a.disable?4:0);na(e,3),na(e,o),$i(e,6),da(e,24);var s=a.clipboard;s&&($i(e,7),sa(e,s.top),sa(e,s.left),sa(e,s.bottom),sa(e,s.right),sa(e,s.resolution),da(e,4)),void 0!==a.fillStartsWithAllPixels&&($i(e,8),$i(e,a.fillStartsWithAllPixels?1:0),da(e,22));for(var l=0,d=a.paths;l<d.length;l++){var c=d[l];$i(e,c.open?3:0),$i(e,c.knots.length),$i(e,c.operation?hi.indexOf(c.operation):-1),$i(e,"non-zero"===c.fillRule?2:1),da(e,18);for(var u=c.open?4:1,f=c.open?5:2,h=0,p=c.knots;h<p.length;h++){var m=p[h],g=m.linked,v=m.points;$i(e,g?u:f),fi(e,v,n,i)}}}),si("vsms","vmsk"),oi("vowv",li("vowv"),function(e,t){t.vowv=Lr(e)},function(e,t){na(e,t.vowv)}),oi("vogk",li("vectorOrigination"),function(e,t,r){if(1!==Mr(e))throw new Error("Invalid vogk version");var n=ve(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=n.keyDescriptorList;i<a.length;i++){var o=a[i],s={};null!=o.keyShapeInvalidated&&(s.keyShapeInvalidated=o.keyShapeInvalidated),null!=o.keyOriginType&&(s.keyOriginType=o.keyOriginType),null!=o.keyOriginResolution&&(s.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(s.keyOriginShapeBoundingBox={top:Ze(o.keyOriginShapeBBox["Top "]),left:Ze(o.keyOriginShapeBBox.Left),bottom:Ze(o.keyOriginShapeBBox.Btom),right:Ze(o.keyOriginShapeBBox.Rght)});var l=o.keyOriginRRectRadii;l&&(s.keyOriginRRectRadii={topRight:Xe(l.topRight),topLeft:Xe(l.topLeft),bottomLeft:Xe(l.bottomLeft),bottomRight:Xe(l.bottomRight)});var d=o.keyOriginBoxCorners;d&&(s.keyOriginBoxCorners=[{x:d.rectangleCornerA.Hrzn,y:d.rectangleCornerA.Vrtc},{x:d.rectangleCornerB.Hrzn,y:d.rectangleCornerB.Vrtc},{x:d.rectangleCornerC.Hrzn,y:d.rectangleCornerC.Vrtc},{x:d.rectangleCornerD.Hrzn,y:d.rectangleCornerD.Vrtc}]);var c=o.Trnf;c&&(s.transform=[c.xx,c.xy,c.xy,c.yy,c.tx,c.ty]),t.vectorOrigination.keyDescriptorList.push(s)}Wr(e,r())},function(e,t){for(var r=t.vectorOrigination,n={keyDescriptorList:[]},i=0;i<r.keyDescriptorList.length;i++){var a=r.keyDescriptorList[i];n.keyDescriptorList.push({});var o=n.keyDescriptorList[n.keyDescriptorList.length-1];null!=a.keyOriginType&&(o.keyOriginType=a.keyOriginType),null!=a.keyOriginResolution&&(o.keyOriginResolution=a.keyOriginResolution);var s=a.keyOriginRRectRadii;s&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:Qe(s.topRight,"topRight"),topLeft:Qe(s.topLeft,"topLeft"),bottomLeft:Qe(s.bottomLeft,"bottomLeft"),bottomRight:Qe(s.bottomRight,"bottomRight")});var l=a.keyOriginShapeBoundingBox;l&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":Qe(l.top,"top"),Left:Qe(l.left,"left"),Btom:Qe(l.bottom,"bottom"),Rght:Qe(l.right,"right")});var d=a.keyOriginBoxCorners;d&&4===d.length&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:d[0].x,Vrtc:d[0].y},rectangleCornerB:{Hrzn:d[1].x,Vrtc:d[1].y},rectangleCornerC:{Hrzn:d[2].x,Vrtc:d[2].y},rectangleCornerD:{Hrzn:d[3].x,Vrtc:d[3].y}});var c=a.transform;c&&6===c.length&&(o.Trnf={xx:c[0],xy:c[1],yx:c[2],yy:c[3],tx:c[4],ty:c[5]}),null!=a.keyShapeInvalidated&&(o.keyShapeInvalidated=a.keyShapeInvalidated),o.keyOriginIndex=i}ta(e,1),ye(e,"","null",n)}),oi("lmfx",function(e){return void 0!==e.effects&&Ki(e.effects)},function(e,t,r){if(0!==Lr(e))throw new Error("Invalid lmfx version");var n=ve(e);t.effects=xe(n,!!e.logMissingFeatures),Wr(e,r())},function(e,t,r,n){var i=Ie(t.effects,!!n.logMissingFeatures,!0);na(e,0),ye(e,"","null",i)}),oi("lrFX",li("effects"),function(e,t,r){t.effects||(t.effects=function(e){var t=Ar(e);if(0!==t)throw new Error("Invalid effects layer version: ".concat(t));for(var r=Ar(e),n={},i=0;i<r;i++){Xr(e,"8BIM");var a=Nr(e);switch(a){case"cmnS":var o=Lr(e),s=Lr(e),l=!!xr(e);if(Wr(e,2),7!==o||0!==s||!l)throw new Error("Invalid effects common state");break;case"dsdw":case"isdw":var d=Lr(e),c=Lr(e);if(41!==d&&51!==d)throw new Error("Invalid shadow size: ".concat(d));if(0!==c&&2!==c)throw new Error("Invalid shadow version: ".concat(c));o=Rr(e),Rr(e);var u=Rr(e),f=Rr(e),h=fn(e),p=mn(e),m=!!xr(e),g=!!xr(e),v=vn(e);d>=51&&fn(e);var y={size:{units:"Pixels",value:o},distance:{units:"Pixels",value:f},angle:u,color:h,blendMode:p,enabled:m,useGlobalLight:g,opacity:v};"dsdw"===a?n.dropShadow=[y]:n.innerShadow=[y];break;case"oglw":d=Lr(e);var b=Lr(e);if(32!==d&&42!==d)throw new Error("Invalid outer glow size: ".concat(d));if(0!==b&&2!==b)throw new Error("Invalid outer glow version: ".concat(b));o=Rr(e),Rr(e),h=fn(e),p=mn(e),m=!!xr(e),v=vn(e),d>=42&&fn(e),n.outerGlow={size:{units:"Pixels",value:o},color:h,blendMode:p,enabled:m,opacity:v};break;case"iglw":d=Lr(e);var w=Lr(e);if(32!==d&&43!==d)throw new Error("Invalid inner glow size: ".concat(d));if(0!==w&&2!==w)throw new Error("Invalid inner glow version: ".concat(w));o=Rr(e),Rr(e),h=fn(e),p=mn(e),m=!!xr(e),v=vn(e),d>=43&&(xr(e),fn(e)),n.innerGlow={size:{units:"Pixels",value:o},color:h,blendMode:p,enabled:m,opacity:v};break;case"bevl":d=Lr(e);var k=Lr(e);if(58!==d&&78!==d)throw new Error("Invalid bevel size: ".concat(d));if(0!==k&&2!==k)throw new Error("Invalid bevel version: ".concat(k));u=Rr(e);var S=Rr(e),_=(o=Rr(e),mn(e)),F=mn(e),I=fn(e),x=fn(e),C=pn[xr(e)]||"inner bevel",D=vn(e),A=vn(e),O=(m=!!xr(e),g=!!xr(e),xr(e)?"down":"up");d>=78&&(fn(e),fn(e)),n.bevel={size:{units:"Pixels",value:o},angle:u,strength:S,highlightBlendMode:_,shadowBlendMode:F,highlightColor:I,shadowColor:x,style:C,highlightOpacity:D,shadowOpacity:A,enabled:m,useGlobalLight:g,direction:O};break;case"sofi":o=Lr(e);var M=Lr(e);if(34!==o)throw new Error("Invalid effects solid fill info size: ".concat(o));if(2!==M)throw new Error("Invalid effects solid fill info version: ".concat(M));p=mn(e),h=fn(e),v=vn(e),m=!!xr(e),fn(e),n.solidFill=[{blendMode:p,color:h,opacity:v,enabled:m}];break;default:throw new Error("Invalid effect type: '".concat(a,"'"))}}return n}(e)),Wr(e,r())},function(e,t){!function(e,t){var r,n,i,a,o,s,l=null===(r=t.dropShadow)||void 0===r?void 0:r[0],d=null===(n=t.innerShadow)||void 0===n?void 0:n[0],c=t.outerGlow,u=t.innerGlow,f=t.bevel,h=null===(i=t.solidFill)||void 0===i?void 0:i[0],p=1;if(l&&p++,d&&p++,c&&p++,u&&p++,f&&p++,h&&p++,$i(e,0),$i(e,p),ca(e,"8BIM"),ca(e,"cmnS"),na(e,7),na(e,0),Ji(e,1),da(e,2),l&&(ca(e,"8BIM"),ca(e,"dsdw"),bn(e,l)),d&&(ca(e,"8BIM"),ca(e,"isdw"),bn(e,d)),c&&(ca(e,"8BIM"),ca(e,"oglw"),na(e,42),na(e,2),oa(e,(null===(a=c.size)||void 0===a?void 0:a.value)||0),oa(e,0),Ca(e,c.color),gn(e,c.blendMode),Ji(e,c.enabled?1:0),yn(e,c.opacity||0),Ca(e,c.color)),u&&(ca(e,"8BIM"),ca(e,"iglw"),na(e,43),na(e,2),oa(e,(null===(o=u.size)||void 0===o?void 0:o.value)||0),oa(e,0),Ca(e,u.color),gn(e,u.blendMode),Ji(e,u.enabled?1:0),yn(e,u.opacity||0),Ji(e,0),Ca(e,u.color)),f){ca(e,"8BIM"),ca(e,"bevl"),na(e,78),na(e,2),oa(e,f.angle||0),oa(e,f.strength||0),oa(e,(null===(s=f.size)||void 0===s?void 0:s.value)||0),gn(e,f.highlightBlendMode),gn(e,f.shadowBlendMode),Ca(e,f.highlightColor),Ca(e,f.shadowColor);var m=pn.indexOf(f.style);Ji(e,m<=0?1:m),yn(e,f.highlightOpacity||0),yn(e,f.shadowOpacity||0),Ji(e,f.enabled?1:0),Ji(e,f.useGlobalLight?1:0),Ji(e,"down"===f.direction?1:0),Ca(e,f.highlightColor),Ca(e,f.shadowColor)}h&&(ca(e,"8BIM"),ca(e,"sofi"),na(e,34),na(e,2),gn(e,h.blendMode),Ca(e,h.color),yn(e,h.opacity||0),Ji(e,h.enabled?1:0),Ca(e,h.color))}(e,t.effects)}),oi("luni",li("name"),function(e,t,r){if(r()>4){var n=Lr(e);r()>=2*n?t.name=jr(e,n):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");Wr(e,r())},function(e,t){fa(e,t.name)}),oi("lnsr",li("nameSource"),function(e,t){return t.nameSource=Nr(e)},function(e,t){return ca(e,t.nameSource)}),oi("lyid",li("id"),function(e,t){t.id=Lr(e)},function(e,t,r,n){for(var i=t.id;n.layerIds.has(i);)i+=100;na(e,i),n.layerIds.add(i),n.layerToId.set(t,i)}),oi("lsct",li("sectionDivider"),function(e,t,r){t.sectionDivider={type:Lr(e)},r()&&(Xr(e,"8BIM"),t.sectionDivider.key=Nr(e)),r()&&(t.sectionDivider.subType=Lr(e))},function(e,t){na(e,t.sectionDivider.type),t.sectionDivider.key&&(ca(e,"8BIM"),ca(e,t.sectionDivider.key),void 0!==t.sectionDivider.subType&&na(e,t.sectionDivider.subType))}),si("lsdk","lsct"),oi("clbl",li("blendClippendElements"),function(e,t){t.blendClippendElements=!!xr(e),Wr(e,3)},function(e,t){Ji(e,t.blendClippendElements?1:0),da(e,3)}),oi("infx",li("blendInteriorElements"),function(e,t){t.blendInteriorElements=!!xr(e),Wr(e,3)},function(e,t){Ji(e,t.blendInteriorElements?1:0),da(e,3)}),oi("knko",li("knockout"),function(e,t){t.knockout=!!xr(e),Wr(e,3)},function(e,t){Ji(e,t.knockout?1:0),da(e,3)}),oi("lmgm",li("layerMaskAsGlobalMask"),function(e,t){t.layerMaskAsGlobalMask=!!xr(e),Wr(e,3)},function(e,t){Ji(e,t.layerMaskAsGlobalMask?1:0),da(e,3)}),oi("lspf",li("protected"),function(e,t){var r=Lr(e);t.protected={transparency:!!(1&r),composite:!!(2&r),position:!!(4&r)},8&r&&(t.protected.artboards=!0)},function(e,t){na(e,(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0))}),oi("lclr",li("layerColor"),function(e,t){var r=Ar(e);Wr(e,6),t.layerColor=y[r]},function(e,t){var r=y.indexOf(t.layerColor);$i(e,-1===r?0:r),da(e,6)}),oi("shmd",function(e){return void 0!==e.timestamp||void 0!==e.animationFrames||void 0!==e.animationFrameFlags||void 0!==e.timeline||void 0!==e.comps},function(e,t,r){for(var n=Lr(e),i=function(r){Xr(e,"8BIM");var n=Nr(e);xr(e),Wr(e,3),un(e,1,function(r){if("cust"===n)void 0!==(i=ve(e)).layerTime&&(t.timestamp=i.layerTime);else if("mlst"===n){var i=ve(e);t.animationFrames=[];for(var a=0;a<i.LaSt.length;a++){var o=i.LaSt[a],s={frames:o.FrLs};void 0!==o.enab&&(s.enable=o.enab),o.Ofst&&(s.offset=be(o.Ofst)),o.FXRf&&(s.referencePoint=be(o.FXRf)),o.Lefx&&(s.effects=xe(o.Lefx,!!e.logMissingFeatures)),o.blendOptions&&o.blendOptions.Opct&&(s.opacity=He(o.blendOptions.Opct)),t.animationFrames.push(s)}}else if("mdyn"===n){Ar(e);var l=xr(e),d=xr(e);t.animationFrameFlags={propagateFrameOne:!l,unifyLayerPosition:!!(1&d),unifyLayerStyle:!!(2&d),unifyLayerVisibility:!!(4&d)}}else if("tmln"===n){var c=(i=ve(e)).timeScope,u={start:$e(c.Strt),duration:$e(c.duration),inTime:$e(c.inTime),outTime:$e(c.outTime),autoScope:i.autoScope,audioLevel:i.audioLevel};i.trackList&&(u.tracks=Ae(i.trackList,!!e.logMissingFeatures)),t.timeline=u}else if("cmls"===n){i=ve(e);t.comps={settings:[]},i.origFXRefPoint&&(t.comps.originalEffectsReferencePoint={x:i.origFXRefPoint.Hrzn,y:i.origFXRefPoint.Vrtc});for(var f=0,h=i.layerSettings;f<h.length;f++){var p=h[f];t.comps.settings.push({compList:p.compList});var m=t.comps.settings[t.comps.settings.length-1];"enab"in p&&(m.enabled=p.enab),p.Ofst&&(m.offset={x:p.Ofst.Hrzn,y:p.Ofst.Vrtc}),p.FXRefPoint&&(m.effectsReferencePoint={x:p.FXRefPoint.Hrzn,y:p.FXRefPoint.Vrtc})}}else if("extn"===n){i=ve(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',n)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',n);Wr(e,r())})},a=0;a<n;a++)i();Wr(e,r())},function(e,t,r,n){var i=t.animationFrames,a=t.animationFrameFlags,o=t.timestamp,s=t.timeline,l=t.comps,d=0;i&&d++,a&&d++,s&&d++,void 0!==o&&d++,l&&d++,na(e,d),i&&(ca(e,"8BIM"),ca(e,"mlst"),Ji(e,0),da(e,3),ma(e,2,function(){for(var r,n={LaID:null!==(r=t.id)&&void 0!==r?r:0,LaSt:[]},a=0;a<i.length;a++){var o=i[a],s={};void 0!==o.enable&&(s.enab=o.enable),s.FrLs=o.frames,o.offset&&(s.Ofst=we(o.offset)),o.referencePoint&&(s.FXRf=we(o.referencePoint)),o.effects&&(s.Lefx=Ie(o.effects,!1,!1)),void 0!==o.opacity&&(s.blendOptions={Opct:qe(o.opacity)}),n.LaSt.push(s)}ye(e,"","null",n)},!0)),a&&(ca(e,"8BIM"),ca(e,"mdyn"),Ji(e,0),da(e,3),ma(e,2,function(){$i(e,0),Ji(e,a.propagateFrameOne?0:15),Ji(e,(a.unifyLayerPosition?1:0)|(a.unifyLayerStyle?2:0)|(a.unifyLayerVisibility?4:0))})),s&&(ca(e,"8BIM"),ca(e,"tmln"),Ji(e,0),da(e,3),ma(e,2,function(){var r={Vrsn:1,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},autoScope:s.autoScope,audioLevel:s.audioLevel};s.tracks&&(r.trackList=Oe(s.tracks));var i=n.layerToId.get(t)||t.id;if(!i)throw new Error("You need to provide layer.id value whan writing document with animations");r.LyrI=i,ye(e,"","null",r,"anim")},!0)),void 0!==o&&(ca(e,"8BIM"),ca(e,"cust"),Ji(e,0),da(e,3),ma(e,2,function(){ye(e,"","metadata",{layerTime:o})},!0)),l&&(ca(e,"8BIM"),ca(e,"cmls"),Ji(e,0),da(e,3),ma(e,2,function(){var r=n.layerToId.get(t)||t.id;if(!r)throw new Error("You need to provide layer.id value whan writing document with layer comps");var i={};l.originalEffectsReferencePoint&&(i.origFXRefPoint={Hrzn:l.originalEffectsReferencePoint.x,Vrtc:l.originalEffectsReferencePoint.y}),i.LyrI=r,i.layerSettings=[];for(var a=0,o=l.settings;a<o.length;a++){var s=o[a],d={};void 0!==s.enabled&&(d.enab=s.enabled),s.offset&&(d.Ofst={Hrzn:s.offset.x,Vrtc:s.offset.y}),s.effectsReferencePoint&&(d.FXRefPoint={Hrzn:s.effectsReferencePoint.x,Vrtc:s.effectsReferencePoint.y}),d.compList=s.compList,i.layerSettings.push(d)}ye(e,"","null",i)},!0))}),oi("vstk",li("vectorStroke"),function(e,t,r){var n=ve(e);t.vectorStroke={strokeEnabled:n.strokeEnabled,fillEnabled:n.fillEnabled,lineWidth:Xe(n.strokeStyleLineWidth),lineDashOffset:Xe(n.strokeStyleLineDashOffset),miterLimit:n.strokeStyleMiterLimit,lineCapType:St.decode(n.strokeStyleLineCapType),lineJoinType:_t.decode(n.strokeStyleLineJoinType),lineAlignment:Ft.decode(n.strokeStyleLineAlignment),scaleLock:n.strokeStyleScaleLock,strokeAdjust:n.strokeStyleStrokeAdjust,lineDashSet:n.strokeStyleLineDashSet.map(Xe),blendMode:it.decode(n.strokeStyleBlendMode),opacity:He(n.strokeStyleOpacity),content:Be(n.strokeStyleContent),resolution:n.strokeStyleResolution},Wr(e,r())},function(e,t){var r,n,i,a=t.vectorStroke;ye(e,"","strokeStyle",{strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:null!==(r=a.miterLimit)&&void 0!==r?r:100,strokeStyleLineCapType:St.encode(a.lineCapType),strokeStyleLineJoinType:_t.encode(a.lineJoinType),strokeStyleLineAlignment:Ft.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:it.encode(a.blendMode),strokeStyleOpacity:qe(null!==(n=a.opacity)&&void 0!==n?n:1),strokeStyleContent:Ue(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:null!==(i=a.resolution)&&void 0!==i?i:72})}),oi("artb",li("artboard"),function(e,t,r){var n=ve(e),i=n.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:n.guideIndeces,presetName:n.artboardPresetName,color:Ge(n["Clr "]),backgroundType:n.artboardBackgroundType},Wr(e,r())},function(e,t){var r,n=t.artboard,i=n.rect;ye(e,"","artboard",{artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:n.guideIndices||[],artboardPresetName:n.presetName||"","Clr ":Ve(n.color),artboardBackgroundType:null!==(r=n.backgroundType)&&void 0!==r?r:1})}),oi("sn2P",li("usingAlignedRendering"),function(e,t){return t.usingAlignedRendering=!!Lr(e)},function(e,t){return na(e,t.usingAlignedRendering?1:0)});var mi=["unknown","vector","raster","image stack"];function gi(e){var t,r,n,i,a,o,s=ri(ri({style:nt.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:tt.decode(e.warpRotate),bounds:e.bounds&&{top:Ze(e.bounds["Top "]),left:Ze(e.bounds.Left),bottom:Ze(e.bounds.Btom),right:Ze(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});null==e.deformNumRows&&null==e.deformNumCols||(s.deformNumRows=e.deformNumRows,s.deformNumCols=e.deformNumCols);var l=e.customEnvelopeWarp;if(l){s.customEnvelopeWarp={meshPoints:[]};for(var d=(null===(t=l.meshPoints.find(function(e){return"Hrzn"===e.type}))||void 0===t?void 0:t.values)||[],c=(null===(r=l.meshPoints.find(function(e){return"Vrtc"===e.type}))||void 0===r?void 0:r.values)||[],u=0;u<d.length;u++)s.customEnvelopeWarp.meshPoints.push({x:d[u],y:c[u]});(l.quiltSliceX||l.quiltSliceY)&&(s.customEnvelopeWarp.quiltSliceX=(null===(i=null===(n=l.quiltSliceX)||void 0===n?void 0:n[0])||void 0===i?void 0:i.values)||[],s.customEnvelopeWarp.quiltSliceY=(null===(o=null===(a=l.quiltSliceY)||void 0===a?void 0:a[0])||void 0===o?void 0:o.values)||[])}return s}function vi(e){var t,r;return null!=e.deformNumCols||null!=e.deformNumRows||(null===(t=e.customEnvelopeWarp)||void 0===t?void 0:t.quiltSliceX)||(null===(r=e.customEnvelopeWarp)||void 0===r?void 0:r.quiltSliceY)}function yi(e){var t=e.bounds,r=ri(ri({warpStyle:nt.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:tt.encode(e.rotate),bounds:{"Top ":Qe(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:Qe(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:Qe(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:Qe(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),n=vi(e);n&&((a=r).deformNumRows=e.deformNumRows||0,a.deformNumCols=e.deformNumCols||0);var i=e.customEnvelopeWarp;if(i){var a,o=i.meshPoints||[];if(n)(a=r).customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:i.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:i.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:o.map(function(e){return e.x})},{type:"Vrtc",values:o.map(function(e){return e.y})}]};else r.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:o.map(function(e){return e.x})},{type:"Vrtc",values:o.map(function(e){return e.y})}]}}return r}function bi(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function wi(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}function ki(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t}function Si(e){return wi(function(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}(e))}function _i(e){return{x:Xe(e.Hrzn),y:Xe(e.Vrtc)}}function Fi(e){return{_name:"",_classID:"Pnt ",Hrzn:Qe(e.x,"x"),Vrtc:Qe(e.y,"y")}}function Ii(e,t){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(e){return function(e,t){var r={name:e["Nm  "],opacity:He(e.blendOptions.Opct),blendMode:it.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:Ge(e.FrgC),backgroundColor:Ge(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return ri(ri({},r),{type:"box blur",filter:{radius:Xe(e.Fltr["Rds "])}});case"GsnB":return ri(ri({},r),{type:"gaussian blur",filter:{radius:Xe(e.Fltr["Rds "])}});case"MtnB":return ri(ri({},r),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:Xe(e.Fltr.Dstn)}});case"RdlB":return ri(ri({},r),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:It.decode(e.Fltr.BlrM),quality:xt.decode(e.Fltr.BlrQ)}});case"shapeBlur":return ri(ri({},r),{type:"shape blur",filter:{radius:Xe(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return ri(ri({},r),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:Dt.decode(e.Fltr.SmBQ),mode:Ct.decode(e.Fltr.SmBM)}});case"surfaceBlur":return ri(ri({},r),{type:"surface blur",filter:{radius:Xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return ri(ri({},r),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:At.decode(e.Fltr.DspM),undefinedAreas:Ot.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return ri(ri({},r),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return ri(ri({},r),{type:"polar coordinates",filter:{conversion:Mt.decode(e.Fltr.Cnvr)}});case"Rple":return ri(ri({},r),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:Pt.decode(e.Fltr.RplS)}});case"Shr ":return ri(ri({},r),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(e){return{x:e.Hrzn,y:e.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:Ot.decode(e.Fltr.UndA)}});case"Sphr":return ri(ri({},r),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:Lt.decode(e.Fltr.SphM)}});case"Twrl":return ri(ri({},r),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return ri(ri({},r),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:Et.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:Ot.decode(e.Fltr.UndA)}});case"ZgZg":return ri(ri({},r),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:Tt.decode(e.Fltr.ZZTy)}});case"AdNs":return ri(ri({},r),{type:"add noise",filter:{amount:He(e.Fltr.Nose),distribution:Rt.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return ri(ri({},r),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return ri(ri({},r),{type:"median",filter:{radius:Xe(e.Fltr["Rds "])}});case"denoise":return ri(ri({},r),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:He(e.Fltr.ClNs),sharpenDetails:He(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(e){return ri({channels:e.Chnl.map(Bt.decode),amount:e.Amnt},e.EdgF?{preserveDetails:e.EdgF}:{})})}});case"ClrH":return ri(ri({},r),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return ri(ri({},r),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return ri(ri({},r),{type:"mezzotint",filter:{type:zt.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return ri(ri({},r),{type:"mosaic",filter:{cellSize:Xe(e.Fltr.ClSz)}});case"Pntl":return ri(ri({},r),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return ri(ri({},r),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return ri(ri({},r),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return ri(ri({},r),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return ri(ri({},r),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:Nt.decode(e.Fltr["Lns "])}});case"smartSharpen":return ri(ri({},r),{type:"smart sharpen",filter:{amount:He(e.Fltr.Amnt),radius:Xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:Ut.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:He(e.Fltr.sdwM.Amnt),tonalWidth:He(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:He(e.Fltr.hglM.Amnt),tonalWidth:He(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return ri(ri({},r),{type:"unsharp mask",filter:{amount:He(e.Fltr.Amnt),radius:Xe(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return ri(ri({},r),{type:"diffuse",filter:{mode:Gt.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return ri(ri({},r),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return ri(ri({},r),{type:"extrude",filter:{type:Vt.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:jt.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return ri(ri({},r),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:Ht.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return ri(ri({},r),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:Wt.decode(e.Fltr["Edg "])}});case"Wnd ":return ri(ri({},r),{type:"wind",filter:{method:Xt.decode(e.Fltr.WndM),direction:Zt.decode(e.Fltr.Drct)}});case"Dntr":return ri(ri({},r),{type:"de-interlace",filter:{eliminate:Kt.decode(e.Fltr.IntE),newFieldsBy:Yt.decode(e.Fltr.IntC)}});case"Cstm":return ri(ri({},r),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return ri(ri({},r),{type:"high pass",filter:{radius:Xe(e.Fltr["Rds "])}});case"Mxm ":return ri(ri({},r),{type:"maximum",filter:{radius:Xe(e.Fltr["Rds "])}});case"Mnm ":return ri(ri({},r),{type:"minimum",filter:{radius:Xe(e.Fltr["Rds "])}});case"Ofst":return ri(ri({},r),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:qt.decode(e.Fltr["Fl  "])}});case"rigidTransform":return ri(ri({},r),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(e){return{rigidType:e.rigidType,originalVertexArray:Si(e.originalVertexArray),deformedVertexArray:Si(e.deformedVertexArray),indexArray:Array.from((t=e.indexArray,new Uint32Array(t.buffer.slice(t.byteOffset),0,t.byteLength/4))),pinOffsets:wi(e.pinOffsets),posFinalPins:wi(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,selectedPin:e.selectedPin,pinPosition:wi(e.PinP),pinRotation:e.PnRt,pinOverlay:e.PnOv,pinDepth:e.PnDp,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{pathComponents:e.meshBoundaryPath.pathComponents.map(function(e){return{shapeOperation:e.shapeOperation.split(".")[1],paths:e.SbpL.map(function(e){return{closed:e.Clsp,points:e["Pts "].map(function(e){return{anchor:_i(e.Anch),forward:_i(e["Fwd "]),backward:_i(e["Bwd "]),smooth:e.Smoo}})}})}})}};var t})}});case"PbPl":for(var n=[],i=e.Fltr,a=0;a<26&&i["PN".concat(ni[a],"a")];a++)for(var o=0;o<26&&i["PN".concat(ni[a]).concat(ni[o])];o++)n.push({name:i["PN".concat(ni[a]).concat(ni[o])],value:i["PF".concat(ni[a]).concat(ni[o])]});return ri(ri({},r),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:n}});case"HsbP":return ri(ri({},r),{type:"hsb/hsl",filter:{inputMode:pt.decode(e.Fltr.Inpt),rowOrder:pt.decode(e.Fltr.Otpt)}});case"oilPaint":return ri(ri({},r),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return ri(ri({},r),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return ri(ri({},r),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(_i),warpedVertices:e.Fltr.warpedVertices.map(_i),quads:e.Fltr.quads.map(function(e){return e.indices})}});case"Crvs":return ri(ri({},r),{type:"curves",filter:ri({presetKind:Jt.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(e){var t=e.Chnl.map(Bt.decode);if(e["Crv "])return{channels:t,curve:e["Crv "].map(function(e){var t={x:e.Hrzn,y:e.Vrtc};return e.Cnty&&(t.curved=!0),t})};if(e.Mpng)return{channels:t,values:e.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return ri(ri({},r),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(t.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return ri(ri({},r),{type:"average"});case 1114403360:return ri(ri({},r),{type:"blur"});case 1114403405:return ri(ri({},r),{type:"blur more"});case 1148416099:return ri(ri({},r),{type:"despeckle"});case 1180922912:return ri(ri({},r),{type:"facet"});case 1181902701:return ri(ri({},r),{type:"fragment"});case 1399353968:return ri(ri({},r),{type:"sharpen"});case 1399353925:return ri(ri({},r),{type:"sharpen edges"});case 1399353933:return ri(ri({},r),{type:"sharpen more"});case 1181639749:return ri(ri({},r),{type:"find edges"});case 1399616122:return ri(ri({},r),{type:"solarize"});case 1314149187:return ri(ri({},r),{type:"ntsc colors"});case 1231976050:return ri(ri({},r),{type:"invert"});default:if(t.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}(e,t)}).filter(function(e){return!!e})}}function xi(e){return Qe(e.radius,"radius")}function Ci(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var t=e.width,r=e.height,n=t/3,i=2*t/3,a=r/3,o=2*r/3;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:r,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:0,y:0},{x:n,y:0},{x:i,y:0},{x:t,y:0},{x:0,y:a},{x:n,y:a},{x:i,y:a},{x:t,y:a},{x:0,y:o},{x:n,y:o},{x:i,y:o},{x:t,y:o},{x:0,y:r},{x:n,y:r},{x:i,y:r},{x:t,y:r}]}}}function Di(e){return{top:Mr(e),left:Mr(e),bottom:Mr(e),right:Mr(e)}}function Ai(e,t){ta(e,t.top),ta(e,t.left),ta(e,t.bottom),ta(e,t.right)}function Oi(e){oi(e,function(t){var r=t;return!(!r.linkedFiles||!r.linkedFiles.length)&&!("lnkE"===e&&!r.linkedFiles.some(function(e){return e.linkedFile}))},function(t,r,n,i){var a=r;for(a.linkedFiles=a.linkedFiles||[];n()>8;){var o=di(t),s=t.offset,l=Nr(t),d=Mr(t),c=Gr(t,1),u=Vr(t),f=Nr(t).trim(),h=Nr(t).trim(),p=di(t),m=xr(t)?ve(t):void 0,g="liFE"===l?ve(t):void 0,v={id:c,name:u};if(f&&(v.type=f),h&&(v.creator=h),m&&(v.descriptor={compInfo:{compID:m.compInfo.compID,originalCompID:m.compInfo.originalCompID}}),"liFE"===l&&d>3){var y=Mr(t),b=xr(t),w=xr(t),k=xr(t),S=xr(t),_=Tr(t),F=Math.floor(_),I=1e3*(_-F);v.time=new Date(Date.UTC(y,b,w,k,S,F,I)).toISOString()}var x="liFE"===l?di(t):0;for("liFA"===l&&Wr(t,8),"liFD"===l&&(v.data=zr(t,p)),d>=5&&(v.childDocumentID=Vr(t)),d>=6&&(v.assetModTime=Tr(t)),d>=7&&(v.assetLockedState=xr(t)),"liFE"===l&&2===d&&(v.data=zr(t,x)),t.skipLinkedFilesData&&(v.data=void 0),"lnkE"===e&&(v.linkedFile={fileSize:x,name:(null==g?void 0:g["Nm  "])||"",fullPath:(null==g?void 0:g.fullPath)||"",originalPath:(null==g?void 0:g.originalPath)||"",relativePath:(null==g?void 0:g.relPath)||""}),a.linkedFiles.push(v);o%4;)o++;t.offset=s+o}Wr(t,n())},function(t,r){for(var n,i,a,o,s,l,d,c,u,f=0,h=r.linkedFiles;f<h.length;f++){var p=h[f];if("lnkE"===e==!!p.linkedFile){var m=2;null!=p.assetLockedState?m=7:null!=p.assetModTime?m=6:null!=p.childDocumentID?m=5:"lnkE"==e&&(m=3),ci(t,0);var g=t.offset;if(ca(t,"lnkE"===e?"liFE":p.data?"liFD":"liFA"),ta(t,m),!p.id||"string"!=typeof p.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(p.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(ua(t,p.id,1),ha(t,p.name||""),ca(t,p.type?"".concat(p.type,"    ").substring(0,4):"    "),ca(t,p.creator?"".concat(p.creator,"    ").substring(0,4):"\0\0\0\0"),ci(t,p.data?p.data.byteLength:0),p.descriptor&&p.descriptor.compInfo){var v={compInfo:{compID:p.descriptor.compInfo.compID,originalCompID:p.descriptor.compInfo.originalCompID}};Ji(t,1),ye(t,"","null",v)}else Ji(t,0);if("lnkE"===e){ye(t,"","ExternalFileLink",v={descVersion:2,"Nm  ":null!==(i=null===(n=p.linkedFile)||void 0===n?void 0:n.name)&&void 0!==i?i:"",fullPath:null!==(o=null===(a=p.linkedFile)||void 0===a?void 0:a.fullPath)&&void 0!==o?o:"",originalPath:null!==(l=null===(s=p.linkedFile)||void 0===s?void 0:s.originalPath)&&void 0!==l?l:"",relPath:null!==(c=null===(d=p.linkedFile)||void 0===d?void 0:d.relativePath)&&void 0!==c?c:""});var y=p.time?new Date(p.time):new Date;ta(t,y.getUTCFullYear()),Ji(t,y.getUTCMonth()),Ji(t,y.getUTCDate()),Ji(t,y.getUTCHours()),Ji(t,y.getUTCMinutes()),aa(t,y.getUTCSeconds()+y.getUTCMilliseconds()/1e3)}p.data?la(t,p.data):ci(t,(null===(u=p.linkedFile)||void 0===u?void 0:u.fileSize)||0),m>=5&&ha(t,p.childDocumentID||""),m>=6&&aa(t,p.assetModTime||0),m>=7&&Ji(t,p.assetLockedState||0);var b=t.offset-g;for(t.view.setUint32(g-4,b,!1);b%4;)b++,Ji(t,0)}}})}function Mi(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}function Pi(e){return{shadowInput:Dr(e),highlightInput:Dr(e),shadowOutput:Dr(e),highlightOutput:Dr(e),midtoneInput:Dr(e)/100}}function Li(e,t){Qi(e,t.shadowInput),Qi(e,t.highlightInput),Qi(e,t.shadowOutput),Qi(e,t.highlightOutput),Qi(e,Math.round(100*t.midtoneInput))}function Ei(e){for(var t=Ar(e),r=[],n=0;n<t;n++){var i=Dr(e),a=Dr(e);r.push({input:a,output:i})}return r}function Ti(e,t){$i(e,t.length);for(var r=0,n=t;r<n.length;r++){var i=n[r];$i(e,i.output),$i(e,i.input)}}function Ri(e){return{a:Dr(e),b:Dr(e),c:Dr(e),d:Dr(e),hue:Dr(e),saturation:Dr(e),lightness:Dr(e)}}function Bi(e,t){var r=t||{};Qi(e,r.a||0),Qi(e,r.b||0),Qi(e,r.c||0),Qi(e,r.d||0),Qi(e,r.hue||0),Qi(e,r.saturation||0),Qi(e,r.lightness||0)}function zi(e){return{cyanRed:Dr(e),magentaGreen:Dr(e),yellowBlue:Dr(e)}}function Ni(e,t){Qi(e,t.cyanRed||0),Qi(e,t.magentaGreen||0),Qi(e,t.yellowBlue||0)}function Ui(e){var t=Dr(e),r=Dr(e),n=Dr(e);return Wr(e,2),{red:t,green:r,blue:n,constant:Dr(e)}}function Gi(e,t){var r=t||{};Qi(e,r.red),Qi(e,r.green),Qi(e,r.blue),da(e,2),Qi(e,r.constant)}oi("PlLd",li("placedLayer"),function(e,t,r){if("plcL"!==Nr(e))throw new Error("Invalid PlLd signature");if(3!==Mr(e))throw new Error("Invalid PlLd version");var n=Gr(e,1),i=Mr(e),a=Mr(e);Mr(e);var o=Mr(e);if(!mi[o])throw new Error("Invalid PlLd type");for(var s=[],l=0;l<8;l++)s.push(Tr(e));var d=Mr(e);if(0!==d)throw new Error("Invalid Warp version ".concat(d));var c=ve(e);t.placedLayer=t.placedLayer||{id:n,type:mi[o],pageNumber:i,totalPages:a,transform:s,warp:gi(c)},Wr(e,r())},function(e,t){var r=t.placedLayer;if(ca(e,"plcL"),ta(e,3),!r.id||"string"!=typeof r.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(r.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(ua(e,r.id,1),ta(e,1),ta(e,1),ta(e,16),-1===mi.indexOf(r.type))throw new Error("Invalid placedLayer type");ta(e,mi.indexOf(r.type));for(var n=0;n<8;n++)aa(e,r.transform[n]);ta(e,0);var i=Ci(r),a=vi(i)?"quiltWarp":"warp";ye(e,"",a,yi(i),a)}),oi("SoLd",li("placedLayer"),function(e,t,r){if("soLD"!==Nr(e))throw new Error("Invalid SoLd type");var n=Mr(e);if(4!==n&&5!==n)throw new Error("Invalid SoLd version");var i=ve(e,!0);t.placedLayer={id:i.Idnt,placed:i.placed,type:mi[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:$e(i.frameStep),duration:$e(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:Xe(i.Rslt),warp:gi(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(e,t){return e!==i.Trnf[t]})&&(t.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(t.placedLayer.crop=i.Crop),i.comp&&(t.placedLayer.comp=i.comp),i.compInfo&&(t.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(t.placedLayer.filter=Ii(i.filterFX,e)),Wr(e,r())},function(e,t){var r,n;ca(e,"soLD"),ta(e,4);var i=t.placedLayer;if(!i.id||"string"!=typeof i.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var a=ri(ri({Idnt:i.id,placed:null!==(r=i.placed)&&void 0!==r?r:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:mi.indexOf(i.type),Trnf:i.transform,nonAffineTransform:null!==(n=i.nonAffineTransform)&&void 0!==n?n:i.transform,warp:yi(Ci(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?Qe(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(a.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(e){return function(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:Je(e.opacity),"Md  ":it.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:Ve(e.foregroundColor),BckC:Ve(e.backgroundColor)};switch(e.type){case"average":return ri(ri({},t),{filterID:1098281575});case"blur":return ri(ri({},t),{filterID:1114403360});case"blur more":return ri(ri({},t),{filterID:1114403405});case"box blur":return ri(ri({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":xi(e.filter)},filterID:697});case"gaussian blur":return ri(ri({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":xi(e.filter)},filterID:1198747202});case"motion blur":return ri(ri({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:Qe(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return ri(ri({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:It.encode(e.filter.method),BlrQ:xt.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return ri(ri({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":xi(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return ri(ri({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:Dt.encode(e.filter.quality),SmBM:Ct.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return ri(ri({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":xi(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return ri(ri({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:At.encode(e.filter.displacementMap),UndA:Ot.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return ri(ri({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return ri(ri({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:Mt.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return ri(ri({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:Pt.encode(e.filter.size)},filterID:1383099493});case"shear":return ri(ri({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(e){return{_name:"",_classID:"Pnt ",Hrzn:e.x,Vrtc:e.y}}),UndA:Ot.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return ri(ri({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:Lt.encode(e.filter.mode)},filterID:1399875698});case"twirl":return ri(ri({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return ri(ri({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:Et.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:Ot.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return ri(ri({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:Tt.encode(e.filter.style)},filterID:1516722791});case"add noise":return ri(ri({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:Rt.encode(e.filter.distribution),Nose:Je(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return ri(ri({},t),{filterID:1148416099});case"dust and scratches":return ri(ri({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return ri(ri({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":xi(e.filter)},filterID:1298427424});case"reduce noise":return ri(ri({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:Je(e.filter.reduceColorNoise),Shrp:Je(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(e){return ri({_name:"",_classID:"channelDenoiseParams",Chnl:e.channels.map(function(e){return Bt.encode(e)}),Amnt:e.amount},e.preserveDetails?{EdgF:e.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return ri(ri({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return ri(ri({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return ri(ri({},t),{filterID:1180922912});case"fragment":return ri(ri({},t),{filterID:1181902701});case"mezzotint":return ri(ri({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:zt.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return ri(ri({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:Qe(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return ri(ri({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return ri(ri({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return ri(ri({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return ri(ri({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return ri(ri({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":Nt.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return ri(ri({},t),{filterID:1399353968});case"sharpen edges":return ri(ri({},t),{filterID:1399353925});case"sharpen more":return ri(ri({},t),{filterID:1399353933});case"smart sharpen":return ri(ri({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:Je(e.filter.amount),"Rds ":xi(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:Ut.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:Je(e.filter.shadow.fadeAmount),Wdth:Je(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:Je(e.filter.highlight.fadeAmount),Wdth:Je(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return ri(ri({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:Je(e.filter.amount),"Rds ":xi(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return ri(ri({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":Gt.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return ri(ri({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return ri(ri({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:Vt.encode(e.filter.type),ExtR:jt.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return ri(ri({},t),{filterID:1181639749});case"solarize":return ri(ri({},t),{filterID:1399616122});case"tiles":return ri(ri({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:Ht.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return ri(ri({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":Wt.encode(e.filter.edge)},filterID:1416782659});case"wind":return ri(ri({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:Xt.encode(e.filter.method),Drct:Zt.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return ri(ri({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:Kt.encode(e.filter.eliminate),IntC:Yt.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return ri(ri({},t),{filterID:1314149187});case"invert":return ri(ri({},t),{filterID:1231976050});case"custom":return ri(ri({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return ri(ri({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":xi(e.filter)},filterID:1214736464});case"maximum":return ri(ri({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":xi(e.filter)},filterID:1299737888});case"minimum":return ri(ri({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":xi(e.filter)},filterID:1299082528});case"offset":return ri(ri({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":qt.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return ri(ri({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(e){return{_name:"",_classID:"puppetShape",rigidType:e.rigidType,VrsM:1,VrsN:0,originalVertexArray:bi(new Float32Array(ki(e.originalVertexArray))),deformedVertexArray:bi(new Float32Array(ki(e.deformedVertexArray))),indexArray:bi(new Uint32Array(e.indexArray)),pinOffsets:ki(e.pinOffsets),posFinalPins:ki(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,PinP:ki(e.pinPosition),PnRt:e.pinRotation,PnOv:e.pinOverlay,PnDp:e.pinDepth,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:e.meshBoundaryPath.pathComponents.map(function(e){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(e.shapeOperation),SbpL:e.paths.map(function(e){return{_name:"",_classID:"Sbpl",Clsp:e.closed,"Pts ":e.points.map(function(e){return{_name:"",_classID:"Pthp",Anch:Fi(e.anchor),"Fwd ":Fi(e.forward),"Bwd ":Fi(e.backward),Smoo:e.smooth}})}})}})},selectedPin:e.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":for(var r={},n=0;n<e.filter.parameters.length;n++){var i=e.filter.parameters[n],a=i.name,o=i.value,s="".concat(ni[Math.floor(n/26)]).concat(ni[n%26]);r["PN".concat(s)]=a,r["PT".concat(s)]=0,r["PF".concat(s)]=o}return ri(ri({},t),{Fltr:ri({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},r),filterID:1348620396});case"oil paint":return ri(ri({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return ri(ri({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return ri(ri({},t),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(Fi),warpedVertices:e.filter.warpedVertices.map(Fi),quads:e.filter.quads.map(function(e){return{indices:e}})},filterID:442});case"curves":return ri(ri({},t),{Fltr:ri({_name:"Curves",_classID:"Crvs",presetKind:Jt.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(e){return"curve"in e?{_name:"",_classID:"CrvA",Chnl:e.channels.map(Bt.encode),"Crv ":e.curve.map(function(e){return ri({_name:"",_classID:"Pnt ",Hrzn:e.x,Vrtc:e.y},e.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:e.channels.map(Bt.encode),Mpng:e.values}})}:{}),filterID:1131574899});case"brightness/contrast":return ri(ri({},t),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(e.type))}}(e)})}),i.warp&&vi(i.warp)){var o=yi(i.warp);a.quiltWarp=o,a.warp={warpStyle:"warpStyle.warpNone",warpValue:o.warpValue,warpPerspective:o.warpPerspective,warpPerspectiveOther:o.warpPerspectiveOther,warpRotate:o.warpRotate,bounds:o.bounds,uOrder:o.uOrder,vOrder:o.vOrder}}else delete a.quiltWarp;i.comp&&(a.comp=i.comp),i.compInfo&&(a.compInfo=i.compInfo),ye(e,"","null",a,a.quiltWarp?"quiltWarp":"warp")}),si("SoLE","SoLd"),oi("fxrp",li("referencePoint"),function(e,t){t.referencePoint={x:Tr(e),y:Tr(e)}},function(e,t){aa(e,t.referencePoint.x),aa(e,t.referencePoint.y)}),oi("Lr16",function(){return!1},function(e,t,r,n,i){qr(e,n,i)},function(e,t){}),oi("Lr32",function(){return!1},function(e,t,r,n,i){qr(e,n,i)},function(e,t){}),oi("LMsk",li("userMask"),function(e,t){if(t.userMask={colorSpace:fn(e),opacity:Ar(e)/255},128!==xr(e))throw new Error("Invalid flag value");Wr(e,1)},function(e,t){var r=t.userMask;Ca(e,r.colorSpace),$i(e,255*S(r.opacity,0,1)),Ji(e,128),da(e,1)}),oi("Patt",function(e){return!e},function(e,t,r){r()&&Wr(e,r())},function(e,t){}),oi("Anno",function(e){return void 0!==e.annotations},function(e,t,r){var n=Ar(e),i=Ar(e);if(2!==n||1!==i)throw new Error("Invalid Anno version");for(var a=Lr(e),o=[],s=0;s<a;s++){Lr(e);var l=Nr(e),d=!!xr(e);xr(e),Ar(e);var c=Di(e),u=Di(e),f=fn(e),h=Gr(e,2),p=Gr(e,2),m=Gr(e,2);Lr(e),Nr(e);var g=Lr(e),v=void 0;if("txtA"===l)g>=2&&65279===Ar(e)?v=jr(e,(g-2)/2):(e.offset-=2,v=Hr(e,g)),v=v.replace(/\r/g,"\n");else{if("sndA"!==l)throw new Error("Unknown annotation type");v=zr(e,g)}o.push({type:"txtA"===l?"text":"sound",open:d,iconLocation:c,popupLocation:u,color:f,author:h,name:p,date:m,data:v})}t.annotations=o,Wr(e,r())},function(e,t){var r=t.annotations;$i(e,2),$i(e,1),na(e,r.length);for(var n=0,i=r;n<i.length;n++){var a=i[n],o="sound"===a.type;if(o&&!(a.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&"string"!=typeof a.data)throw new Error("Text annotation data should be string");var s=e.offset;na(e,0),ca(e,o?"sndA":"txtA"),Ji(e,a.open?1:0),Ji(e,28),$i(e,1),Ai(e,a.iconLocation),Ai(e,a.popupLocation),Ca(e,a.color),ua(e,a.author||"",2),ua(e,a.name||"",2),ua(e,a.date||"",2);var l=e.offset;na(e,0),ca(e,o?"sndM":"txtC"),na(e,0);var d=e.offset;if(o)la(e,a.data);else{$i(e,65279);for(var c=a.data.replace(/\n/g,"\r"),u=0;u<c.length;u++)$i(e,c.charCodeAt(u))}e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(l,e.offset-l,!1),e.view.setUint32(d-4,e.offset-d,!1)}}),Oi("lnk2"),Oi("lnkE"),si("lnkD","lnk2"),si("lnk3","lnk2"),oi("pths",li("pathList"),function(e,t){ve(e,!0),t.pathList=[]},function(e,t){ye(e,"","pathsDataClass",{pathList:[]})}),oi("lyvr",li("version"),function(e,t){return t.version=Lr(e)},function(e,t){return na(e,t.version)}),oi("lfxs",function(){return!1},function(e,t,r){if(0!==Lr(e))throw new Error("Invalid lfxs version");var n=ve(e);t.effects=xe(n,!!e.logMissingFeatures),Wr(e,r())},function(e,t,r,n){var i=Ie(t.effects,!!n.logMissingFeatures,!0);na(e,0),ye(e,"","null",i)}),oi("brit",Mi("brightness/contrast"),function(e,t,r){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:Dr(e),contrast:Dr(e),meanValue:Dr(e),labColorOnly:!!xr(e),useLegacy:!0}),Wr(e,r())},function(e,t){var r,n=t.adjustment;Qi(e,n.brightness||0),Qi(e,n.contrast||0),Qi(e,null!==(r=n.meanValue)&&void 0!==r?r:127),Ji(e,n.labColorOnly?1:0),da(e,1)}),oi("levl",Mi("levels"),function(e,t,r){if(2!==Ar(e))throw new Error("Invalid levl version");t.adjustment=ri(ri({},t.adjustment),{type:"levels",rgb:Pi(e),red:Pi(e),green:Pi(e),blue:Pi(e)}),Wr(e,r())},function(e,t){var r=t.adjustment,n={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};$i(e,2),Li(e,r.rgb||n),Li(e,r.red||n),Li(e,r.blue||n),Li(e,r.green||n);for(var i=0;i<59;i++)Li(e,n)}),oi("curv",Mi("curves"),function(e,t,r){if(xr(e),1!==Ar(e))throw new Error("Invalid curv version");Ar(e);var n=Ar(e),i={type:"curves"};1&n&&(i.rgb=Ei(e)),2&n&&(i.red=Ei(e)),4&n&&(i.green=Ei(e)),8&n&&(i.blue=Ei(e)),t.adjustment=ri(ri({},t.adjustment),i),Wr(e,r())},function(e,t){var r=t.adjustment,n=r.rgb,i=r.red,a=r.green,o=r.blue,s=0,l=0;n&&n.length&&(s|=1,l++),i&&i.length&&(s|=2,l++),a&&a.length&&(s|=4,l++),o&&o.length&&(s|=8,l++),Ji(e,0),$i(e,1),$i(e,0),$i(e,s),n&&n.length&&Ti(e,n),i&&i.length&&Ti(e,i),a&&a.length&&Ti(e,a),o&&o.length&&Ti(e,o),ca(e,"Crv "),$i(e,4),$i(e,0),$i(e,l),n&&n.length&&($i(e,0),Ti(e,n)),i&&i.length&&($i(e,1),Ti(e,i)),a&&a.length&&($i(e,2),Ti(e,a)),o&&o.length&&($i(e,3),Ti(e,o)),da(e,2)}),oi("expA",Mi("exposure"),function(e,t,r){if(1!==Ar(e))throw new Error("Invalid expA version");t.adjustment=ri(ri({},t.adjustment),{type:"exposure",exposure:Er(e),offset:Er(e),gamma:Er(e)}),Wr(e,r())},function(e,t){var r=t.adjustment;$i(e,1),ia(e,r.exposure),ia(e,r.offset),ia(e,r.gamma),da(e,2)}),oi("vibA",Mi("vibrance"),function(e,t,r){var n=ve(e);t.adjustment={type:"vibrance"},void 0!==n.vibrance&&(t.adjustment.vibrance=n.vibrance),void 0!==n.Strt&&(t.adjustment.saturation=n.Strt),Wr(e,r())},function(e,t){var r=t.adjustment,n={};void 0!==r.vibrance&&(n.vibrance=r.vibrance),void 0!==r.saturation&&(n.Strt=r.saturation),ye(e,"","null",n)}),oi("hue2",Mi("hue/saturation"),function(e,t,r){if(2!==Ar(e))throw new Error("Invalid hue2 version");t.adjustment=ri(ri({},t.adjustment),{type:"hue/saturation",master:Ri(e),reds:Ri(e),yellows:Ri(e),greens:Ri(e),cyans:Ri(e),blues:Ri(e),magentas:Ri(e)}),Wr(e,r())},function(e,t){var r=t.adjustment;$i(e,2),Bi(e,r.master),Bi(e,r.reds),Bi(e,r.yellows),Bi(e,r.greens),Bi(e,r.cyans),Bi(e,r.blues),Bi(e,r.magentas)}),oi("blnc",Mi("color balance"),function(e,t,r){t.adjustment={type:"color balance",shadows:zi(e),midtones:zi(e),highlights:zi(e),preserveLuminosity:!!xr(e)},Wr(e,r())},function(e,t){var r=t.adjustment;Ni(e,r.shadows||{}),Ni(e,r.midtones||{}),Ni(e,r.highlights||{}),Ji(e,r.preserveLuminosity?1:0),da(e,1)}),oi("blwh",Mi("black & white"),function(e,t,r){var n=ve(e);t.adjustment={type:"black & white",reds:n["Rd  "],yellows:n.Yllw,greens:n["Grn "],cyans:n["Cyn "],blues:n["Bl  "],magentas:n.Mgnt,useTint:!!n.useTint,presetKind:n.bwPresetKind,presetFileName:n.blackAndWhitePresetFileName},void 0!==n.tintColor&&(t.adjustment.tintColor=Ge(n.tintColor)),Wr(e,r())},function(e,t){var r=t.adjustment;ye(e,"","null",{"Rd  ":r.reds||0,Yllw:r.yellows||0,"Grn ":r.greens||0,"Cyn ":r.cyans||0,"Bl  ":r.blues||0,Mgnt:r.magentas||0,useTint:!!r.useTint,tintColor:Ve(r.tintColor),bwPresetKind:r.presetKind||0,blackAndWhitePresetFileName:r.presetFileName||""})}),oi("phfl",Mi("photo filter"),function(e,t,r){var n,i=Ar(e);if(2!==i&&3!==i)throw new Error("Invalid phfl version");n=2===i?fn(e):{l:Mr(e)/100,a:Mr(e)/100,b:Mr(e)/100},t.adjustment={type:"photo filter",color:n,density:Lr(e)/100,preserveLuminosity:!!xr(e)},Wr(e,r())},function(e,t){var r=t.adjustment;$i(e,2),Ca(e,r.color||{l:0,a:0,b:0}),na(e,100*(r.density||0)),Ji(e,r.preserveLuminosity?1:0),da(e,3)}),oi("mixr",Mi("channel mixer"),function(e,t,r){if(1!==Ar(e))throw new Error("Invalid mixr version");var n=t.adjustment=ri(ri({},t.adjustment),{type:"channel mixer",monochrome:!!Ar(e)});n.monochrome||(n.red=Ui(e),n.green=Ui(e),n.blue=Ui(e)),n.gray=Ui(e),Wr(e,r())},function(e,t){var r=t.adjustment;$i(e,1),$i(e,r.monochrome?1:0),r.monochrome?(Gi(e,r.gray),da(e,30)):(Gi(e,r.red),Gi(e,r.green),Gi(e,r.blue),Gi(e,r.gray))});var Vi=w("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),ji=w("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Hi=w("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});oi("clrL",Mi("color lookup"),function(e,t,r){if(1!==Ar(e))throw new Error("Invalid clrL version");var n=ve(e);t.adjustment={type:"color lookup"};var i=t.adjustment;void 0!==n.lookupType&&(i.lookupType=Vi.decode(n.lookupType)),void 0!==n["Nm  "]&&(i.name=n["Nm  "]),void 0!==n.Dthr&&(i.dither=n.Dthr),void 0!==n.profile&&(i.profile=n.profile),void 0!==n.LUTFormat&&(i.lutFormat=ji.decode(n.LUTFormat)),void 0!==n.dataOrder&&(i.dataOrder=Hi.decode(n.dataOrder)),void 0!==n.tableOrder&&(i.tableOrder=Hi.decode(n.tableOrder)),void 0!==n.LUT3DFileData&&(i.lut3DFileData=n.LUT3DFileData),void 0!==n.LUT3DFileName&&(i.lut3DFileName=n.LUT3DFileName),Wr(e,r())},function(e,t){var r=t.adjustment,n={};void 0!==r.lookupType&&(n.lookupType=Vi.encode(r.lookupType)),void 0!==r.name&&(n["Nm  "]=r.name),void 0!==r.dither&&(n.Dthr=r.dither),void 0!==r.profile&&(n.profile=r.profile),void 0!==r.lutFormat&&(n.LUTFormat=ji.encode(r.lutFormat)),void 0!==r.dataOrder&&(n.dataOrder=Hi.encode(r.dataOrder)),void 0!==r.tableOrder&&(n.tableOrder=Hi.encode(r.tableOrder)),void 0!==r.lut3DFileData&&(n.LUT3DFileData=r.lut3DFileData),void 0!==r.lut3DFileName&&(n.LUT3DFileName=r.lut3DFileName),$i(e,1),ye(e,"","null",n)}),oi("nvrt",Mi("invert"),function(e,t,r){t.adjustment={type:"invert"},Wr(e,r())},function(){}),oi("post",Mi("posterize"),function(e,t,r){t.adjustment={type:"posterize",levels:Ar(e)},Wr(e,r())},function(e,t){var r;$i(e,null!==(r=t.adjustment.levels)&&void 0!==r?r:4),da(e,2)}),oi("thrs",Mi("threshold"),function(e,t,r){t.adjustment={type:"threshold",level:Ar(e)},Wr(e,r())},function(e,t){var r;$i(e,null!==(r=t.adjustment.level)&&void 0!==r?r:128),da(e,2)});var Wi=["","","","rgb","hsb","","lab"];function Xi(e){return{c:Dr(e),m:Dr(e),y:Dr(e),k:Dr(e)}}function Zi(e,t){var r=t||{};Qi(e,r.c),Qi(e,r.m),Qi(e,r.y),Qi(e,r.k)}function Ki(e){return Object.keys(e).map(function(t){return e[t]}).some(function(e){return Array.isArray(e)&&e.length>1})}oi("grdm",Mi("gradient map"),function(e,t,r){var n=Ar(e);if(1!==n&&3!==n)throw new Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!xr(e),i.dither=!!xr(e);var a=!!xr(e);if(e.offset--,a){var o=Nr(e);i.method=ht.decode(o)}i.name=Vr(e),i.colorStops=[],i.opacityStops=[];for(var s=Ar(e),l=0;l<s;l++)i.colorStops.push({location:Lr(e),midpoint:Lr(e)/100,color:fn(e)}),Wr(e,2);var d=Ar(e);for(l=0;l<d;l++)i.opacityStops.push({location:Lr(e),midpoint:Lr(e)/100,opacity:Ar(e)/255});if(2!==Ar(e))throw new Error("Invalid grdm expansion count");var c=Ar(e);if(i.smoothness=c/4096,32!==Ar(e))throw new Error("Invalid grdm length");i.gradientType=Ar(e)?"noise":"solid",i.randomSeed=Lr(e),i.addTransparency=!!Ar(e),i.restrictColors=!!Ar(e),i.roughness=Lr(e)/4096,i.colorModel=Wi[Ar(e)]||"rgb",i.min=[Ar(e)/32768,Ar(e)/32768,Ar(e)/32768,Ar(e)/32768],i.max=[Ar(e)/32768,Ar(e)/32768,Ar(e)/32768,Ar(e)/32768],Wr(e,r());for(var u=0,f=i.colorStops;u<f.length;u++){f[u].location/=c}for(var h=0,p=i.opacityStops;h<p.length;h++){p[h].location/=c}t.adjustment=i},function(e,t){var r,n,i,a=t.adjustment;$i(e,void 0!==a.method?3:1),Ji(e,a.reverse?1:0),Ji(e,a.dither?1:0),void 0!==a.method&&ca(e,ht.encode(a.method)),ha(e,a.name||""),$i(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round(4096*(null!==(r=a.smoothness)&&void 0!==r?r:1)),s=0,l=a.colorStops||[];s<l.length;s++){var d=l[s];na(e,Math.round(d.location*o)),na(e,Math.round(100*d.midpoint)),Ca(e,d.color),da(e,2)}$i(e,a.opacityStops&&a.opacityStops.length||0);for(var c=0,u=a.opacityStops||[];c<u.length;c++){d=u[c];na(e,Math.round(d.location*o)),na(e,Math.round(100*d.midpoint)),$i(e,Math.round(255*d.opacity))}$i(e,2),$i(e,o),$i(e,32),$i(e,"noise"===a.gradientType?1:0),na(e,a.randomSeed||0),$i(e,a.addTransparency?1:0),$i(e,a.restrictColors?1:0),na(e,Math.round(4096*(null!==(n=a.roughness)&&void 0!==n?n:1)));var f=Wi.indexOf(null!==(i=a.colorModel)&&void 0!==i?i:"rgb");$i(e,-1===f?3:f);for(var h=0;h<4;h++)$i(e,Math.round(32768*(a.min&&a.min[h]||0)));for(h=0;h<4;h++)$i(e,Math.round(32768*(a.max&&a.max[h]||0)));da(e,4)}),oi("selc",Mi("selective color"),function(e,t){if(1!==Ar(e))throw new Error("Invalid selc version");var r=Ar(e)?"absolute":"relative";Wr(e,8),t.adjustment={type:"selective color",mode:r,reds:Xi(e),yellows:Xi(e),greens:Xi(e),cyans:Xi(e),blues:Xi(e),magentas:Xi(e),whites:Xi(e),neutrals:Xi(e),blacks:Xi(e)}},function(e,t){var r=t.adjustment;$i(e,1),$i(e,"absolute"===r.mode?1:0),da(e,8),Zi(e,r.reds),Zi(e,r.yellows),Zi(e,r.greens),Zi(e,r.cyans),Zi(e,r.blues),Zi(e,r.magentas),Zi(e,r.whites),Zi(e,r.neutrals),Zi(e,r.blacks)}),oi("CgEd",function(e){var t=e.adjustment;return!!t&&("brightness/contrast"===t.type&&!t.useLegacy||("levels"===t.type||"curves"===t.type||"exposure"===t.type||"channel mixer"===t.type||"hue/saturation"===t.type)&&void 0!==t.presetFileName)},function(e,t,r){var n=ve(e);if(1!==n.Vrsn)throw new Error("Invalid CgEd version");t.adjustment="presetFileName"in n?ri(ri({},t.adjustment),{presetKind:n.presetKind,presetFileName:n.presetFileName}):"curvesPresetFileName"in n?ri(ri({},t.adjustment),{presetKind:n.curvesPresetKind,presetFileName:n.curvesPresetFileName}):"mixerPresetFileName"in n?ri(ri({},t.adjustment),{presetKind:n.mixerPresetKind,presetFileName:n.mixerPresetFileName}):{type:"brightness/contrast",brightness:n.Brgh,contrast:n.Cntr,meanValue:n.means,useLegacy:!!n.useLegacy,labColorOnly:!!n["Lab "],auto:!!n.Auto},Wr(e,r())},function(e,t){var r,n,i,a,o=t.adjustment;if("levels"===o.type||"exposure"===o.type||"hue/saturation"===o.type)ye(e,"","null",{Vrsn:1,presetKind:null!==(r=o.presetKind)&&void 0!==r?r:1,presetFileName:o.presetFileName||""});else if("curves"===o.type){ye(e,"","null",{Vrsn:1,curvesPresetKind:null!==(n=o.presetKind)&&void 0!==n?n:1,curvesPresetFileName:o.presetFileName||""})}else if("channel mixer"===o.type){ye(e,"","null",{Vrsn:1,mixerPresetKind:null!==(i=o.presetKind)&&void 0!==i?i:1,mixerPresetFileName:o.presetFileName||""})}else{if("brightness/contrast"!==o.type)throw new Error("Unhandled CgEd case");ye(e,"","null",{Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:null!==(a=o.meanValue)&&void 0!==a?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto})}}),oi("Txt2",li("engineData"),function(e,t,r,i){var a=zr(e,r());t.engineData=n.fromByteArray(a);var o=function(e){var t=[];return function e(r){var n;if(r.children)for(var i=0,a=r.children;i<a.length;i++){var o=a[i];void 0!==(null===(n=o.text)||void 0===n?void 0:n.index)&&(t[o.text.index]=o),e(o)}}(e),t}(i),s=ti(Sn(a)).ResourceDict.TextFrameSet;if(s)for(var l=0;l<s.length;l++){var d=o[l];s[l].path&&(null==d?void 0:d.text)&&(d.text.textPath=s[l].path)}},function(e,t){la(e,n.toByteArray(t.engineData))}),oi("FEid",li("filterEffectsMasks"),function(e,t,r){var n=Mr(e);if(n<1||n>3)throw new Error("Invalid filterEffects version ".concat(n));for(t.filterEffectsMasks=[];r()>8;){if(Lr(e))throw new Error("filterEffects: 64 bit length is not supported");var i=Lr(e),a=e.offset+i,o=Gr(e,1),s=Mr(e);if(1!==s)throw new Error("Invalid filterEffect version ".concat(s));if(Lr(e))throw new Error("filterEffect: 64 bit length is not supported");Lr(e);for(var l=Mr(e),d=Mr(e),c=Mr(e),u=Mr(e),f=Mr(e),h=Mr(e),p=[],m=0;m<h+2;m++){if(Mr(e)){if(Lr(e))throw new Error("filterEffect: 64 bit length is not supported");var g=Lr(e);if(!g)throw new Error("filterEffect: Empty channel");var v=Ar(e),y=zr(e,g-2);p.push({compressionMode:v,data:y})}else p.push(void 0)}if(t.filterEffectsMasks.push({id:o,top:l,left:d,bottom:c,right:u,depth:f,channels:p}),e.offset<a&&xr(e)){var b=Mr(e),w=Mr(e),k=Mr(e),S=Mr(e);if(Lr(e))throw new Error("filterEffect: 64 bit length is not supported");var _=Lr(e);v=Ar(e),y=zr(e,_-2);t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={top:b,left:w,bottom:k,right:S,compressionMode:v,data:y}}e.offset=a;for(var F=i;F%4;)e.offset++,F++}},function(e,t){var r;ta(e,3);for(var n=0,i=t.filterEffectsMasks;n<i.length;n++){var a=i[n];na(e,0),na(e,0);var o=e.offset;ua(e,a.id,1),ta(e,1),na(e,0),na(e,0);var s=e.offset;ta(e,a.top),ta(e,a.left),ta(e,a.bottom),ta(e,a.right),ta(e,a.depth);var l=Math.max(0,a.channels.length-2);ta(e,l);for(var d=0;d<l+2;d++){var c=a.channels[d];ta(e,c?1:0),c&&(na(e,0),na(e,c.data.length+2),$i(e,c.compressionMode),la(e,c.data))}e.view.setUint32(s-4,e.offset-s,!1);var u=null===(r=t.filterEffectsMasks[t.filterEffectsMasks.length-1])||void 0===r?void 0:r.extra;u&&(Ji(e,1),ta(e,u.top),ta(e,u.left),ta(e,u.bottom),ta(e,u.right),na(e,0),na(e,u.data.byteLength+2),$i(e,u.compressionMode),la(e,u.data));var f=e.offset-o;for(e.view.setUint32(o-4,f,!1);f%4;)da(e,1),f++}}),si("FXid","FEid"),oi("FMsk",li("filterMask"),function(e,t){t.filterMask={colorSpace:fn(e),opacity:Ar(e)/255}},function(e,t){var r;Ca(e,t.filterMask.colorSpace),$i(e,255*S(null!==(r=t.filterMask.opacity)&&void 0!==r?r:1,0,1))}),oi("artd",function(e){return void 0!==e.artboards},function(e,t,r){var n=ve(e);t.artboards={count:n["Cnt "],autoExpandOffset:{horizontal:n.autoExpandOffset.Hrzn,vertical:n.autoExpandOffset.Vrtc},origin:{horizontal:n.origin.Hrzn,vertical:n.origin.Vrtc},autoExpandEnabled:n.autoExpandEnabled,autoNestEnabled:n.autoNestEnabled,autoPositionEnabled:n.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!n.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:Ge(n.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:n.docDefaultNewArtboardBackgroundType},Wr(e,r())},function(e,t){var r,n,i,a,o,s=t.artboards;ye(e,"","null",{"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:null===(r=s.autoExpandEnabled)||void 0===r||r,autoNestEnabled:null===(n=s.autoNestEnabled)||void 0===n||n,autoPositionEnabled:null===(i=s.autoPositionEnabled)||void 0===i||i,shrinkwrapOnSaveEnabled:null===(a=s.shrinkwrapOnSaveEnabled)||void 0===a||a,docDefaultNewArtboardBackgroundColor:Ve(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:null!==(o=s.docDefaultNewArtboardBackgroundType)&&void 0!==o?o:1},"artd")}),oi("lfx2",function(e){return void 0!==e.effects&&!Ki(e.effects)},function(e,t,r){if(0!==Lr(e))throw new Error("Invalid lfx2 version");var n=ve(e);t.effects=xe(n,!!e.logMissingFeatures),Wr(e,r())},function(e,t,r,n){var i=Ie(t.effects,!!n.logMissingFeatures,!0);na(e,0),ye(e,"","null",i)}),oi("cinf",li("compositorUsed"),function(e,t,r){var n=ve(e);function i(e){return e.split(".")[1]}t.compositorUsed={description:n.description,reason:n.reason,engine:i(n.Engn)},n.Vrsn&&(t.compositorUsed.version=n.Vrsn),n.psVersion&&(t.compositorUsed.photoshopVersion=n.psVersion),n.enableCompCore&&(t.compositorUsed.enableCompCore=i(n.enableCompCore)),n.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(t.compositorUsed.enableCompCoreThreads=i(n.enableCompCoreThreads)),n.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(n.compCoreSupport)),n.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(n.compCoreGPUSupport)),Wr(e,r())},function(e,t){var r=t.compositorUsed,n={Vrsn:r.version||{major:1,minor:0,fix:0}};r.photoshopVersion&&(n.psVersion=r.photoshopVersion),n.description=r.description,n.reason=r.reason,n.Engn="Engn.".concat(r.engine),r.enableCompCore&&(n.enableCompCore="enable.".concat(r.enableCompCore)),r.enableCompCoreGPU&&(n.enableCompCoreGPU="enable.".concat(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(n.enableCompCoreThreads="enable.".concat(r.enableCompCoreThreads)),r.compCoreSupport&&(n.compCoreSupport="reason.".concat(r.compCoreSupport)),r.compCoreGPUSupport&&(n.compCoreGPUSupport="reason.".concat(r.compCoreGPUSupport)),ye(e,"","null",n)}),oi("extn",function(e){return void 0!==e._extn},function(e,t){ve(e)},function(e,t){}),oi("iOpa",li("fillOpacity"),function(e,t){t.fillOpacity=xr(e)/255,Wr(e,3)},function(e,t){Ji(e,255*t.fillOpacity),da(e,3)}),oi("brst",li("channelBlendingRestrictions"),function(e,t,r){for(t.channelBlendingRestrictions=[];r()>4;)t.channelBlendingRestrictions.push(Mr(e))},function(e,t){for(var r=0,n=t.channelBlendingRestrictions;r<n.length;r++){ta(e,n[r])}}),oi("tsly",li("transparencyShapesLayer"),function(e,t){t.transparencyShapesLayer=!!xr(e),Wr(e,3)},function(e,t){Ji(e,t.transparencyShapesLayer?1:0),da(e,3)});var Yi=function(){return Yi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yi.apply(this,arguments)};function qi(e){void 0===e&&(e=4096);var t=new ArrayBuffer(e);return{buffer:t,view:new DataView(t),offset:0,tempBuffer:void 0}}function Ji(e,t){var r=Sa(e,1);e.view.setUint8(r,t)}function Qi(e,t){var r=Sa(e,2);e.view.setInt16(r,t,!1)}function $i(e,t){var r=Sa(e,2);e.view.setUint16(r,t,!1)}function ea(e,t){var r=Sa(e,2);e.view.setUint16(r,t,!0)}function ta(e,t){var r=Sa(e,4);e.view.setInt32(r,t,!1)}function ra(e,t){var r=Sa(e,4);e.view.setInt32(r,t,!0)}function na(e,t){var r=Sa(e,4);e.view.setUint32(r,t,!1)}function ia(e,t){var r=Sa(e,4);e.view.setFloat32(r,t,!1)}function aa(e,t){var r=Sa(e,8);e.view.setFloat64(r,t,!1)}function oa(e,t){ta(e,65536*t)}function sa(e,t){ta(e,t*(1<<24))}function la(e,t){t&&(ka(e,e.offset+t.length),new Uint8Array(e.buffer).set(t,e.offset),e.offset+=t.length)}function da(e,t){for(var r=0;r<t;r++)Ji(e,0)}function ca(e,t){if(4!==t.length)throw new Error("Invalid signature: '".concat(t,"'"));for(var r=0;r<4;r++)Ji(e,t.charCodeAt(r))}function ua(e,t,r){var n=t.length;if(n>255)throw new Error("String too long");Ji(e,n);for(var i=0;i<n;i++){var a=t.charCodeAt(i);Ji(e,a<128?a:"?".charCodeAt(0))}for(;++n%r;)Ji(e,0)}function fa(e,t){na(e,t.length),function(e,t){for(var r=0;r<t.length;r++)$i(e,t.charCodeAt(r))}(e,t)}function ha(e,t){na(e,t.length+1);for(var r=0;r<t.length;r++)$i(e,t.charCodeAt(r));$i(e,0)}function pa(e){void 0===e&&(e=[]);for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];if(i.canvas||i.imageData){var a=Fa(i),o=a.width,s=a.height;t=Math.max(t,2*s+2*o*s)}i.children&&(t=Math.max(t,pa(i.children)))}return t}function ma(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),i&&na(e,0);var a=e.offset;na(e,0),r();for(var o=e.offset-a-4,s=o;s%t!==0;)Ji(e,0),s++;n&&(o=s),e.view.setUint32(a,o,!1)}function ga(e){var t;null===(t=e.children)||void 0===t||t.forEach(ga);var r=e.imageData;if(r&&(r.data instanceof Uint32Array||r.data instanceof Uint16Array))throw new Error("imageData has incorrect bitDepth");if("mask"in e&&e.mask){var n=e.mask.imageData;if(n&&(n.data instanceof Uint32Array||n.data instanceof Uint16Array))throw new Error("mask imageData has incorrect bitDepth")}}function va(e,t,r){var n;if(void 0===r&&(r={}),!(+t.width>0&&+t.height>0))throw new Error("Invalid document size");if((t.width>3e4||t.height>3e4)&&!r.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var i=null!==(n=t.bitsPerChannel)&&void 0!==n?n:8;if(8!==i)throw new Error("bitsPerChannel other than 8 are not supported for writing");ga(t);var a=Yi({},t.imageResources),s=Yi(Yi({},r),{layerIds:new Set,layerToId:new Map});s.generateThumbnail&&(a.thumbnail=function(e){var t=D(10,10),r=1;e.width>e.height?(t.width=160,t.height=Math.floor(e.height*(t.width/e.width)),r=t.width/e.width):(t.height=160,t.width=Math.floor(e.width*(t.height/e.height)),r=t.height/e.height);var n=t.getContext("2d");n.scale(r,r),e.imageData?n.drawImage(I(e.imageData),0,0):e.canvas&&n.drawImage(e.canvas,0,0);return t}(t));var l=t.imageData;if(!l&&t.canvas&&(l=t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height)),l&&(t.width!==l.width||t.height!==l.height))throw new Error("Document canvas must have the same size as document");var d=!!l&&_(l),c=Math.max(pa(t.children),8*t.width*t.height+2*t.height);e.tempBuffer=new Uint8Array(c),ca(e,"8BPS"),$i(e,r.psb?2:1),da(e,6),$i(e,d?4:3),na(e,t.height),na(e,t.width),$i(e,i),$i(e,3),ma(e,1,function(){var r,n,i;if(t.palette){for(var a=0;a<256;a++)Ji(e,(null===(r=t.palette[a])||void 0===r?void 0:r.r)||0);for(a=0;a<256;a++)Ji(e,(null===(n=t.palette[a])||void 0===n?void 0:n.g)||0);for(a=0;a<256;a++)Ji(e,(null===(i=t.palette[a])||void 0===i?void 0:i.b)||0)}});var u=[];wa(u,t.children),u.length||u.push({}),a.layersGroup=u.map(function(e){return e.linkGroup||0}),a.layerGroupsEnabledId=u.map(function(e){return 0==e.linkGroupEnabled?0:1}),ma(e,1,function(){for(var t=function(t){for(var r=t.has(a),n=!1===r?0:!0===r?1:r,i=function(r){ca(e,"8BIM"),$i(e,t.key),ua(e,"",2),ma(e,2,function(){return t.write(e,a,r)})},o=0;o<n;o++)i(o)},r=0,n=$t;r<n.length;r++){t(n[r])}}),ma(e,2,function(){!function(e,t,r,n,i){ma(e,4,function(){var a;Qi(e,n?-t.length:t.length);for(var s=t.map(function(t,r){return function(e,t,r,n){var i=function(e,t,r,n){var i=0|t.top,a=0|t.left,o=0|t.right,s=0|t.bottom,l=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],d=Fa(t),c=d.width,u=d.height;if(!t.canvas&&!t.imageData||!c||!u)return{layer:t,top:i,left:a,right:o=a,bottom:s=i,channels:l};o=a+c,s=i+u;var f=t.imageData||t.canvas.getContext("2d").getImageData(0,0,c,u);if(n.trimImageData){var h=function(e){var t=0,r=0,n=e.width,i=e.height;for(;t<i&&Ia(e,t,r,n);)t++;for(;i>t&&Ia(e,i-1,r,n);)i--;for(;r<n&&xa(e,r,t,i);)r++;for(;n>r&&xa(e,n-1,t,i);)n--;return{top:t,left:r,right:n,bottom:i}}(f);if(0!==h.left||0!==h.top||h.right!==f.width||h.bottom!==f.height){if(a+=h.left,i+=h.top,o-=f.width-h.right,u=(s-=f.height-h.bottom)-i,!(c=o-a)||!u)return{layer:t,top:i,left:a,right:o,bottom:s,channels:l};f=function(e,t,r,n,i){if(e.data instanceof Uint32Array||e.data instanceof Uint16Array)throw new Error("imageData has incorrect bit depth");for(var a=M(n,i),o=e.data,s=a.data,l=0;l<i;l++)for(var d=0;d<n;d++){var c=4*(d+t+(l+r)*e.width),u=4*(d+l*n);s[u]=o[c],s[u+1]=o[c+1],s[u+2]=o[c+2],s[u+3]=o[c+3]}return a}(f,h.left,h.top,c,u)}}var p=[0,1,2];(!r||n.noBackground||t.mask||_(f))&&p.unshift(-1);return l=p.map(function(t){var r,i,a=k(t,!1);return n.compress?(r=C(f,[a]),i=2):(r=x(e,f,[a],!!n.psb),i=1),{channelId:t,compression:i,buffer:r,length:2+r.length}}),{layer:t,top:i,left:a,right:o,bottom:s,channels:l}}(e,t,r,n);t.mask&&_a(e,i,t,t.mask,n,!1);t.realMask&&_a(e,i,t,t.realMask,n,!0);return i}(e.tempBuffer,t,0===r,i)}),l=function(t){var n=t.layer,s=t.top,l=t.left,d=t.bottom,c=t.right,u=t.channels;ta(e,s),ta(e,l),ta(e,d),ta(e,c),$i(e,u.length);for(var f=0,h=u;f<h.length;f++){var p=h[f];Qi(e,p.channelId),i.psb&&na(e,0),na(e,p.length)}ca(e,"8BIM"),ca(e,o[n.blendMode]||"norm"),Ji(e,Math.round(255*S(null!==(a=n.opacity)&&void 0!==a?a:1,0,1))),Ji(e,n.clipping?1:0);var m=8;n.transparencyProtected&&(m|=1),n.hidden&&(m|=2),(n.vectorMask||n.sectionDivider&&0!==n.sectionDivider.type||n.adjustment)&&(m|=16),n.effectsOpen&&(m|=32),Ji(e,m),Ji(e,0),ma(e,1,function(){!function(e,t,r){var n=t.mask,i=t.realMask;ma(e,1,function(){if(n||i){var t=0,a=0,o=0;n&&(void 0!==n.userMaskDensity&&(t|=1),void 0!==n.userMaskFeather&&(t|=2),void 0!==n.vectorMaskDensity&&(t|=4),void 0!==n.vectorMaskFeather&&(t|=8),n.disabled&&(a|=2),n.positionRelativeToLayer&&(a|=1),n.fromVectorData&&(a|=8),t&&(a|=16));var s=r.mask||{};if(ta(e,s.top||0),ta(e,s.left||0),ta(e,s.bottom||0),ta(e,s.right||0),Ji(e,n&&n.defaultColor||0),Ji(e,a),i){i.disabled&&(o|=2),i.positionRelativeToLayer&&(o|=1),i.fromVectorData&&(o|=8);var l=r.realMask||{};Ji(e,o),Ji(e,i.defaultColor||0),ta(e,l.top||0),ta(e,l.left||0),ta(e,l.bottom||0),ta(e,l.right||0)}t&&n&&(Ji(e,t),void 0!==n.userMaskDensity&&Ji(e,Math.round(255*n.userMaskDensity)),void 0!==n.userMaskFeather&&aa(e,n.userMaskFeather),void 0!==n.vectorMaskDensity&&Ji(e,Math.round(255*n.vectorMaskDensity)),void 0!==n.vectorMaskFeather&&aa(e,n.vectorMaskFeather)),da(e,2)}})}(e,n,t),function(e,t){ma(e,1,function(){var r=t.blendingRanges;if(r){ya(e,r.compositeGrayBlendSource),ya(e,r.compositeGraphBlendDestinationRange);for(var n=0,i=r.ranges;n<i.length;n++){var a=i[n];ya(e,a.sourceRange),ya(e,a.destRange)}}})}(e,n),ua(e,(n.name||"").substring(0,255),4),ba(e,n,r,i)})},d=0,c=s;d<c.length;d++){l(c[d])}for(var u=0,f=s;u<f.length;u++)for(var h=0,p=f[u].channels;h<p.length;h++){var m=p[h];$i(e,m.compression),m.buffer&&la(e,m.buffer)}},!0,i.psb)}(e,u,t,d,s),function(e,t){ma(e,1,function(){t&&($i(e,t.overlayColorSpace),$i(e,t.colorSpace1),$i(e,t.colorSpace2),$i(e,t.colorSpace3),$i(e,t.colorSpace4),$i(e,255*t.opacity),Ji(e,t.kind),da(e,3))})}(e,t.globalLayerMaskInfo),ba(e,t,t,s)},void 0,!!s.psb);var f=d?[0,1,2,3]:[0,1,2],h=l?l.width:t.width,p=l?l.height:t.height,m={data:new Uint8Array(h*p*4),width:h,height:p};if($i(e,1),l&&m.data.set(new Uint8Array(l.data.buffer,l.data.byteOffset,l.data.byteLength)),d)for(var g=m.width*m.height*4,v=m.data,y=0;y<g;y+=4){var b=v[y+3];if(0!=b&&255!=b){var w=b/255,F=255*(1-w);v[y+0]=v[y+0]*w+F,v[y+1]=v[y+1]*w+F,v[y+2]=v[y+2]*w+F}}la(e,x(e.tempBuffer,m,f,!!r.psb))}function ya(e,t){Ji(e,t[0]),Ji(e,t[1]),Ji(e,t[2]),Ji(e,t[3])}function ba(e,t,r,n){for(var i=function(i){var a=i.key;if("Txt2"===a&&n.invalidateTextLayers)return"continue";if("vmsk"===a&&n.psb&&(a="vsms"),i.has(t)){var o=n.psb&&-1!==b.indexOf(a),s="Txt2"!==a&&"cinf"!==a&&"extn"!==a&&"CAI "!==a&&"OCIO"!==a,l="Txt2"===a||"luni"===a||"vmsk"===a||"artb"===a||"artd"===a||"vogk"===a||"SoLd"===a||"lnk2"===a||"vscg"===a||"vsms"===a||"GdFl"===a||"lmfx"===a||"lrFX"===a||"cinf"===a||"PlLd"===a||"Anno"===a||"CAI "===a||"OCIO"===a||"GenI"===a||"FEid"===a;ca(e,o?"8B64":"8BIM"),ca(e,a),ma(e,l?4:2,function(){i.write(e,t,r,n)},s,o)}},a=0,o=ii;a<o.length;a++){i(o[a])}}function wa(e,t){if(t)for(var r=0,n=t;r<n.length;r++){var i=n[r];if(i.children&&i.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(i.children&&i.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");i.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),wa(e,i.children),e.push(Yi(Yi({},i),{blendMode:"pass through"===i.blendMode?"normal":i.blendMode,sectionDivider:{type:!1===i.opened?2:1,key:o[i.blendMode]||"pass",subType:0}}))):e.push(Yi({},i))}}function ka(e,t){t>e.buffer.byteLength&&function(e,t){var r=e.buffer.byteLength;do{r*=2}while(t>r);var n=new ArrayBuffer(r),i=new Uint8Array(n),a=new Uint8Array(e.buffer);i.set(a),e.buffer=n,e.view=new DataView(e.buffer)}(e,t)}function Sa(e,t){var r=e.offset;return ka(e,e.offset+=t),r}function _a(e,t,r,n,i,a){var o=0|n.top,s=0|n.left,l=0|n.right,d=0|n.bottom,c=Fa(n),u=c.width,f=c.height,h=n.imageData;if(!h&&n.canvas&&u&&f&&(h=n.canvas.getContext("2d").getImageData(0,0,u,f)),u&&f&&h){if(l=s+u,d=o+f,h.width!==u||h.height!==f)throw new Error("Invalid imageData dimentions");var p=void 0,m=void 0;i.compress?(p=C(h,[0]),m=2):(p=x(e,h,[0],!!i.psb),m=1),t.channels.push({channelId:a?-3:-2,compression:m,buffer:p,length:2+p.length})}t[a?"realMask":"mask"]={top:o,left:s,right:l,bottom:d}}function Fa(e){var t=e.canvas;return e.imageData||t||{width:0,height:0}}function Ia(e,t,r,n){for(var i=e.data,a=4*(t*e.width+r)+3|0,o=a+4*(n-r)|0,s=a;s<o;s=s+4|0)if(0!==i[s])return!1;return!0}function xa(e,t,r,n){for(var i=e.data,a=4*e.width|0,o=r,s=r*a+4*t+3|0;o<n;o++,s=s+a|0)if(0!==i[s])return!1;return!0}function Ca(e,t){t?"r"in t?($i(e,0),$i(e,Math.round(257*t.r)),$i(e,Math.round(257*t.g)),$i(e,Math.round(257*t.b)),$i(e,0)):"fr"in t?($i(e,0),$i(e,Math.round(255*t.fr*257)),$i(e,Math.round(255*t.fg*257)),$i(e,Math.round(255*t.fb*257)),$i(e,0)):"l"in t?($i(e,7),Qi(e,Math.round(1e4*t.l)),Qi(e,Math.round(t.a<0?12800*t.a:12700*t.a)),Qi(e,Math.round(t.b<0?12800*t.b:12700*t.b)),$i(e,0)):"h"in t?($i(e,1),$i(e,Math.round(65535*t.h)),$i(e,Math.round(65535*t.s)),$i(e,Math.round(65535*t.b)),$i(e,0)):"c"in t?($i(e,2),$i(e,Math.round(257*t.c)),$i(e,Math.round(257*t.m)),$i(e,Math.round(257*t.y)),$i(e,Math.round(257*t.k))):($i(e,8),$i(e,Math.round(1e4*t.k/255)),da(e,6)):($i(e,0),da(e,8))}var Da=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],Aa={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function Oa(e){return{control:Da[e.bVTy],steps:e.fStp,jitter:He(e.jitter),minimum:He(e["Mnm "])}}function Ma(e){var t={size:Ke(e.Dmtr,"Pixels"),angle:je(e.Angl),roundness:He(e.Rndn),spacingOn:e.Intr,spacing:He(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(t.name=e["Nm  "]),e.Hrdn&&(t.hardness=He(e.Hrdn)),e.sampledData&&(t.sampledData=e.sampledData),t}function Pa(e,t){var r,n,i,a;void 0===t&&(t={});var o=Fr(e.buffer,e.byteOffset,e.byteLength),s=Dr(o),l=[],d=[],c=[];if(1===s||2===s)throw new Error("Unsupported ABR version (".concat(s,")"));if(6!==s&&7!==s&&9!==s&&10!==s)throw new Error("Unsupported ABR version (".concat(s,")"));var u=Dr(o);if(1!==u&&2!==u)throw new Error("Unsupported ABR minor version");for(;o.offset<o.view.byteLength;){Xr(o,"8BIM");var f=Nr(o),h=Lr(o),p=o.offset+h;switch(f){case"samp":for(;o.offset<p;){for(var m=Lr(o);3&m;)m++;var g=o.offset+m,v=Gr(o,1);Wr(o,1===u?10:264);var y=Mr(o),b=Mr(o),w=Mr(o)-y,k=Mr(o)-b;if(k<=0||w<=0)throw new Error("Invalid bounds");var S=Dr(o),_=xr(o),F=new Uint8Array(k*w);if(8===S)if(0===_)F.set(zr(o,F.byteLength));else{if(1!==_)throw new Error("Invalid compression");cn(o,{width:k,height:w,data:F},k,w,S,1,[0],!1)}else{if(16!==S)throw new Error("Invalid depth");if(0!==_)throw 1===_?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");for(var I=0;I<F.byteLength;I++)F[I]=Ar(o)>>8}l.push({id:v,bounds:{x:b,y:y,w:k,h:w},alpha:F}),o.offset=g}break;case"desc":for(var x=0,C=(P=ve(o,!0)).Brsh;x<C.length;x++){var D=C[x],A={name:D["Nm  "],shape:Ma(D.Brsh),spacing:He(D.Spcn),wetEdges:D.Wtdg,noise:D.Nose,useBrushSize:D.useBrushSize};null!=D.interpretation&&(A.interpretation=D.interpretation),null!=D.protectTexture&&(A.protectTexture=D.protectTexture),D.useTipDynamics&&(A.shapeDynamics={tiltScale:He(D.tiltScale),sizeDynamics:Oa(D.szVr),angleDynamics:Oa(D.angleDynamics),roundnessDynamics:Oa(D.roundnessDynamics),flipX:D.flipX,flipY:D.flipY,brushProjection:D.brushProjection,minimumDiameter:He(D.minimumDiameter),minimumRoundness:He(D.minimumRoundness)}),D.useScatter&&(A.scatter={count:D["Cnt "],bothAxes:D.bothAxes,countDynamics:Oa(D.countDynamics),scatterDynamics:Oa(D.scatterDynamics)}),D.useTexture&&D.Txtr&&(A.texture={id:D.Txtr.Idnt,name:D.Txtr["Nm  "],blendMode:it.decode(D.textureBlendMode),depth:He(D.textureDepth),depthMinimum:He(D.minimumDepth),depthDynamics:Oa(D.textureDepthDynamics),scale:He(D.textureScale),invert:D.InvT,brightness:D.textureBrightness,contrast:D.textureContrast});var O=D.dualBrush;O&&O.useDualBrush&&(A.dualBrush={flip:O.Flip,shape:Ma(O.Brsh),blendMode:it.decode(O.BlnM),useScatter:O.useScatter,spacing:He(O.Spcn),count:O["Cnt "],bothAxes:O.bothAxes,countDynamics:Oa(O.countDynamics),scatterDynamics:Oa(O.scatterDynamics)}),D.useColorDynamics&&(A.colorDynamics={foregroundBackground:Oa(D.clVr),hue:He(D["H   "]),saturation:He(D.Strt),brightness:He(D.Brgh),purity:He(D.purity),perTip:D.colorDynamicsPerTip}),D.usePaintDynamics&&(A.transfer={flowDynamics:Oa(D.prVr),opacityDynamics:Oa(D.opVr),wetnessDynamics:Oa(D.wtVr),mixDynamics:Oa(D.mxVr)}),D.useBrushPose&&(A.brushPose={overrideAngle:D.overridePoseAngle,overrideTiltX:D.overridePoseTiltX,overrideTiltY:D.overridePoseTiltY,overridePressure:D.overridePosePressure,pressure:He(D.brushPosePressure),tiltX:D.brushPoseTiltX,tiltY:D.brushPoseTiltY,angle:D.brushPoseAngle});var M=D.toolOptions;M&&(A.toolOptions={type:Aa[M._classID]||"brush",brushPreset:M.brushPreset,flow:null!==(r=M.flow)&&void 0!==r?r:100,smooth:null!==(n=M.Smoo)&&void 0!==n?n:0,mode:it.decode(M["Md  "]||"BlnM.Nrml"),opacity:null!==(i=M.Opct)&&void 0!==i?i:100,smoothing:!!M.smoothing,smoothingValue:M.smoothingValue||0,smoothingRadiusMode:!!M.smoothingRadiusMode,smoothingCatchup:!!M.smoothingCatchup,smoothingCatchupAtEnd:!!M.smoothingCatchupAtEnd,smoothingZoomCompensation:!!M.smoothingZoomCompensation,pressureSmoothing:!!M.pressureSmoothing,usePressureOverridesSize:!!M.usePressureOverridesSize,usePressureOverridesOpacity:!!M.usePressureOverridesOpacity,useLegacy:!!M.useLegacy},M.prVr&&(A.toolOptions.flowDynamics=Oa(M.prVr)),M.opVr&&(A.toolOptions.opacityDynamics=Oa(M.opVr)),M.szVr&&(A.toolOptions.sizeDynamics=Oa(M.szVr)),"wetness"in M&&(A.toolOptions.wetness=M.wetness),"dryness"in M&&(A.toolOptions.dryness=M.dryness),"mix"in M&&(A.toolOptions.mix=M.mix),"autoFill"in M&&(A.toolOptions.autoFill=M.autoFill),"autoClean"in M&&(A.toolOptions.autoClean=M.autoClean),"loadSolidColorOnly"in M&&(A.toolOptions.loadSolidColorOnly=M.loadSolidColorOnly),"sampleAllLayers"in M&&(A.toolOptions.sampleAllLayers=M.sampleAllLayers),"SmdF"in M&&(A.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(A.toolOptions.smudgeSampleAllLayers=M.SmdS),"Prs "in M&&(A.toolOptions.strength=M["Prs "]),"SmdF"in M&&(A.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(A.toolOptions.smudgeSampleAllLayers=M.SmdS)),d.push(A)}break;case"patt":o.offset<p&&(c.push(hn(o)),o.offset=p);break;case"phry":var P=ve(o);t.logMissingFeatures&&(null===(a=P.hierarchy)||void 0===a?void 0:a.length)&&console.log("unhandled phry section",P);break;default:throw new Error("Invalid brush type: ".concat(f))}for(;h%4;)o.offset++,h++}return{samples:l,patterns:c,brushes:d}}var La,Ea,Ta,Ra,Ba,za,Na=function(){return Na=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Na.apply(this,arguments)};function Ua(e){var t=Fr(e.buffer,e.byteOffset,e.byteLength),r={shapes:[]};if(Xr(t,"cush"),2!==Lr(t))throw new Error("Invalid version");for(var n=Lr(t),i=0;i<n;i++){for(var a=Vr(t);t.offset%4;)t.offset++;if(1!==Lr(t))throw new Error("Invalid shape version");var o=Lr(t),s=t.offset+o,l=Gr(t,1),d=Lr(t),c=Lr(t),u=Lr(t),f=Lr(t)-c,h=u-d,p={paths:[]};pi(t,p,f,h,s-t.offset),r.shapes.push(Na({name:a,id:l,width:f,height:h},p)),t.offset=s}return r}(Ea=La||(La={}))[Ea.Bitmap=0]="Bitmap",Ea[Ea.Grayscale=1]="Grayscale",Ea[Ea.Indexed=2]="Indexed",Ea[Ea.RGB=3]="RGB",Ea[Ea.CMYK=4]="CMYK",Ea[Ea.Multichannel=7]="Multichannel",Ea[Ea.Duotone=8]="Duotone",Ea[Ea.Lab=9]="Lab",(Ra=Ta||(Ta={}))[Ra.Other=0]="Other",Ra[Ra.OpenFolder=1]="OpenFolder",Ra[Ra.ClosedFolder=2]="ClosedFolder",Ra[Ra.BoundingSectionDivider=3]="BoundingSectionDivider",(za=Ba||(Ba={}))[za.None=0]="None",za[za.Visibility=1]="Visibility",za[za.Position=2]="Position",za[za.Appearance=4]="Appearance";var Ga=n.fromByteArray;function Va(e,t){return Yr("buffer"in e?Fr(e.buffer,e.byteOffset,e.byteLength):Fr(e),t)}function ja(e,t){var r=qi();return va(r,e,t),function(e){return e.buffer.slice(0,e.offset)}(r)}function Ha(e,t){var r=qi();return va(r,e,t),function(e){return new Uint8Array(e.buffer,0,e.offset)}(r)}function Wa(e,t){if("undefined"==typeof Buffer)throw new Error("Buffer not supported on this platform");return Buffer.from(Ha(e,t))}export{La as ColorMode,Ba as LayerCompCapturedInfo,Ta as SectionDividerType,Ga as byteArrayToBase64,P as initializeCanvas,Pa as readAbr,Ua as readCsh,Va as readPsd,ja as writePsd,Wa as writePsdBuffer,Ha as writePsdUint8Array};
